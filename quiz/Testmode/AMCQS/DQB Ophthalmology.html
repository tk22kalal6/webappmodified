<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ophthalmology - Combined Tests</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
</style>
  <style>
  body {
    font-family: Arial, sans-serif;
    padding: 0;
    margin: 0;
  }

  button {
    margin: 5px;
    padding: 10px 15px;
    background: #ffffff;
    border: 1px solid #2d3748;
    border-radius: 4px;
    cursor: pointer;
    color: #000000;
    position: relative;
    top: 5px;
    font-size: 14px;
    transition: background 0.2s ease, color 0.2s ease, transform 0.1s ease;
  }

  button:hover {
    background: #f3f4f6;
    color: #000000;
    transform: translateY(-1px);
  }

  body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        .iframe-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    
    /* Mobile optimization */
    

  /* Dropdown styling */
  .dropdown-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1100;
  }

  .dropdown-toggle {
    background: #2c5281;
    color: white;
    border: none;
    font-size: 14px;
    padding: 10px 18px;
    border-radius: 6px;
    font-weight: bold;
    letter-spacing: 0.5px;
  }

  .dropdown-toggle:hover {
    background: #24466c;
  }

  .dropdown-menu {
  display: none;
  position: absolute;
  right: 0;              /* keep aligned to right edge of toggle */
  margin-top: 6px;
  background: white;
  border: 1px solid #cbd5e0;
  border-radius: 8px;
  max-height: 350px;
  overflow-y: auto;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  min-width: 250px;
  max-width: 90vw;       /* prevent it from going outside screen */
  word-wrap: break-word; /* wrap long names */
  white-space: normal;   /* allow text to wrap */
  animation: fadeIn 0.2s ease-in-out;
}

.dropdown-menu button {
  display: block;
  width: 100%;
  text-align: left;
  margin: 0;
  padding: 10px 15px;
  border-radius: 0;
  background: transparent;
  color: #2d3748;
  border: none;
  border-bottom: 1px solid #edf2f7;
  font-size: 13px;
  white-space: normal;   /* allow wrapping inside button */
  word-break: break-word;
}


  img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    display: block;
    margin: 10px auto;
  }

  body > section:last-child {
    margin-bottom: 0 !important;
  }
  
</style>
  <script>
  function showTest(id) {
    document.querySelectorAll('.iframe-container').forEach(div => div.style.display = 'none');
    document.getElementById(id).style.display = 'block';
    document.getElementById('dropdownMenu').style.display = 'none';
    window.scrollTo(0, 0);
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  document.addEventListener('click', function (event) {
    const toggle = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');
    if (!toggle.contains(event.target) && !menu.contains(event.target)) {
      menu.style.display = 'none';
    }
  });
</script>
<script src="../../../access-control.js"></script>
  <script src="../../../block.js"></script>
  <script src="../../../error-handler/link-checker.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5920367457745298"
     crossorigin="anonymous"></script>
</head>
<body>
<script>
      // Initialize access control for protected page
      if (!accessControl.initProtectedPage()) {
        throw new Error('Access denied - redirecting to index.html');
      }
    </script>
  <button onclick="history.back()" style="position: absolute; top: 20px; left: 20px; background: transparent; color: white; border: none; padding: 10px; cursor: pointer; z-index: 1001; font-size: 20px;">
  <i class="fas fa-arrow-left"></i>
</button>

<div class="dropdown-wrapper">
  <button class="dropdown-toggle" id="dropdownToggle" onclick="toggleDropdown()">☰ INDEX</button>
  <div class="dropdown-menu" id="dropdownMenu">
<button onclick="showTest('test1')">Conjuctiva</button>
<button onclick="showTest('test2')">Cornea</button>
<button onclick="showTest('test3')">Diseases_of_the_lens</button>
<button onclick="showTest('test4')">Glaucoma</button>
<button onclick="showTest('test5')">Lacrimal_Drainage_System</button>
<button onclick="showTest('test6')">Neurophthalmology</button>
<button onclick="showTest('test7')">Ocular_adenexae</button>
<button onclick="showTest('test8')">Ophthalmology_Clinical_Vignettes</button>
<button onclick="showTest('test9')">Ophthalmology_Image_Based_Question</button>
<button onclick="showTest('test10')">Orbit</button>
<button onclick="showTest('test11')">Retina</button>
<button onclick="showTest('test12')">Squint__Optics</button>
<button onclick="showTest('test13')">Uveitis</button>
</div>
  </div>
  
<div id="test1" class="iframe-container" style="display:block;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Conjuctiva&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Conjuctiva&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                28 Questions | 152 Total Marks | 38 min Duration | ~81.43 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Horner Tranta’s spots are seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Viral kerato conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vernal kerato conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vernal kerato conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/764881697895568/764881697895568.m3u8&quot;}, {&quot;text&quot;: &quot;Shield corneal ulcer is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phlyctenular kerato conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vernal kerato conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fungal Ulcer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vernal kerato conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2702041697895584/2702041697895584.m3u8&quot;}, {&quot;text&quot;: &quot;Ropy discharge is the diagnostic finding of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vernal conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Swimming pool conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epidemic kerato conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Phylectenular conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vernal conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65050861697895597/65050861697895597.m3u8&quot;}, {&quot;text&quot;: &quot;Which microorganism most commonly cause haemorrhagic conjunctivitis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Coxsackie A-24&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Papilloma virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Entero virus 70&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Entero virus 70&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43498611697895612/43498611697895612.m3u8&quot;}, {&quot;text&quot;: &quot;Herbert’s pits are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Spring catarrh&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phylectenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trachoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4125471697895624/4125471697895624.m3u8&quot;}, {&quot;text&quot;: &quot;Drug of choice of trachoma is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Penicillin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Azithromycin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tetracycline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chloremphenicol&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Azithromycin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33652561697895635/33652561697895635.m3u8&quot;}, {&quot;text&quot;: &quot;FISTO staging is used for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Spring catarrh&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pterygium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chemical injuries&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trachoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24647961697895647/24647961697895647.m3u8&quot;}, {&quot;text&quot;: &quot;The specific topical remedy suggested for angular conjunctivitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dexamethasone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sulphacetamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Zinc oxide&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Penicillin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Zinc oxide&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44022641697895659/44022641697895659.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of blindness in India&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitamin A deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myopía&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22289381697895670/22289381697895670.m3u8&quot;}, {&quot;text&quot;: &quot;Cobble-stone appearance is a feature of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Viral conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Spring catarrh&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;phylectenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bacterial conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Spring catarrh&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26461911697895684/26461911697895684.m3u8&quot;}, {&quot;text&quot;: &quot;All are features of trachoma except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pannus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Follicle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cicatrisation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Phlycten&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Phlycten&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53739751697895704/53739751697895704.m3u8&quot;}, {&quot;text&quot;: &quot;Follicular conjunctivitis is caused by all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spring catarrh&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adult Inclusion conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cat – scratch fever&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Spring catarrh&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26441901697895721/26441901697895721.m3u8&quot;}, {&quot;text&quot;: &quot;Arlt’s line is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Horizontal scar in lower palpebral conjunctiva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Horizontal scar in upper palpebral conjunctiva&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vertical scar in lower palpebral conjunctiva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vertical scar in upper palpebral conjunctiva&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Horizontal scar in upper palpebral conjunctiva&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78008731697895733/78008731697895733.m3u8&quot;}, {&quot;text&quot;: &quot;Subconjunctival haemorrhage occurs in all the following conditions except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Passive venous congestion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pertussis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trauma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;High IOP&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. High IOP&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12253451697895747/12253451697895747.m3u8&quot;}, {&quot;text&quot;: &quot;Acute hemorrhagic conjunctivitis is caused by all the following conditions except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CMV&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Enterovirus-70&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Coxsackie –A24&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. CMV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64120201697895758/64120201697895758.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about trachoma except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Seen in unhygienic condition&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seen in old age&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;The corneal lesion is pannus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pits are seen in the limbus in late cases.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Seen in old age&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40965651697895771/40965651697895771.m3u8&quot;}, {&quot;text&quot;: &quot;Ophthalmia neonatorum is caused by all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gonococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chlamydia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Enterovirus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Enterovirus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74088401697895789/74088401697895789.m3u8&quot;}, {&quot;text&quot;: &quot;A patient complains of pain in both eyes with congestion, blurring of vision, photophobia and watery discharge.The probable causative organism is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Enterovirus-70&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cox-sackie-24&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Adenovirus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43057551697895802/43057551697895802.m3u8&quot;}, {&quot;text&quot;: &quot;Circumcorneal congestion is not seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Corneal ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acute uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute congestive glaucoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Retinal detachment&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2106131697895817/2106131697895817.m3u8&quot;}, {&quot;text&quot;: &quot;Tear film break–up time is for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lipid layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mucin layer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Aqueous layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Mucin layer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51808401697895831/51808401697895831.m3u8&quot;}, {&quot;text&quot;: &quot;Predominant cell type present in the secretions in vernal conjunctivitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Basophils&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neutrophils&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eosinophils&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lymphocyte&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Eosinophils&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52798821697895889/52798821697895889.m3u8&quot;}, {&quot;text&quot;: &quot;Allergic conjunctivitis include all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spring catarrh&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phylctenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Follicular conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Giant papillary conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Follicular conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17596031697895908/17596031697895908.m3u8&quot;}, {&quot;text&quot;: &quot;Phlyctenular keratoconjunctivitis is which type of hypersensitivity reaction&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;I&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;III&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IV&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. IV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41895691697895925/41895691697895925.m3u8&quot;}, {&quot;text&quot;: &quot;Epidemic keratoconjunctivitis is caused by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;HSV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HIV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chlamydia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Adenovirus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21640241697895936/21640241697895936.m3u8&quot;}, {&quot;text&quot;: &quot;All are causes of night blindness except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oguchi disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitamin A deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;High myopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Devic disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Devic disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76242621697895949/76242621697895949.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is true about pterygium?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Associated with infrared radiation exposure&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Probe can be passed underneath the pterygium at the limbus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;There is elastotic degeneration with Descemet’s membrane distortion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bare sclera technique of treatment has 30-80% recurrence&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Bare sclera technique of treatment has 30-80% recurrence&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51842861697895962/51842861697895962.m3u8&quot;}, {&quot;text&quot;: &quot;Pinguecula is more common&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasally&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Temporally&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superiorly&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferiorly&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Nasally&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58384971697895972/58384971697895972.m3u8&quot;}, {&quot;text&quot;: &quot;Fascicular ulcer is a feature of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vernal keratoconjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phlyctenular keratoconjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ophthalmia neonatorum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Xerophthalmia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Phlyctenular keratoconjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75687581697895985/75687581697895985.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 38 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test2" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Cornea&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Cornea&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                49 Questions | 232 Total Marks | 59 min Duration | ~72.24 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Interstitial keratitis is seen in all of the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;TB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxoplasmosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Toxoplasmosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34361851697950192/34361851697950192.m3u8&quot;}, {&quot;text&quot;: &quot;Satellite lesions of cornea are caused by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bacteria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fungi&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Viruses&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mixed infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Fungi&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49856901697950220/49856901697950220.m3u8&quot;}, {&quot;text&quot;: &quot;Corneal thickness is decreased in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute angle closure glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Band-shaped keratopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fuch’s dystrophy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Keratoconus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27563201697950331/27563201697950331.m3u8&quot;}, {&quot;text&quot;: &quot;Minimal stromal thickness of cornea which should remain after LASIK&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;270 um&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;380 um&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;480 um&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;180 um&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 270 um&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62670001697950349/62670001697950349.m3u8&quot;}, {&quot;text&quot;: &quot;Earliest symptom of corneal ulcer is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Loss of sensation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diminished vision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Photophobia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pain&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Photophobia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64351751697950362/64351751697950362.m3u8&quot;}, {&quot;text&quot;: &quot;Dendritic keratitis is caused by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes virus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Streptococci&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Staphylococci&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpes virus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25578791697950375/25578791697950375.m3u8&quot;}, {&quot;text&quot;: &quot;Neuroparalytic keratitis is caused by paralysis of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trigeminal nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oculao motor nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Facial nerve&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Facial nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37345361697950388/37345361697950388.m3u8&quot;}, {&quot;text&quot;: &quot;The most metabolically active layer of the cornea is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Descemet’s membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Endothelium&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Endothelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39090831697950402/39090831697950402.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is a corneal epithelial dystrophy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Map-Dot-Fingerprint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Macular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Granular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lattice&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Map-Dot-Fingerprint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59784471697950414/59784471697950414.m3u8&quot;}, {&quot;text&quot;: &quot;The organism which can penetrate normal corneal epithelium is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Streptococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gonococcus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pneumococus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Gonococcus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64431931697950429/64431931697950429.m3u8&quot;}, {&quot;text&quot;: &quot;In case of central dense leucoma involving the entire corneal depth, treatment of choice is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lamellar keratoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Penetrating keratoplasty&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tattooing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Enucleation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Penetrating keratoplasty&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19071921697950444/19071921697950444.m3u8&quot;}, {&quot;text&quot;: &quot;In Bullous keratopathy, bullae are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Descemet’s membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epithelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Endothelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bowman’s membrane&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Epithelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13721671697950466/13721671697950466.m3u8&quot;}, {&quot;text&quot;: &quot;EDTA is used in treatment of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Band-shaped keratopathy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lipid keratopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous keratopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exposure keratitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Band-shaped keratopathy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1147371697950487/1147371697950487.m3u8&quot;}, {&quot;text&quot;: &quot;Dense scar of cornea with incarceration of iris is known as:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Leucoma adherens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dense leucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ciliary staphyloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Iris bombe&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Leucoma adherens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9336161697950504/9336161697950504.m3u8&quot;}, {&quot;text&quot;: &quot;Panophthalmitis occurs following:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blunt injury&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Perforated corneal ulcer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Orbital cellulitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Preseptal cellulitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Perforated corneal ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37402111697950520/37402111697950520.m3u8&quot;}, {&quot;text&quot;: &quot;Steroids are contraindicated in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phlyctenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mooren’s ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dendritic ulcer&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Dendritic ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68130421697950538/68130421697950538.m3u8&quot;}, {&quot;text&quot;: &quot;Cogan’s syndrome is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neural deafness with retinitis pigmentosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Interstitial keratitis with deafness&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Interstitial keratitis with glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Neural deafness with glaucoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Interstitial keratitis with deafness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8577521697950550/8577521697950550.m3u8&quot;}, {&quot;text&quot;: &quot;Corneal sensation is diminished in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes simplex keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fungal keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bacterial keratitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpes simplex keratitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74734241697950590/74734241697950590.m3u8&quot;}, {&quot;text&quot;: &quot;Therapeutic keratoplasty is done in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;High myopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior staphyloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Progressive corneal ulcer&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Progressive corneal ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27469891697950605/27469891697950605.m3u8&quot;}, {&quot;text&quot;: &quot;Type of immunological reaction seen in endothelial graft rejection is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Type III&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Type IV&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type I&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Type IV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14959041697950627/14959041697950627.m3u8&quot;}, {&quot;text&quot;: &quot;Herpetic keratitis is treated by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Analgesics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acyclovir&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Acyclovir&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9287541697950853/9287541697950853.m3u8&quot;}, {&quot;text&quot;: &quot;Corneal epithelium is composed of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stratified keratinized epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stratified Non-keratinized squamous epithelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Columnar epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudostratified epithelium&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Stratified Non-keratinized squamous epithelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3652701697950877/3652701697950877.m3u8&quot;}, {&quot;text&quot;: &quot;Fleischer’s ring is characteristic of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Megalocornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diabetes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chalcosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Keratoconus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32079031697950921/32079031697950921.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of early keratoconus is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Soft contact lenses&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rigid gas permeable lenses&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Toric lenses&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratoplasty&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Toric lenses&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24823961697950949/24823961697950949.m3u8&quot;}, {&quot;text&quot;: &quot;All are features of fungal keratitis except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Less symptoms and more signs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Infected hypopyon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Early pannus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dry slough&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Early pannus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66336501697950962/66336501697950962.m3u8&quot;}, {&quot;text&quot;: &quot;Corneal nerves are clearly seen in slit-lamp in all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neurofibromatosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Tuberculosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65770751697950982/65770751697950982.m3u8&quot;}, {&quot;text&quot;: &quot;Refractive index of cornea is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1.33&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1.37&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1.41&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1.43&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 1.37&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40130441697951016/40130441697951016.m3u8&quot;}, {&quot;text&quot;: &quot;Rupture of Descemet’s membrane is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Corneal dystrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Interstitial keratitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Keratoconus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35578731697951040/35578731697951040.m3u8&quot;}, {&quot;text&quot;: &quot;Recurrent corneal erosion is a feature of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratoglobus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Corneal dystrophy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Corneal dystrophy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38047971697951065/38047971697951065.m3u8&quot;}, {&quot;text&quot;: &quot;Hutchinson’s sign is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;acanthamoeba keratits&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;herpes-simplex keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Zoster keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dendritic ulcer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Zoster keratitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40746011697951085/40746011697951085.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not an iron pigmentation of cornea&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Turk’s line&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stocker’s line&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ferry’s line&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hudson–Stahli line&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Turk’s line&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32090101697951102/32090101697951102.m3u8&quot;}, {&quot;text&quot;: &quot;Arcus senilis is due to deposition of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lipid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hyaline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Calcium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lipid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68684941697951119/68684941697951119.m3u8&quot;}, {&quot;text&quot;: &quot;Sclera is thinnest at&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Equator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ora serrata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior to recti insertion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior to recti insertion&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Posterior to recti insertion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54173901697951135/54173901697951135.m3u8&quot;}, {&quot;text&quot;: &quot;Scleromalacia perforans is a complication of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rheumatic arthritis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rheumatic arthritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14977711697951179/14977711697951179.m3u8&quot;}, {&quot;text&quot;: &quot;Ulcus serpens result from infection by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gonococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudomonas pyocyanea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pneumococus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Proteus vulgaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pneumococus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74482921697951195/74482921697951195.m3u8&quot;}, {&quot;text&quot;: &quot;Examination of surface of cornea is done by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pachymetry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Specular microscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gonioscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Corneal topography&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Corneal topography&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2226251697951210/2226251697951210.m3u8&quot;}, {&quot;text&quot;: &quot;Salmon – patch is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Angular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Interstitial keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phlyctenular keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes simplex keratitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Interstitial keratitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20849431697951234/20849431697951234.m3u8&quot;}, {&quot;text&quot;: &quot;Specular microscopy is done for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Measuring depth of anterior chamber&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Measuring angle of anterior chamber&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Examination of corneal endothelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Measuring corneal curvature&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Examination of corneal endothelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50136841697951252/50136841697951252.m3u8&quot;}, {&quot;text&quot;: &quot;Munson’s sign is positive in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Episcleritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Keratoconus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33370981697951276/33370981697951276.m3u8&quot;}, {&quot;text&quot;: &quot;Pannus in trachoma consists of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superficial vascularisation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Deep vascularisation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphocytic infiltration with vascularisation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hyaline infilteration and elastotic degeneration&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lymphocytic infiltration with vascularisation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29368331697951317/29368331697951317.m3u8&quot;}, {&quot;text&quot;: &quot;Commonest organism causing purulent hypopyon ulcer in adults is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pneumococcus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Moraxella&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pneumococcus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70146371697951331/70146371697951331.m3u8&quot;}, {&quot;text&quot;: &quot;In keratoconus ,myopia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Index&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Axial&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Curvatural&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Curvatural&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12562621697951343/12562621697951343.m3u8&quot;}, {&quot;text&quot;: &quot;Percentage of acyclovir eye ointment&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4%&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 3%&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20740951697951357/20740951697951357.m3u8&quot;}, {&quot;text&quot;: &quot;Most common infection after soft contact lens use is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pneumococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acanthamoeba&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aspergillosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pseudomonas&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24220421697951369/24220421697951369.m3u8&quot;}, {&quot;text&quot;: &quot;Corneal dystrophy which is autosomal recessive is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Macular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lattice&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Microcystic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Macular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58877531697951394/58877531697951394.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of Mooren’s ulcer is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Corneal graft&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Immunosuppressive&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topical steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of the above&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. All of the above&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36398331697951409/36398331697951409.m3u8&quot;}, {&quot;text&quot;: &quot;Viral disciform keratitis is which type of hypersensitivity reaction:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type 1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Type 2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Type 3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type 4&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Type 4&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58525421697951424/58525421697951424.m3u8&quot;}, {&quot;text&quot;: &quot;Under hypoxic conditions, which of the following substances is strongly implicated as a cause of corneal edema?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lactate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glycogen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Carbon dioxide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pyruvate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lactate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49295231697951439/49295231697951439.m3u8&quot;}, {&quot;text&quot;: &quot;A recurrent bilateral conjunctivitis occurring with the onset of hot weather in young boys with symptoms of burning, itching, and lacrimation with large flat topped raised areas in the palpebral conjunctiva is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phlyctenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mucopurulent conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vernal keratoconjunctivitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Vernal keratoconjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52299011697951452/52299011697951452.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 59 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test3" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Diseases Of The Lens&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Diseases Of The Lens&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                43 Questions | 192 Total Marks | 53 min Duration | ~73.95 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Riders are commonly seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blue–dot cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Zonular cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Embryonal nuclear cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diffuse nuclear cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Zonular cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19846111697891519/19846111697891519.m3u8&quot;}, {&quot;text&quot;: &quot;Anterior polar cataract develops after :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetes mellitus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Penetrating injury of cornea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Irradiation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chalcosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Penetrating injury of cornea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39455071697891547/39455071697891547.m3u8&quot;}, {&quot;text&quot;: &quot;Typical diabetes cataract has characteristic morphology of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sunflower&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oil droplet&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Snowflake&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;stellate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Snowflake&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70554221697891576/70554221697891576.m3u8&quot;}, {&quot;text&quot;: &quot;Constantly changing refractory error is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Traumatis cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diabetic cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Morgagnian cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Intumescent cataract&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Intumescent cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29141351697891644/29141351697891644.m3u8&quot;}, {&quot;text&quot;: &quot;Anterior Lenticonus is found in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lowes syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Turners syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Downs syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Alports syndrome&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Alports syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45537231697891658/45537231697891658.m3u8&quot;}, {&quot;text&quot;: &quot;Steroid induced cataract is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior subcapsular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior subcapsular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nuclear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cupulliform cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior subcapsular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31355651697891669/31355651697891669.m3u8&quot;}, {&quot;text&quot;: &quot;Polychromatic luster is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Zonular Cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior Subcapsular Cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nuclear Cataract.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior subcapsular cataract.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior Subcapsular Cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75516321697891683/75516321697891683.m3u8&quot;}, {&quot;text&quot;: &quot;Ectopia Lentis is seen in all the following conditions except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital Rubella&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Marchesani’s Syndrome.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Marfan Syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Homocystinuria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Congenital Rubella&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51388181697891697/51388181697891697.m3u8&quot;}, {&quot;text&quot;: &quot;Supero-temporal type of Ectopia lentis is the characteristic sign of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Homocystinuria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ehler-Danlos syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Weill-Marchesani syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Marfan’s syndrome&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Marfan’s syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61444841697891736/61444841697891736.m3u8&quot;}, {&quot;text&quot;: &quot;Most common type of Congenital Cataract is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Capsular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Zonular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Coralliform&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Blue Dot&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Blue Dot&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10010261697891753/10010261697891753.m3u8&quot;}, {&quot;text&quot;: &quot;Lens capsule is thinnest at the:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Centre Anteriorly&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;At Equator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Centre posteriorly&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superiorly&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Centre posteriorly&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66249141697891777/66249141697891777.m3u8&quot;}, {&quot;text&quot;: &quot;Ideal site for intra-ocular lens implantation is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior to pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ciliary sulcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;On Anterior capsule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;On posterior capsule&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. On posterior capsule&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69769581697891789/69769581697891789.m3u8&quot;}, {&quot;text&quot;: &quot;Intra ocular lenses are made up of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PMMA&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HEMA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glass&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plastic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. PMMA&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66241511697891801/66241511697891801.m3u8&quot;}, {&quot;text&quot;: &quot;Most common type of cataract following radiation is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior subcapsular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior subcapsular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tear drop cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diffuse cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Posterior subcapsular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13108251697891826/13108251697891826.m3u8&quot;}, {&quot;text&quot;: &quot;Lens develops from:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mesoderm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neuro-Ectoderm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Endoderm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Surface Ectoderm&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Surface Ectoderm&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71413841697891848/71413841697891848.m3u8&quot;}, {&quot;text&quot;: &quot;A diabetic patient gets cataract because accumulation of sorbitol in lens. The enzyme responsible for this is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glucokinase&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;NADPH Dependent aldose reductase&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phospho fructo isomerase&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hexokinase&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. NADPH Dependent aldose reductase&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2263191697891877/2263191697891877.m3u8&quot;}, {&quot;text&quot;: &quot;Amongst the following accepted current treatment of congenital cataract:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lensectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Needling&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lens aspiration with anterior vitrectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;ECCE&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lens aspiration with anterior vitrectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27492001697891906/27492001697891906.m3u8&quot;}, {&quot;text&quot;: &quot;Expulsive haemorrhage in cataract surgery is due to rupture of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vortex vein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Short posterior ciliary artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Long posterior ciliary artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior ciliary artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Short posterior ciliary artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11154861697891922/11154861697891922.m3u8&quot;}, {&quot;text&quot;: &quot;Cause of Anterior subcapsular cataract&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chloroquine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Amiodarone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Concussion injury&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Corticosteroids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Amiodarone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22409501697891936/22409501697891936.m3u8&quot;}, {&quot;text&quot;: &quot;Berger space is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Between posterior hyaloid face and the retina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Between anterior hyaloid face and the lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Between the anterior hyaloid face and the ora serrata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Between the posterior hyaloid face and the vitreous body&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Between anterior hyaloid face and the lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72426151697891948/72426151697891948.m3u8&quot;}, {&quot;text&quot;: &quot;Cupuliform cataract is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nuclear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anteriour cortical&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior subcapsular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Radial spokes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Posterior subcapsular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73859391697891961/73859391697891961.m3u8&quot;}, {&quot;text&quot;: &quot;the oldest fibres are located in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;embryonic nucleus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fetal nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Infantile nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adult nucleus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. embryonic nucleus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72100851697891975/72100851697891975.m3u8&quot;}, {&quot;text&quot;: &quot;The most common complication of hypermature sclerotic cataract is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dislocation of the lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phacomorphic Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Neovascularisation of retina.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Dislocation of the lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14759821697891993/14759821697891993.m3u8&quot;}, {&quot;text&quot;: &quot;Intraocular lens are made of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PMMA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Silicone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hydrogel&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acrylic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;E&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;E. All&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46786231697892004/46786231697892004.m3u8&quot;}, {&quot;text&quot;: &quot;A 55-year old patient presents with colored halo and on Finchams’ test, there is break-up of halo and rejoining of halos. Diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Open-Angle Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mucopurulent Conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute Angle closure glaucoma.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12538001697892017/12538001697892017.m3u8&quot;}, {&quot;text&quot;: &quot;“Second sight of old age” is generally due to:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Coronary Cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nuclear Sclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterior capsular cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior polar cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Nuclear Sclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/219491697892031/219491697892031.m3u8&quot;}, {&quot;text&quot;: &quot;Vossius ring is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior capsule of lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior capsule of lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cortex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior capsule of lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6697271697892056/6697271697892056.m3u8&quot;}, {&quot;text&quot;: &quot;Most common complication following cataract surgery:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Expulsive choroidal hemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;After-cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Complicated cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. After-cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46377171697892075/46377171697892075.m3u8&quot;}, {&quot;text&quot;: &quot;Oil droplet cataract is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lenticonus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Galactosemia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Down’s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Galactosemia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58628441697892102/58628441697892102.m3u8&quot;}, {&quot;text&quot;: &quot;1mm difference in axial length measurement on biometry would result in change in IOL power by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1.5D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2.5D&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3.5D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4.5D&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 2.5D&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61769461697892116/61769461697892116.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice of expulsive haemorrhage is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate wound closure with vitrectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Immediate wound closure with AC paracentesis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Wait and Watch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Immediate wound closure&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Immediate wound closure&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7987781697892143/7987781697892143.m3u8&quot;}, {&quot;text&quot;: &quot;A person sustained blunt trauma to the eye with immediate dimunition of vision. The anterior chamber is deep. Cause could be:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyphema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dislocation of lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Iridodialysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dislocation of lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60348831697892161/60348831697892161.m3u8&quot;}, {&quot;text&quot;: &quot;Glass Blower’s cataract is generally:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior subcapsular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior subcapsular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterior capsular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior capsular&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior subcapsular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27439101697892240/27439101697892240.m3u8&quot;}, {&quot;text&quot;: &quot;Oil-globule reflex during ophthalmoscopy is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Galactosemia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior lenticonus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Microsherophakia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Anterior lenticonus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76823471697892268/76823471697892268.m3u8&quot;}, {&quot;text&quot;: &quot;All are true regarding lens except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radius of curvature of anterior surface is 10mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Basement membrane of the anterior lens epithelium is the thickest basement membrane of the body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Radius of curvature of posterior surface is 6mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lens capsule is thickest at the posterior pole&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lens capsule is thickest at the posterior pole&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61151921697892285/61151921697892285.m3u8&quot;}, {&quot;text&quot;: &quot;Cataract can be caused by prolonged ingestion of which drug:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phenothiazines&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ethambutol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitamin A&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Phenothiazines&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68359981697892298/68359981697892298.m3u8&quot;}, {&quot;text&quot;: &quot;What is done of congenital cataract involving visual axis :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Wait and watch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Operated when baby reaches appropriate age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Give mydriatics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Immediately operate&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Immediately operate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54084691697892362/54084691697892362.m3u8&quot;}, {&quot;text&quot;: &quot;length of incision in phacoemulsification is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2.75 - 3.2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;3.0-3.5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3.2-3.5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2.5-2.75&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 2.75 - 3.2&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31468671697892376/31468671697892376.m3u8&quot;}, {&quot;text&quot;: &quot;The method of calculating the IOL power :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pachymetry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;SRK formula&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Biometry&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Biometry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77179981697892391/77179981697892391.m3u8&quot;}, {&quot;text&quot;: &quot;Fleischer’s ring is located in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Descemet’s membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Endothelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epithelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bowman’s membrane&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Epithelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27948711697892404/27948711697892404.m3u8&quot;}, {&quot;text&quot;: &quot;Congenital cataract occurs due to abnormalities in protein formation in which of the following genes?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PAX6&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SIX5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CryG&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;PITX3&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. CryG&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27420551697892417/27420551697892417.m3u8&quot;}, {&quot;text&quot;: &quot;Most Commonocular feature of Marfans syndrome is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ectopia lentis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Megalocornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lattice degeneration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Long axial length&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ectopia lentis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69020981697892431/69020981697892431.m3u8&quot;}, {&quot;text&quot;: &quot;Sunflower cataract is characteristically seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chalcosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diabetes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stargardts’ disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Chalcosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15376671697892445/15376671697892445.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 53 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test4" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Glaucoma&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Glaucoma&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                10 Questions | 40 Total Marks | 20 min Duration | ~120.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;The following are true about Dipivefrine except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Prodrug of adrenaline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Decreases hydraulic conductivity of trabecular filtering cells&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lowers intraocular tension by augmentation of uveoscleral outflow&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Reduces aqueous humor formation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Decreases hydraulic conductivity of trabecular filtering cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7923011700118252/7923011700118252.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following anti-glaucoma drug cause bitter taste on topical application in eyes&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Latanosprost&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Betaxolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Apraclonidine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dorzolamide&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Dorzolamide&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7361321700118983/7361321700118983.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following has more retinoprotective effects&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Levobunolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Betaxolol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Betaxolol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54121451700119025/54121451700119025.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following acts by decreasing aqueous humor&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Latanoprost&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dipivefrine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trovaprost&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Betaxolol&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Betaxolol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71274961700119060/71274961700119060.m3u8&quot;}, {&quot;text&quot;: &quot;Growth of eyelashes is caused by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dipivefrine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;physostigmine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bimatoprost&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Bimatoprost&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45559231700119075/45559231700119075.m3u8&quot;}, {&quot;text&quot;: &quot;The property which makes betaxolol different from timolol is that betaxolol&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Is more efficacious in glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Produces less ocular side effects&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Is shorter acting&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Is a B1 selective blocker&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Is a B1 selective blocker&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65891591700119553/65891591700119553.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is the longest acting ocular beta blocker?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Carteolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Metoprolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Betaxolol&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Betaxolol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43736451700120185/43736451700120185.m3u8&quot;}, {&quot;text&quot;: &quot;Agonistic action at which of the following adrenergic receptors results in the reduction of aqueous secretion?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;B1 receptor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;A2 receptor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;B2 receptor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;M2 receptor&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. A2 receptor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41316431700120218/41316431700120218.m3u8&quot;}, {&quot;text&quot;: &quot;All are true regarding side effects of anti-glaucoma drugs except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lid retraction- Apraclonidine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CNS suppression &amp;amp; Apnoea in neonates- Brimonidine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypotrichosis of eye lashes- Latanoprost&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Black pigmentation of conjunctiva- Epinephrine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Hypotrichosis of eye lashes- Latanoprost&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58648221727532672/58648221727532672.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with glaucoma is prescribed a medication that decreases aqueous humor production. Which of the following medications is commonly used for this purpose?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pilocarpine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Brimonidine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Latanoprost&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Timolol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17584311727533069/17584311727533069.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 20 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test5" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Lacrimal Drainage System&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Lacrimal Drainage System&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                14 Questions | 80 Total Marks | 24 min Duration | ~102.86 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Watering from the eyes of an infant occurs in all of the following except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital dacryocystitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Buphthalmos&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Corneal foreign body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Corneal dystrophy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Corneal dystrophy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40831921697893152/40831921697893152.m3u8&quot;}, {&quot;text&quot;: &quot;Mother of 3 months old infant complains of watering from one eye. On pressing the lacrimal sac, there is regurgitation of mucopurulent material. The appropriate treatment is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;DCR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Probing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Probing with syringing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lacrimal sac massage and antibiotics&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lacrimal sac massage and antibiotics&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56588751697893165/56588751697893165.m3u8&quot;}, {&quot;text&quot;: &quot;Most common organism causing chronic dacryocystitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staph aureus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudo pyocyanea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Streptococcus haemolyticus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mycotuberculosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Staph aureus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35570421697893179/35570421697893179.m3u8&quot;}, {&quot;text&quot;: &quot;Most common tumor of lacrimal gland is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenoid cystic carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenocarcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Benign mixed tumor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mucoepidermoid carcinoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Benign mixed tumor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14791061697893220/14791061697893220.m3u8&quot;}, {&quot;text&quot;: &quot;In DCR operation, opening in nose is made in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Middle meatus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior turbinate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Middle meatus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65399851697893355/65399851697893355.m3u8&quot;}, {&quot;text&quot;: &quot;Valve at the entry of the common canaliculus:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Valve of Hasner&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Valve of Rosenmuller&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Valve of Rosenmuller&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61522881697893376/61522881697893376.m3u8&quot;}, {&quot;text&quot;: &quot;Nerve for tear secretion is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Greater superficial petrosal nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Deep petrosal nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Maxillary nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Greater superficial petrosal nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65851651697893446/65851651697893446.m3u8&quot;}, {&quot;text&quot;: &quot;DCR is contraindicated in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mucocoele&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chronic dacryocystitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;NLD obstruction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Malignancy of the lacrimal sac&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Malignancy of the lacrimal sac&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61538951697893496/61538951697893496.m3u8&quot;}, {&quot;text&quot;: &quot;Distance of Angular vein from medial canthus as it passes over medial palpebral ligament is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;10mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;8mm&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;12mm&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 8mm&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41438991697893522/41438991697893522.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is false:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Normal BUT is more than 10 secs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Jones dye test is used for dry eye&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rose Bengal stains dead cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acetycysteine dissolves mucus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Jones dye test is used for dry eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66341451697893702/66341451697893702.m3u8&quot;}, {&quot;text&quot;: &quot;Ideal time for syringing and probing is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2-3 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4-6 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1year&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;5 yrs&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 1year&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42942821697893715/42942821697893715.m3u8&quot;}, {&quot;text&quot;: &quot;The alignment of lower and upper puncta are:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Upper puncta is medial to lower puncta&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lower puncta is medial to upper puncta&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;They superimpose each other&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Upper puncta is medial to lower puncta&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67558561697893732/67558561697893732.m3u8&quot;}, {&quot;text&quot;: &quot;The density of goblet cells are maximum in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal conjunctiva&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Temporal conjunctiva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior conjunctiva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferior conjunctiva&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Nasal conjunctiva&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60588181697893758/60588181697893758.m3u8&quot;}, {&quot;text&quot;: &quot;NLD opens in the inferior meatus&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anteriorly&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posteriorly&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;medially&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laterally&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anteriorly&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40200531697893772/40200531697893772.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 24 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test6" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Neurophthalmology&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Neurophthalmology&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                38 Questions | 188 Total Marks | 48 min Duration | ~75.79 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Field defects seen in pituitary adenomas are:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Homonymous infero-nasal field defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Homonymous supero-temporal field defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Heteronymous infero-nasal field defects&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Heteronymous supero-temporal field defects&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Heteronymous supero-temporal field defects&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25587481697899341/25587481697899341.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is true regarding cortical blindness&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Direct and Consensual reflex absent in both eyes.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Direct and Consensual reflex present in both eyes.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Direct reflex present and Consensual reflex absent on affected side.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Direct reflex present and consensual reflex absent on normal side.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Direct and Consensual reflex present in both eyes.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64120481697899356/64120481697899356.m3u8&quot;}, {&quot;text&quot;: &quot;Bitemporal hemianopia is seen in which condition:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Aneurysm circle of willis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Temporal SOL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal SOL&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Aneurysm circle of willis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73197911697899368/73197911697899368.m3u8&quot;}, {&quot;text&quot;: &quot;The typical field defect in tobacco amblyopia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Para Central&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Centrocaecal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Segmental&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Enlargement of blind spot&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Centrocaecal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16296781697899383/16296781697899383.m3u8&quot;}, {&quot;text&quot;: &quot;Retrobulbar neuritis is characterized by all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Afferent pupillary defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sudden diminution of vision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pain on elevation of eye ball&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Blurred disc margin&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Blurred disc margin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44774721697899395/44774721697899395.m3u8&quot;}, {&quot;text&quot;: &quot;Bilateral Superotemporal quadrantopia is caused by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Parietal lobe tumor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Frontal lobe tumor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Temporal lobe tumor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pituitary tumor&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pituitary tumor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57866141697899422/57866141697899422.m3u8&quot;}, {&quot;text&quot;: &quot;False about Argyll Robertson Pupil is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Accommodation reflex normal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Direct pupillary reflex absent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Indirect pupillary reflex normal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Visual acuity normal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Indirect pupillary reflex normal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30242601697899439/30242601697899439.m3u8&quot;}, {&quot;text&quot;: &quot;Functional defect of optic nerve can be diagnosed by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Direct ophthalmoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Indirect ophthalmoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Perimetry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinoscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Perimetry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11351601697899458/11351601697899458.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about papilledema except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blurring of disc margin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Congestion of retinal veins&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Soft exudates around the disc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sudden loss of vision&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sudden loss of vision&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67940051697899471/67940051697899471.m3u8&quot;}, {&quot;text&quot;: &quot;Right Superotemporal quadrantopsia, left centrocaecal scotoma with headache: site of lesion is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Left optic nerve + chiasma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Left optic tract + chiasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right optic nerve + chiasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Right optic tract + chiasma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Left optic nerve + chiasma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16203791697899488/16203791697899488.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are caused by third palsy except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mydriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial deviation of eyeball&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pupillary reflex lost&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Medial deviation of eyeball&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63447481697899501/63447481697899501.m3u8&quot;}, {&quot;text&quot;: &quot;In unilateral relative afferent pupillary defect, when light is moved from normal to affected eye, there is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dilatation on affected side and constriction on normal side.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dilatation on normal side and constriction on affected side.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dilatation in both pupils&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Constriction in both pupils&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Dilatation in both pupils&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26996481697899517/26996481697899517.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following can cause optic neuropathy except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rifampicin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Digoxin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chloroquine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethambutol&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rifampicin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15852591697899528/15852591697899528.m3u8&quot;}, {&quot;text&quot;: &quot;A 40 yrs. old lady presents with bilateral disc-edema. CT-Scan shows normal ventricles, diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Benign intracranial hypertension&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Malignant hypertension&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Papillitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Raised intraocular pressure&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Benign intracranial hypertension&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75935701697899540/75935701697899540.m3u8&quot;}, {&quot;text&quot;: &quot;Chalky white optic disc on fundus examination is seen in all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Toxic optic neuropathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leber’s hereditary optic neuropathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Post-papilledema optic atrophy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Traumatic injury to the optic nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Post-papilledema optic atrophy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20983201697899552/20983201697899552.m3u8&quot;}, {&quot;text&quot;: &quot;Unilateral proptosis with bilateral VIth nerve palsy, diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grave’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudotumor of orbit&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Cavernous sinus thrombosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76372311697899564/76372311697899564.m3u8&quot;}, {&quot;text&quot;: &quot;First sign of optic nerve disease:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloedema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Color blindness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Afferent pupillary defect&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Efferent pupillary defect&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Afferent pupillary defect&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27397151697899574/27397151697899574.m3u8&quot;}, {&quot;text&quot;: &quot;Wernicke’s hemianopic pupillary response is seen in lesions at :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic tract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Optic chiasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic radiation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral geniculate body&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Optic tract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53284461697899589/53284461697899589.m3u8&quot;}, {&quot;text&quot;: &quot;Left- sided gaze is affected in lesion of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Right frontal lobe&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Right occipital lobe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Left occipital lobe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Left frontal lobe&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Right frontal lobe&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49431301697899600/49431301697899600.m3u8&quot;}, {&quot;text&quot;: &quot;All are true regarding optic neuritis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Decreased visual acuity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Decreased pupillary response&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Abnormal electroretinogram&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Abnormal visual evoked response&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Abnormal electroretinogram&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25381861697899617/25381861697899617.m3u8&quot;}, {&quot;text&quot;: &quot;Vitamin B-12 deficiency is likely to cause:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bitemporal hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Binasal hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Heteronymous hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Centrocaecal scotoma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Centrocaecal scotoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11811011697899637/11811011697899637.m3u8&quot;}, {&quot;text&quot;: &quot;Fundoscopic features of papilledema include all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blurred disc margin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Deep cup&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Absent venous pulsations&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Peripapillary Hemorragas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Deep cup&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68457161697899649/68457161697899649.m3u8&quot;}, {&quot;text&quot;: &quot;Heteronymous hemianopia is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic tract Lesion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LGB Lesion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Occipital lobe lesion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chiasmal lesion&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Chiasmal lesion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://dams-apps-production.s3.ap-south-1.amazonaws.com/course_file_meta/71493641697899665.mp4&quot;}, {&quot;text&quot;: &quot;A 25 yrs old lady suddenly develops unilateral loss of vision decreasing from 6/6 to 4/60 with ill-sustained reaction of the pupil. She complains of pain in eye when looking upwards. The most likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute frontal sinusitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute iritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Brain tumor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retrobular neuritis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Retrobular neuritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4696531697901403/4696531697901403.m3u8&quot;}, {&quot;text&quot;: &quot;Pupillomotor fibres of third cranial nerve travel along with:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nerve to medial rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nerve to superior rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nerve to inferior rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nerve to inferior oblique&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Nerve to inferior oblique&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41054351697899679/41054351697899679.m3u8&quot;}, {&quot;text&quot;: &quot;U/L third nerve palsy with C/L SR palsy and B/L ptosis.Lesion involves:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cavernous sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Peripheral fibres of one nerve and sup erior fibres of C/L nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Multiple sites&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Third nerve nuclear complex&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Third nerve nuclear complex&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40797791697899697/40797791697899697.m3u8&quot;}, {&quot;text&quot;: &quot;Diplopia with limitation of adduction of right eye with abduction saccades of left eye and normal convergence is due to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;duane’s retraction syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;partial 3rd nerve palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;internuclear ophthalmoplegia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;absence of medial rectus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. internuclear ophthalmoplegia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47991121697899711/47991121697899711.m3u8&quot;}, {&quot;text&quot;: &quot;Features of Horner’s syndrome caused by Pancoast tumor are all the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Miosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Excessive sweating&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Loss of ciliospinal reflex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Excessive sweating&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20130021697899724/20130021697899724.m3u8&quot;}, {&quot;text&quot;: &quot;Bielschowsky test is used in which cranial nerve palsy:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;I N&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;II N&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;III N&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IV N&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. IV N&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40425581697899734/40425581697899734.m3u8&quot;}, {&quot;text&quot;: &quot;In oculomotor palsy, involved artery is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior communicating artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle cerebellar artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior cerebellar artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior communicating artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Posterior communicating artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76867441697899747/76867441697899747.m3u8&quot;}, {&quot;text&quot;: &quot;Pupillary reflex is retained in lesion of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oculomotor nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ciliary ganglion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral geniculate body&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lateral geniculate body&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69997041697899761/69997041697899761.m3u8&quot;}, {&quot;text&quot;: &quot;Adverse effect in eye in oral contraceptives is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudotumour cerebri&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ring scotoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic neuritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nystagmus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pseudotumour cerebri&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41712071697899776/41712071697899776.m3u8&quot;}, {&quot;text&quot;: &quot;True about blind spot is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It is an absolute scotoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It is a negative scotoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;It is a relative scotoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Both A and B&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Both A and B&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32889231697899801/32889231697899801.m3u8&quot;}, {&quot;text&quot;: &quot;Painless loss of vision is seen in all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloedema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Papillitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Angle closure glaucoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Angle closure glaucoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16011661697899840/16011661697899840.m3u8&quot;}, {&quot;text&quot;: &quot;Methyl alcohol cause blindness by acting on :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ganglion cells&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nerve fibres&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rods and cones&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rods only&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ganglion cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44276111697899852/44276111697899852.m3u8&quot;}, {&quot;text&quot;: &quot;Most common ocular feature of NF2&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Juvenile PSC&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epiretinal membranes due to juvenile muller cells.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gliomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lisch nodules&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Juvenile PSC&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66269311697899864/66269311697899864.m3u8&quot;}, {&quot;text&quot;: &quot;Leber’s optic neuropathy has the following features except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It commonly affects healthy males&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It causes bilateral painless, progressive and permanent visual loss&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pupillary reflexes are affected early in the disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Typical visual field defects are centrocaecal which eventually become absolute&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pupillary reflexes are affected early in the disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24140861697899876/24140861697899876.m3u8&quot;}, {&quot;text&quot;: &quot;Horizontal gaze centre of eye is located in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pons&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Midbrain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypothalamus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cerebellum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pons&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 48 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test7" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Ocular Adenexae&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Ocular Adenexae&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                21 Questions | 116 Total Marks | 31 min Duration | ~88.57 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Ulcerative blepharitis leads to the following complications except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Madarosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tylosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Poliosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Poliosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60314331697952831/60314331697952831.m3u8&quot;}, {&quot;text&quot;: &quot;Stye is inflammation of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gland of Zeis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gland of moll&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Meibomian gland&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lacrimal gland Krause&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Gland of Zeis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50351351697952856/50351351697952856.m3u8&quot;}, {&quot;text&quot;: &quot;Lid lag on the ptotic side on down-gaze is characteristic of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital ptosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Traumatic ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myogenic ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Synkinetic ptosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Congenital ptosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61583261697952868/61583261697952868.m3u8&quot;}, {&quot;text&quot;: &quot;Bilateral ptosis is not seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Marfan’s syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Myasthenia gravis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myotonic dystrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Kearns-Sayre syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Marfan’s syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76133521697952882/76133521697952882.m3u8&quot;}, {&quot;text&quot;: &quot;Ptosis with weakness of orbicularis oculi is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Polymyositis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Myasthenia gravis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eaton-lambert syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Thyrotoxicosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Myasthenia gravis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66341631697952895/66341631697952895.m3u8&quot;}, {&quot;text&quot;: &quot;Madarosis is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;T.B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;DM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Waardenberg’s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24437421697952907/24437421697952907.m3u8&quot;}, {&quot;text&quot;: &quot;Average height of palpebral fissure is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;8mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;9mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;10mm&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;11mm&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 10mm&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37709721697952933/37709721697952933.m3u8&quot;}, {&quot;text&quot;: &quot;Chalazion is a chronic inflammatory granuloma of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Meibomian gland&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Zeis’ gland&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sweat gland&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wolfring’s gland&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Meibomian gland&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66922211697952954/66922211697952954.m3u8&quot;}, {&quot;text&quot;: &quot;pseudoptosis can be seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Third nerve palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;fourth nerve palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contralateral Lid retraction&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seventh nerve palsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Contralateral Lid retraction&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31564511697952975/31564511697952975.m3u8&quot;}, {&quot;text&quot;: &quot;Surgery done in Marcus Gunn ptosis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fasanella Servat&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Levator Resection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Levator disinsertion with Frontalis sling&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wheelers operation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Levator disinsertion with Frontalis sling&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12945741697952989/12945741697952989.m3u8&quot;}, {&quot;text&quot;: &quot;Commonest cause of cicatrical entropion in India is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;TB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Burns&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trauma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trachoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66799121697953002/66799121697953002.m3u8&quot;}, {&quot;text&quot;: &quot;Fasanella Servat procedure is done for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Severe ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mild ptosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Involutional Ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Jaw-Winking phenomenon&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Mild ptosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48710671697953014/48710671697953014.m3u8&quot;}, {&quot;text&quot;: &quot;Blepharophimosis is generally associated with all of the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ectropion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Distichiasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epicanthus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Telecanthus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Distichiasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18836311697953028/18836311697953028.m3u8&quot;}, {&quot;text&quot;: &quot;Ankyloblepharon is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adhesion of globe to the lid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adhesion of both the lids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Adhesion of the lids to the fornix&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adhesion of lid to globe not involving the fornix&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Adhesion of both the lids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22327271697953044/22327271697953044.m3u8&quot;}, {&quot;text&quot;: &quot;Ptosis in Horner&#x27;s syndrome is due to paralysis of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Riolan&#x27;s muscle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Horner&#x27;s muscle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Muller&#x27;s muscle&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Orbicularis oculi muscle&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Muller&#x27;s muscle&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24397521697953060/24397521697953060.m3u8&quot;}, {&quot;text&quot;: &quot;Hypertrophy of lid edge is called:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lagophthalmos&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tylosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ectropion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Entropion&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tylosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38291711697953073/38291711697953073.m3u8&quot;}, {&quot;text&quot;: &quot;Which type of retinoblastoma causes retinal detachment;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glioma exophytum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glioma endophytum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glioma planum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Glioma exophytum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64371341697953088/64371341697953088.m3u8&quot;}, {&quot;text&quot;: &quot;Most common type of Ptosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aponeurotic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neurogenic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myogenic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mechanical&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Aponeurotic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/804521697953128/804521697953128.m3u8&quot;}, {&quot;text&quot;: &quot;Lipogranulomatous inflammation is seen in –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fungal infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chalazion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Viral infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Chalazion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32297611697953139/32297611697953139.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of BCC in the lid&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lower lid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Upper lid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial canthus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral canthus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lower lid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1437081697953151/1437081697953151.m3u8&quot;}, {&quot;text&quot;: &quot;Stye is staphylococcal infection of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hair follicle&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gland of Zeis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gland of Moll&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lid margin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hair follicle&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73763701697953164/73763701697953164.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 31 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test8" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Ophthalmology Clinical Vignettes&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Ophthalmology Clinical Vignettes&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                84 Questions | 444 Total Marks | 94 min Duration | ~67.14 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;In preoperative keratometry of a patient , the diopteric power and radii of curvature of vertical and horizontal meridians were 45D and 41D and 6.25m and 7.00mm respectively. Following is true inference :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;With the rule astigmatism &amp;amp; vertical meridian steeper.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Against the rule astigmatism, vertical meridian steeper&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Against the rule astigmatism, horizontal meridian steeper.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;With the rule astigmatism &amp;amp; horizontal meridian steeper&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. With the rule astigmatism &amp; vertical meridian steeper.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36691181701945675/36691181701945675.m3u8&quot;}, {&quot;text&quot;: &quot;A 22 years female presented with complain of severe headache, eye fatigueness, and occasional diplopia. A refraction under cyclopentolate 1% was done, and she has reading of +3.0DS (RE) and +4.25DS (LE). In cover uncover test, LE drifts out on covering and refixate as removing the cover. Patient is suffering from -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Esotropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Exotropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Esophoria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exophoria&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Exophoria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20259501701945829/20259501701945829.m3u8&quot;}, {&quot;text&quot;: &quot;20 years male complained of slight blurring of vision of gradual onset. His visual acuity was 6/18 (BE) on Snellens. On retinoscopic examination his readings are +6.0 and +4.0 for vertical and horizontal meridians respectively (same for both eyes). His type of refractive error is -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypermetropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Simple hypermetropic astigmatism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mixed astigmatism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Compound hypermetropic astigmatism&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Compound hypermetropic astigmatism&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25161251701945848/25161251701945848.m3u8&quot;}, {&quot;text&quot;: &quot;Hajari Lal, 68 Year male was operated for cataract surgery by phacoemulcification with PC-IOL implantation. After two days he developed shallow anterior chamber with IOP of 38 mm Hg. Gonioscopic examination show 360 degree of closed anterior chamber angle. Multiple peripheral iridectomies tried could not relieve the attack, diagnosis is-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phacogenic glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pupillary block glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Choroidal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Malignant glaucoma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Malignant glaucoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38404831701946131/38404831701946131.m3u8&quot;}, {&quot;text&quot;: &quot;In a 45-year-old man, constantly changing refractive error is seen usually in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Uncontrolled diabetic state&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Traumatic cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Corneal opacity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Central serous retinopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Uncontrolled diabetic state&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18498961701946147/18498961701946147.m3u8&quot;}, {&quot;text&quot;: &quot;A child presented with difficulty in seeing the blackboard in school. His teachers say that he frequently squeezes his eyes. Most probable cause is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypermetropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Myopia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presbyopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Astigmatism&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Myopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4983741701946165/4983741701946165.m3u8&quot;}, {&quot;text&quot;: &quot;Raju, 8 year old boy suffered penetrating trauma to his LE. On examination VA in this eye is finger counting close to face. Considering the risk of sympathetic opthalmia the best management line is -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Enucleation of the injured eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Evisceration of the injured eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Large doses of oral corticosteroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Attempt to save the injured eye&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Attempt to save the injured eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47650581701946186/47650581701946186.m3u8&quot;}, {&quot;text&quot;: &quot;A child has got a congenital cataract involving the visual axis which was detected by the parents right at birth. This child should be operated:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediately&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;At 2 months of age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;At 1 year of age when the globe becomes normal sized&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;After 4 years when entire ocular and orbital growth becomes normal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Immediately&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13848701701946202/13848701701946202.m3u8&quot;}, {&quot;text&quot;: &quot;A 25-year-old woman presents with a hyperemic and swollen left optic disc. The swinging flash light test is positive. Most likely diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Argyll Robertson pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adie tonic pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Marcus Gunn pupil&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anisocoria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Marcus Gunn pupil&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70168501701946218/70168501701946218.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with decreased visual acuity as determined by a Snellen chart should have which of the following tests done to rule out a refraction error?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Slit-lamp examination&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pinhole test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudochromatic plate test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Schiotz tonometry&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pinhole test&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51075981701946234/51075981701946234.m3u8&quot;}, {&quot;text&quot;: &quot;A 14-year-old boy presents trauma on the face by a soccer ball. He complains of left eye pain, and on physical examination you see blood in the anterior chamber. Pupils are equal and reactive to light and extraocular muscles are intact. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyphema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Esotropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Amblyopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subconjunctival hemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hyphema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29707871701946255/29707871701946255.m3u8&quot;}, {&quot;text&quot;: &quot;A 17-year-old student complains of bilateral red eyes with a watery discharge. Physical examination reveals some preauricular lymphadenopathy.Most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenoviral conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bacterial conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Blepharitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hordeolum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Adenoviral conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5309061701946282/5309061701946282.m3u8&quot;}, {&quot;text&quot;: &quot;A 22-year-old man with a history of hilar adenopathy and lung disease presents with eye pain and photophobia. Eye exam reveals an irregular pupil and ciliary flush. Most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Uveitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Allergic conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adenoviral conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Uveitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68085231701946299/68085231701946299.m3u8&quot;}, {&quot;text&quot;: &quot;Which virus has been implicated in causing the lesion shown?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Molluscum contagiosum virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HSV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epstein-Barr virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Human papilloma virus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Human papilloma virus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(15).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19511301701946636/19511301701946636.m3u8&quot;}, {&quot;text&quot;: &quot;A 65 year old patient is taken for cataract surgery. After 3 weeks, he developed endophthalmitis. The most common source of organisms leading to post-operative endophthalmitis after cataract surgery is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The patient&#x27;s lids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;The operating room air&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contaminated instruments and solutions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The surgeon&#x27;s skin and respiratory tract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. The patient&#x27;s lids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52319671701946658/52319671701946658.m3u8&quot;}, {&quot;text&quot;: &quot;A patient who has a history of epilepsy and is on medication, complains of sudden painful loss of vision. On examination: corneal edema, shallow anterior chamber. IOP is 50 mm Hg. What is the cause?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chlorpromazine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sodium valproate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topiramate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vigabatrin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Topiramate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35267721701946672/35267721701946672.m3u8&quot;}, {&quot;text&quot;: &quot;A 14-year-old boy is accidentally shot in his right eye while playing with a ball-bearing gun. There is iris and vitreous prolapse through the temporal limbus. Which single investigation is MOST useful?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ocular B-scan&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Skull X-ray&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;MRI head and orbits&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CT head and orbits&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. CT head and orbits&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54083981701946687/54083981701946687.m3u8&quot;}, {&quot;text&quot;: &quot;A 28-year-old has progressive dementia, jaundice and akinetic rigidity in his upper limbs. What is the most likely slit-lamp examination finding in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oil droplet cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stellate posterior subcapsular cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Kayser-Fleischer rings&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cerulean cataract&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Kayser-Fleischer rings&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34589781701946703/34589781701946703.m3u8&quot;}, {&quot;text&quot;: &quot;A 35 year old patient has a homonymous visual field defect respecting the midline and complains of experiencing formed visual hallucinations. These features are MOST in keeping with a lesion of the:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal lobe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Temporal lobe&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parietal lobe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Occipital lobe&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Temporal lobe&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22664501701946735/22664501701946735.m3u8&quot;}, {&quot;text&quot;: &quot;A 40-year-old patient with mitral regurgitation presents to clinic. You notice bilateral lens subluxations and a high-arched palate. Which is TRUE?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Accommodation is usually intact&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inheritance is AR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;There may be associated mental retardation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lens subluxation is typically downwards&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Accommodation is usually intact&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6009441701946755/6009441701946755.m3u8&quot;}, {&quot;text&quot;: &quot;A patient aged 23 years visits emergency with a traumatic laceration of sclera. He is taken into OT and the laceration is sutured. The patient develops endophthalmitis soon after surgery. The organism with the poorest prognosis in post-traumatic endophthalmitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Streptococcus pneumoniae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acanthamoeba&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Aspergillus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bacillus cereus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Bacillus cereus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58009551701946773/58009551701946773.m3u8&quot;}, {&quot;text&quot;: &quot;A 60-year-old Afro-Caribbean patient complains of a whitish area on her left eye for several weeks. Her eye has been slightly uncomfortable but with no discharge. On examination, there is peripheral corneal stromal thinning temporally with fluorescein pooling and slight corneal neovascularisation. Which blood test is LEAST helpful in investigating the underlying diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Purified protein derivative skin test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rheumatoid factor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;HIV antibodies&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anti-neutrophil cytoplasmic antibody&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. HIV antibodies&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(14).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17161991701946796/17161991701946796.m3u8&quot;}, {&quot;text&quot;: &quot;A 70 year-old man comes to the emergency department for sudden loss of vision in the right eye over the last 24 hours. He has noticed progressive bilateral loss of central vision over the last year. He has had difficulty reading his newspaper and watching his television. He has smoked 1 pack daily for 50 years. Ophthalmologic examination shows visual acuity of 20/60 in the left eye and 20/200 in the right eye. The pupils are equal and reactive to light. Tonometry reveals an intraocular pressure of 18 mm Hg in the right eye and 20 mm Hg in the left eye. Anterior segment examination is unremarkable. Slit-lamp examination shows subretinal fluid and small hemorrhage with grayish-green discoloration in the macular area in the right eye, and multiple drusen in the left eye with retinal pigment epithelial changes. Which of the following is the most appropriate initial treatment for the patient&#x27;s illness?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Entanercept&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thermal laser photocoagulation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ranibizumab&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Macular translocation surgery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ranibizumab&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46611951701946832/46611951701946832.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following clinical features present in orbital apex syndrome would best help to distinguish it from a cavernous sinus syndrome:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Proptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ophthalmoplegia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Episcleral congestion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;RAPD&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. RAPD&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37553891701946851/37553891701946851.m3u8&quot;}, {&quot;text&quot;: &quot;One week after being involved in a bicycling accident, a 32-year-old woman comes to the physician because of intermittent double vision. She reports worsening of symptoms when she tries to type on her computer or while buttoning her shirts. Physical examination shows a slight right-sided head tilt. Her left eye is deviated laterally and upwards, which becomes even more prominent when she attempts left eye adduction. This patient&#x27;s symptoms are most likely due to impaired innervation to which of the following muscles?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Auperior oblique&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior oblique&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sup rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferior rectus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Auperior oblique&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58763761701946879/58763761701946879.m3u8&quot;}, {&quot;text&quot;: &quot;A 65 year old diabetic male recently got his left upper tooth removed. He visits in eye emg with the left orbital swelling that is constantly increasing in size from past 3 days and has now lead to diminution of vision. His extraocular moments are restricted. Pupil is mid dilated and fixed. Left eye DLR &amp;amp; CLR absent Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Preseptal cellulitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Orbital cellulitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fungal sinusitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Orbital cellulitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(13).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77916491701946898/77916491701946898.m3u8&quot;}, {&quot;text&quot;: &quot;A 59-year-old man comes to the physician because of a 6-month history of progressive blurry vision in both eyes. His vision has not improved with the use of reading glasses. His blood pressure is 155/98 mm Hg. Physical examination shows his visual acuity to be 20/80 in the right eye and 20/60 in the left eye. A photograph of the fundoscopic examination of the right eye is shown. Which of the following is the most likely cause of this patient&#x27;s symptoms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dry ARMD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;idiopathic intracranial hypertension&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Diabetic retinopathy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(11).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13441871701946958/13441871701946958.m3u8&quot;}, {&quot;text&quot;: &quot;A 4-year-old boy is brought to the physician by his mother because of left-sided neck swelling that has slowly progressed over the past 4 weeks. He has no history of serious illness. Temperature is 38°C (100.4°F). Physical examination shows a non-tender, mobile mass in the left submandibular region with overlying erythema. A biopsy of the mass shows caseating granulomas. Pharmacotherapy with azithromycin and ethambutol is initiated. This patient is most likely to experience which of the following adverse effects related to ethambutol use?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Colour blindness&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Peripheral neuropathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Colour blindness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73355561701947076/73355561701947076.m3u8&quot;}, {&quot;text&quot;: &quot;A 39-year-old woman is brought to the emergency department 30 minutes after her husband found her unconscious on the living room floor. She does not report having experienced light-headedness, nausea, sweating, or visual disturbance before losing consciousness. Three weeks ago, she was diagnosed with open-angle glaucoma and began treatment with an antiglaucoma drug in the form of eye drops. She last used the eye drops 1 hour ago. Examination shows pupils of normal size that are reactive to light. An ECG shows sinus bradycardia. This patient is most likely undergoing treatment with which of the following drugs?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Latanoprost&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Apraclonitine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dorzolamide&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Timolol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15690081701947096/15690081701947096.m3u8&quot;}, {&quot;text&quot;: &quot;A 45-year-old man comes to the physician because of a 1-day history of progressive pain and blurry vision of his right eye. He has difficulties opening the eye because of pain. His left eye is asymptomatic. He wears contact lenses. He has bronchial asthma treated with inhaled salbutamol. He works as a kindergarten teacher. His temperature is 37°C (98.6°F), pulse is 85/min, and blood pressure is 135/75 mm Hg. Examination shows a visual acuity in the left eye of 20/25 and the ability to count fingers at 3 feet in the right eye. A photograph of the right eye is shown. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudomonas Keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcus Keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Angle Closure Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vernal Keratoconjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pseudomonas Keratitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(8).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57405121701947113/57405121701947113.m3u8&quot;}, {&quot;text&quot;: &quot;A patient has been referred from Medicine ward for Ophthalmology opinion. The patient is a suspected case of meningitis and Just had a few seizures. The patient is on antiretroviral therapy. The Saliva is dribbling from one side of the mouth and when asked to Puff his cheeks, the patient is not able to do it. On microscopic examination, the image of the organism is as shown below. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Toxoplasma gondi meningitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neurosyphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Horner’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;3rd CN Palsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Neurosyphilis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(107).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1011341701947145/1011341701947145.m3u8&quot;}, {&quot;text&quot;: &quot;A 5-year-old girl is brought to the physician because of watery discharge from her right eye for 2 weeks. She and her parents, who are refugees from Sudan, arrived in India a month ago. Her immunization status is not known. She is at the 25th percentile for weight and the 50th percentile for height. Her temperature is 37.2°C (99°F), pulse is 90/min, and respirations are 18/min. Examination of the right eye shows matting of the eyelashes. Everting the right eyelid shows hyperemia, follicles, and papillae on the upper tarsal conjunctiva. Slit-lamp examination of the right eye shows follicles in the limbic region and the bulbar conjunctiva. There is corneal haziness with neovascularization at the 12 o&#x27;clock position. Examination of the left eye is unremarkable. Direct opthalmoscopy of both eyes shows no abnormalities. Right pre-auricular lymphadenopathy is present. Which of the following is the most likely diagnosis in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phlyctenular conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenoviral conjunctivitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma conjunctivitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vernal conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Trachoma conjunctivitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13864291701947167/13864291701947167.m3u8&quot;}, {&quot;text&quot;: &quot;A 69-year-old man undergoes modified radical neck dissection for an oropharyngeal tumor. During the procedure, he requires multiple blood transfusions. Four hours after the surgery, examination shows that the right and left pupils do not constrict when a light is shone into the left eye. When light is shone into the right eye, both pupils constrict. Fundoscopic examination shows no abnormalities. Which of the following is the most likely location of the lesion?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pretectal nuclei&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Edinger westphal nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior cervical ganglion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Optic nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78885001701947182/78885001701947182.m3u8&quot;}, {&quot;text&quot;: &quot;A 6-year-old girl is brought to the physician because of a 4-day history of irritation and redness in both eyes. Her symptoms initially started in the left eye and progressed to involve both eyes within 24 hours. She presents with profuse tearing and reports that her eyes are sticky and difficult to open in the morning. She was diagnosed with asthma 2 years ago and has been admitted to the hospital for acute exacerbations 3 times since then. Current medications include inhaled beclomethasone, inhaled albuterol, and montelukast. Her temperature is 38.2 °C (100.8°F). Physical examination reveals a tender left preauricular lymph node. There is chemosis and diffuse erythema of the bulbar conjunctiva bilaterally. Slit lamp examination reveals a follicular reaction in both palpebral conjunctivae and diffuse, fine epithelial keratitis of both corneas. Corneal sensation is normal. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supportive therapy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oral acyclovir&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topical prednisolone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Topical natamycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Supportive therapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28062711701947199/28062711701947199.m3u8&quot;}, {&quot;text&quot;: &quot;A patient aged 40 years with having complaints of jaundice, Indigestion was admitted in the tertiary care hospital. The patient Complained of slow painless loss of vision after which the Medicine resident sent the patient in EYE OPD for further Examination. The visual acuity of the patient is 6/60 with pinhole no improvement. Cornea is clear in the centre, peripheral Opacity 360 degree is there. AC is formed, clear. Pupil NS, NR. Lens: (Image shown). Fundus clear Which part of cornea is involved in the disease?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ant epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bowman’s membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cornea stroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Descemet’s membrane&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Descemet’s membrane&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(5).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66079241701947223/66079241701947223.m3u8&quot;}, {&quot;text&quot;: &quot;A 44-year-old woman comes to the physician because of pain and swelling below her left eye for 3 days. She has also had excessive watering from her eyes during this period. She has no history of serious illness and takes no medications. Her temperature is 37°C (98.6°F), pulse is 90/min, and blood pressure is 110/70 mm Hg. Examination shows erythema, tenderness, warmth, and swelling below the medial canthus of the left eye. There is purulent discharge from the lower lacrimal punctum on palpation of the swelling. The remainder of the examination shows no abnormalities. The discharge is sent for cultures. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasolacrimal duct probing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oral amoxy-clav&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lacrimal sac massage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dacryocystorhinostomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Oral amoxy-clav&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(2).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32901511701947238/32901511701947238.m3u8&quot;}, {&quot;text&quot;: &quot;A 73-year-old woman is brought to the physician by her son because of a 2-month history of diarrhea and recurrent upper respiratory tract infections. Her son says that she frequently trips over the night when she gets up to go to the bathroom at night. She is 173 cm (5 ft 8 in) tall and weighs 54 kg (120 lb); BMI is 18 kg/m2. Physical examination shows dry skin, multiple bruises on the shins, and triangular keratin plaques on the temporal half of the conjunctiva. A deficiency of which of the following is the most likely underlying cause of these findings?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;vitamin C&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pantothenic acid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Zinc&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Retinol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17531971701947252/17531971701947252.m3u8&quot;}, {&quot;text&quot;: &quot;A 36-year-old woman with HIV comes to the physician because of a 3-day history of pain and watery discharge in her left eye. She also has blurry vision and noticed that she is more sensitive to light. Her right eye is asymptomatic. She had an episode of shingles 7 years ago. She was diagnosed with HIV 5 years ago. She admits that she takes her medication inconsistently. She wears contact lenses. Current medications include abacavir, lamivudine, efavirenz, and a nutritional supplement. Her temperature is 37°C (98.6°F), pulse is 89/min, and blood pressure is 110/70 mm Hg. Examination shows conjunctival injection of the left eye. Visual acuity is 20/20 in the right eye and 20/80 in the left eye. Extraocular movements are normal. Her CD4+ T-lymphocyte count is 90/mm3. A photograph of the left eye after fluorescein administration is shown. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudomonas Keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes simplex keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes zoster keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acanthamebal keratitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Herpes simplex keratitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202020-11-10%20at%201_59_52%20PM.jpeg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37216241701947271/37216241701947271.m3u8&quot;}, {&quot;text&quot;: &quot;A 59-year-old woman comes to the emergency department 25 minutes after the onset of severe left periorbital pain and blurred vision in the same eye. The pain began soon after she entered a theater to watch a movie. She has a headache and vomited twice on the way to the hospital. Two weeks ago, she had acute sinusitis that resolved spontaneously. She has atrial fibrillation and hypertension. Current medications include metoprolol and warfarin. Her temperature is 37.1°C (98.8°F), pulse is 101/min, and blood pressure is 140/80 mm Hg. Visual acuity is counting fingers at 3 feet in the left eye and 20/20 in the right eye. The left eye shows conjunctival injection and edematous cornea. The left pupil is mid-dilated and irregular; it is not reactive to light. Extraocular movements are normal. Fundoscopic examination is inconclusive because of severe corneal edema. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute iridocyclitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Angle closure glaucoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retrobulbar neuritis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Angle closure glaucoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40292711701947286/40292711701947286.m3u8&quot;}, {&quot;text&quot;: &quot;A 34-year-old man with AIDS comes to the physician because of a 2-day history of decreasing vision and seeing black spots in his right eye. He has no pain and the left eye is asymptomatic. He was treated for fungal esophagitis 6 months ago with fluconazole. He was diagnosed with Kaposi&#x27;s sarcoma 2 years ago. Current medications include efavirenz, tenofovir, emtricitabine, azithromycin, trimethoprim-sulfamethoxazole, multivitamins, and a nutritional supplement. He is 170 cm (5 ft 7 in) tall and weighs 45 kg (99 lbs);BMI is 15.6 kg/m2. His temperature is 37°C (98.6°F), pulse is 89/min, and blood pressure is 110/70 mm Hg. Examination shows cervical lymphadenopathy. There are multiple violaceous plaques seen over his trunk and extremities. Fundoscopic examination shows granular yellow-white opacities around the retinal vessels and multiple areas of dot-blot hemorrhages. His CD4+ T-lymphocyte count is 36/mm3. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CMV retinitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HS keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;HIV Retinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxoplasma retinitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. CMV retinitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63085371701947323/63085371701947323.m3u8&quot;}, {&quot;text&quot;: &quot;An 81-year-old man comes to the emergency department because of left-sided visual loss that started 1 hour ago. He describes initially seeing jagged edges, which was followed by abrupt, complete loss of central vision in the left eye. He has hypertension and type 2 diabetes mellitus. Blood pressure is 145/89 mm Hg. Neurologic examination shows no abnormalities. A photograph of the fundoscopic findings is shown. Which of the following tests is most likely to confirm this patient&#x27;s underlying condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;ESR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Carotid artery Duplex USG&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CD 4+ T cell count&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tonometry&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Carotid artery Duplex USG&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(2).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69195611701947339/69195611701947339.m3u8&quot;}, {&quot;text&quot;: &quot;A 30-year-old woman comes to the physician for the evaluation of a 2-day history of intermittent dizziness and double vision. She reports double vision whenever she looks to the left. Last summer, she had an episode of weakness in her left leg that resolved spontaneously. Ophthalmologic examination shows weak adduction of the right eye on left lateral gaze. Attempted left lateral gaze results in horizontal nystagmus of the left eye. Convergence testing is normal. This patient most likely has a lesion in which of the areas of the of the midbrain?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Right superior colliculus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Left superior colliculus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right Medial longitudinal fasciculus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Left Medial longitudinal Fasciculus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Right Medial longitudinal fasciculus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(1).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28590911701947363/28590911701947363.m3u8&quot;}, {&quot;text&quot;: &quot;A 4-month-old boy is brought to the physician for a well-child examination. He was born at 36 weeks&#x27; gestation. The mother has had no prenatal care. His 6-year-old sister has a history of osteosarcoma. He is exclusively breast fed. He is at the 60th percentile for height and weight. Vital signs are within normal limits. Examination shows inward deviation of the right eye. Indirect ophthalmoscopy shows a white reflex in the right eye and a red reflex in the left eye. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Occlusion therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fundus exam&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CT scan eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;MRI brain &amp;amp; optic nerve.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Fundus exam&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25444751701947384/25444751701947384.m3u8&quot;}, {&quot;text&quot;: &quot;An 8-year-old boy is brought to the physician by his parents for blurry vision for the past 2 months. He is at the 97th percentile for height and 25th percentile for weight. Physical examination shows joint hypermobility, a high-arched palate, and abnormally long, slender fingers and toes. Slit lamp examination shows superotemporal lens subluxation bilaterally. This patient&#x27;s findings are most likely caused by a defect in which of the following structural proteins?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fibrillin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laminin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;keratin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type 1 collagen&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fibrillin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13175841701947399/13175841701947399.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is correct with regard to the invstigation: (more than one correct)&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stereopsis present&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Image is real inverted&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Magnification is 15 times&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Useful to examine periphery of retina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;Unknown&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42598791701947422/42598791701947422.m3u8&quot;}, {&quot;text&quot;: &quot;A 32-year-old man comes to the emergency department for acute pain in the left eye. He reports having awoken in the morning with a foreign body sensation. He had forgotten to remove his contact lenses before sleeping. Following lens removal, he experienced immediate pain, discomfort, and tearing of the left eye. He reports that the foreign body sensation persists and that rinsing with water has not improved the pain. He has been wearing contact lenses for 4 years and occasionally forgets to remove them at night. He has no history of serious medical illness. On examination, the patient appears distressed with pain and photophobia in the left eye. Administration of a topical anesthetic relieves the pain. Visual acuity is 6/6 in both eyes. Ocular motility and pupillary response are normal. The corneal reflex is normal and symmetric in both eyes. Which of the following is most likely to establish the diagnosis in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gonioscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Usg b scan eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Culture of discharge&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fluorescein examination&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Fluorescein examination&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21192861701947442/21192861701947442.m3u8&quot;}, {&quot;text&quot;: &quot;A 40 year old diabetic and hypertensive male, who is a Medical Rep. by occupation visits eye OPD with complaints of sudden painless loss of vision. The patient was apparently alright 4 days back when suddenly he started to feel blurring of vision. The patient also expressed that due to sudden Corona Lockdown, His monthly target in the month of march was not achieved and is very stressed about it. On examination: Cornea clear, AC deep, pupil 2-3 mm in diameter, Lens slight haze, Vitreous clear, Fundus: Disc margin defined, C:D ratio 0.5, A:V 2:3, Foveal reflex dull. The patient was made to perform the test as given in the image What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhegmatogenous Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CSR&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinitis pigmentosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. CSR&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63452701701947484/63452701701947484.m3u8&quot;}, {&quot;text&quot;: &quot;A 60-year-old man comes to the physician because his wife has noticed that his left eye looks smaller than his right. He has had worsening left shoulder and arm pain for 3 months. He has smoked two packs of cigarettes daily for 35 years. Examination shows left-sided ptosis. The pupils are unequal but reactive to light; when measured in dim light, the left pupil is 3 mm and the right pupil is 5 mm. Which of the following is the most likely cause of this patient&#x27;s ophthalmologic symptoms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PCA aneurysm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Preganglionic Sympathetic Fibre Damage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cervical plexus damage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Preganglionic Sympathetic Fibre Damage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76264711701947509/76264711701947509.m3u8&quot;}, {&quot;text&quot;: &quot;A 33-year-old woman comes to the physician because of vision impairment in her right eye for the past 2 weeks. During this period, she was unable to distinguish colors with her right eye. She also reports pain with eye movement. She has no double vision. She occasionally has headaches that are relieved by ibuprofen. One year ago, she had a similar episode that affected her left eye and resolved spontaneously. She has no history of serious illness. She works at a library and enjoys reading, even in poor lighting conditions. Her vital signs are within normal limits. The pupils are equal, round, and reactive to light and accommodation. Without correction, visual acuity is 6/18 in the left eye, and 6/36 in the right eye. With spectacles, the visual acuity is 6/6 in the left eye and 6/36 in the right eye. Slit lamp examination shows no abnormalities. A CT scan of the head shows no abnormalities. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Open angle glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;macular degeneration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Angle closure glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic neuritis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Optic neuritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34890541701947527/34890541701947527.m3u8&quot;}, {&quot;text&quot;: &quot;A 55-year-old woman comes to the physician because of increased blurring of vision in both eyes for the past 4 months. She has tried using over-the-counter reading glasses, but they have not helped. She has a history of hypertension, type 2 diabetes mellitus, and chronic obstructive pulmonary disease. Current medications include lisinopril, insulin, metformin, and a fluticasone-vilanterol inhaler. Vital signs are within normal limits. Examination shows visual acuity of 20/70 in each eye. A photograph of the fundoscopic examination of the right eye is shown. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Laser photocoagulation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ocular massage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral gancyclovir&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Laser photocoagulation&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22723251701947542/22723251701947542.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 year old female visit opd with sudden painful loss of vision .She has been wearing contact lenses for last 5 years. She recently partied in the farmhouse where her one of the contact lens dropped. She washed it with tap water and again put it back since she wasn’t carrying the solution. On examination the following is seen: Which of the following is false:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Symptom&amp;gt; signs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dendrites can be seen&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Culture medium is non nutrient e coli&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;PHMB is preferred drug&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dendrites can be seen&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68838031701947557/68838031701947557.m3u8&quot;}, {&quot;text&quot;: &quot;A 13-year-old boy is brought to the emergency room 30 minutes after being hit in the face with a cricket ball at high velocity. Examination shows left periorbital swelling, posterior displacement of the left globe, and tenderness to palpation over the left infraorbital rim. There is limited left upward gaze and normal horizontal eye movement. Further evaluation is most likely to show which of the following as a result of this patient&#x27;s trauma?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary sinus cloudiness&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CSF leak&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lacrimal duct system injury&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal sinus pneumatisation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Maxillary sinus cloudiness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43570941701947583/43570941701947583.m3u8&quot;}, {&quot;text&quot;: &quot;A 7-year-old girl comes in to the emergency department with her mother for swelling of her left periorbital region. Yesterday morning she woke up with a painful, warm, soft lump on her left eyelid. Eye movement does not worsen the pain. Physical examination shows redness and swelling of the upper left eyelid, involving the hair follicles. Upon palpation, the swelling drains purulent fluid. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dacryocystitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chalazion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hordeolum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Blepharitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Hordeolum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12552711701947602/12552711701947602.m3u8&quot;}, {&quot;text&quot;: &quot;A 15-day-old female newborn is brought to the physician for evaluation of red eyes with discharge for 3 days. She was born at 37 weeks&#x27; gestation to a 26-year-old woman. Pregnancy and delivery were uncomplicated. The mother received irregular prenatal care during the 3rd trimester of pregnancy. Examination of the newborn shows watery discharge in both eyes and mild eyelid swelling. Which of the following is the most likely cause of this patient&#x27;s presentation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staph aureus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chlamydia trachomatis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neisseria Gonorrhea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes simplex 2.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Chlamydia trachomatis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(1).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54758591701947625/54758591701947625.m3u8&quot;}, {&quot;text&quot;: &quot;A 9-year-old girl is brought to the emergency department with a headache and double vision 1 hour after being hit on the head while playing with a friend. Her friend&#x27;s elbow struck her head, just above her left ear. She did not lose consciousness, but her mother reports that she was confused for 20 minutes after the incident and did not recall being hit. She appears healthy. She is alert and oriented to person, place, and time. Her temperature is 37.2°C (99°F), pulse is 86/min, respirations are 15/min, and blood pressure is 118/78 mmHg. Examination shows the head tilted toward the right shoulder. A photograph of the eyes at primary gaze is shown. There is mild tenderness to palpation over the left temporal bone. Visual acuity is 20/20 in both eyes when tested independently. The patient&#x27;s left eye hypertropia worsens with right gaze and when the patient tilts her head toward her left shoulder. The pupils are equal and reactive to light. Muscle strength and sensation are intact bilaterally. Deep tendon reflexes are 2+ bilaterally. Plantar reflex shows a flexor response. Which of the following is the most likely cause of this patient&#x27;s ocular symptoms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;3CN damage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4th CN damage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dorsal midbrain damage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retrobulbar haemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 4th CN damage&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/image(738).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68479851701947643/68479851701947643.m3u8&quot;}, {&quot;text&quot;: &quot;A 19-year-old girl comes to her physician with blurred vision upon awakening for 3 months. When she wakes up in the morning, both eyelids are irritated, sore, and covered with a dry crust. Her symptoms improve after she takes a hot shower. She is otherwise healthy and takes no medications. She does not wear contact lenses. Her temperature is 37.4°C (99.3°F), and pulse is 88/minute. Both eyes show erythema and irritation at the superior lid margin, and there are flakes at the base of the lashes. There is no discharge. Visual acuity is 6/6 bilaterally. Which of the following is the next best step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Warm compress &amp;amp; lid hygeine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ocular culture &amp;amp; gram stain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topical mupirocin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral doxycycline.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Warm compress &amp; lid hygeine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22327011701947717/22327011701947717.m3u8&quot;}, {&quot;text&quot;: &quot;A 55 year male has been diagnosed with Open angle glaucoma and is on treatment. He has been prescribed eye drops which he has been putting in his eyes for last 2 years. He visits eye opd for the concerns regarding the different colour of iris. Identify the drug which has caused this.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dorzolamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Apraclonidine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Latanoprost&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Latanoprost&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72864971701947741/72864971701947741.m3u8&quot;}, {&quot;text&quot;: &quot;A 68-year-old man comes to the physician because of double vision and unilateral right eye pain that began this morning. His vision improves when he covers either eye. He has hypertension, mild cognitive impairment, and type 2 diabetes mellitus. The patient has smoked two packs of cigarettes daily for 40 years. His current medications include lisinopril, donepezil, metformin, and insulin with meals. His temperature is 37°C (98.6°F), pulse is 85/minute, respirations are 12/minute, and blood pressure is 132/75 mm Hg. His right eye is abducted and depressed with slight intorsion. He can only minimally adduct the right eye. Visual acuity is 20/20 in both eyes. Extraocular movements of the left eye are normal. An MRI of the head shows no abnormalities. His fingerstick blood glucose concentration is 325 mg/dL. Further evaluation is most likely to show which of the following?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ptosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Miotic pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dilated &amp;amp; fixed pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Positive swinging flashlight test&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ptosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5570471701947762/5570471701947762.m3u8&quot;}, {&quot;text&quot;: &quot;A 67-year-old man comes to the emergency department because of decreased vision and black spots in front of his left eye for the past 24 hours. He states that it feels as if &#x27;a curtain is hanging over his eye.&#x27; He sees flashes of light intermittently. He has no pain or diplopia. He underwent cataract surgery on the left eye 2 weeks ago. He has hypertension and type 2 diabetes mellitus. His sister has open-angle glaucoma. Current medications include metformin, linagliptin, ramipril, and hydrochlorothiazide. Vital signs are within normal limits. Examination shows a visual acuity in the right eye of 20/25 and the ability to count fingers at 3 feet in the left eye. The pupils are equal and reactive. The corneal reflex is present. The anterior chamber shows no abnormalities. The confrontation test is normal on the right side and shows nasal and inferior defects on the left side. Cardiopulmonary examination shows no abnormalities. The patient is awaiting dilation for fundus examination. Which of the following is the most likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute angle closure glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wet ARMD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Retinal detachment&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17376021701947781/17376021701947781.m3u8&quot;}, {&quot;text&quot;: &quot;A 62-year-old woman comes to the physician because of increasing blurring of vision in both eyes. She says that the blurring has made it difficult to read, although she has noticed that she can read a little better if she holds the book below or above eye level. She also requires a bright light to look at objects. She reports that her symptoms began 8 years ago and have gradually gotten worse over time. She has hypertension and type 2 diabetes mellitus. Current medications include glyburide and lisinopril. When looking at an Amsler grid, she says that the lines in the center appear wavy and bent. An image of her retina, as viewed through fundoscopy is shown. Which of the following is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CSR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CME&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;ARMD&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;DR&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. ARMD&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32928361701947800/32928361701947800.m3u8&quot;}, {&quot;text&quot;: &quot;A 7-year-old boy is brought to the emergency department because of photophobia and pruritus on the periocular area of the right eye for the last 2 days. He also had crusts over the eyelashes of the right eye that morning. The boy has a history of asthma and atopic dermatitis. His medications include inhaled steroids and salbutamol. Vital signs are within normal limits. Physical examination shows conjunctival injection and redness in the affected eye, as well as a watery discharge from it. There are multiple vesicles with an erythematous base located on the upper and lower eyelids. Visual acuity is within normal limits. Which of the following is the most likely cause?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chlamydia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Staph aureus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Herpes simplex&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26397511701947835/26397511701947835.m3u8&quot;}, {&quot;text&quot;: &quot;A 31-year-old woman comes to the physician because of headaches and nausea for 2 weeks. The headaches are worse on awakening and she describes them as 7 out of 10 in intensity. During this period, she has noticed brief episodes of visual loss in both eyes lasting several seconds, especially when she suddenly stands up or bends over. She is 165 cm (5 ft 5 in) tall and weighs 98 kg (216 lb); BMI is 36 kg/m2. Vital signs are within normal limits. Examination shows a visual acuity of 6/6 in both eyes with mild peripheral vision loss. Fundoscopic examination shows bilateral optic disc swelling. An MRI of the brain shows no abnormalities. A lumbar puncture is performed; opening pressure is 310 mm H2O. Cerebrospinal fluid analysis shows a leukocyte count of 4/mm3 (75% lymphocytes), a protein concentration of 35 mg/dL, and a glucose concentration of 45 mg/dL. Which of the following is the most appropriate next step in management&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Prednisolone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acetazolamide&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic nerve sheath fenrstration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Serial lumbar puncture&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Acetazolamide&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29938961701947854/29938961701947854.m3u8&quot;}, {&quot;text&quot;: &quot;A 56-year-old woman comes to the physician with a 6-month history of black spots in her vision. She has been unable to drive at night for the past 4 months. The patient has rheumatoid arthritis, type 2 diabetes mellitus, and depression. Her mother has glaucoma. She has never smoked. She drinks one or two glasses of homemade moonshine every day after dinner. Current medications include metformin, citalopram, and chloroquine. She is 168 cm (5 ft 6 in) tall and weighs 79 kg (174 lb); BMI is 28 kg/m2. Her temperature is 36.8°C (98.2°F), pulse is 68/min, and blood pressure is 138/83 mm Hg. Examination shows swan neck deformities of both hands. The patient&#x27;s vision is 20/20 in both eyes. She has difficulty adapting to changes in lighting in both eyes. Slit lamp examination shows a normal anterior segment. The posterior segment shows bilateral bull&#x27;s eye macular lesions. Which of the following is the most likely cause of this patient&#x27;s symptoms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Methanol toxicity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vit A deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chloroquine retinopathy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Chloroquine retinopathy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/21.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60445251701947871/60445251701947871.m3u8&quot;}, {&quot;text&quot;: &quot;A 64-year-old woman comes to the physician because of gradually worsening blurry vision in both eyes for 5 months. She has also had intermittent headaches for the past 2 months. She has type 2 diabetes mellitus, osteoarthritis, second-degree heart block, and presbyopia. Her current medications include metformin, lisinopril, and ibuprofen. Examination shows bilateral equal and reactive pupils. The best-corrected visual acuity in each eye is 20/40. There is narrowing of her visual fields bilaterally. Fundoscopic examination shows bilateral narrowing of the outer rim of the optic nerve head and cupping of the optic disk. Intraocular pressure by applanation tonometry is 27 mm Hg in the right eye and 26 mm Hg in the left eye (N=10–21 mm Hg). Gonioscopy shows no abnormalities. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trabeculectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pilocarpine eye drops&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Latanoprost&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Latanoprost&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48272171701947885/48272171701947885.m3u8&quot;}, {&quot;text&quot;: &quot;An 11-year-old boy is brought to the physician for a follow-up examination. He has been having difficulties with his schoolwork over the past 4 years. He has a seizure disorder treated with valproic acid. He was able to walk independently at the age of 3 years and was able to use a fork and spoon at the age of 4 years. He is at the 40th percentile for height and 60th percentile for weight. Vitals signs are within normal limits. Examination shows multiple freckles in the axillary and groin skin folds as well as scoliosis. There are 14 hyperpigmented macules over the back and chest. There are multiple soft, painless nodules over the extremities and the trunk. Ophthalmic examination shows hyperpigmented iris nodules bilaterally. This patient is at increased risk for which of the following conditions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vestibular scheannoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal astrocytoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic nerve glioma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Optic nerve glioma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30307751701947900/30307751701947900.m3u8&quot;}, {&quot;text&quot;: &quot;A 6-year-old boy is brought to the physician by his father for an annual health maintenance examination. His father notes that he has several pigmented areas on his skin and a few fleshy bumps. He has also had some blurred vision in his left eye. He has no history of serious medical illness. He lives at home with both parents and is up-to-date on all his immunizations. His father has similar skin findings. His mother has epilepsy and glaucoma. Vital signs are within normal limits. Visual acuity testing shows 20/50 in the left eye and 20/20 in the right eye. Slit-lamp examination shows pigmented iris nodules. Examination of his skin shows eight brownish macules and numerous soft, non-tender, pedunculated lesions on the back, chest, and abdomen. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CT scan of brain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;MRI of brain&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;B scan eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Gonioscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. MRI of brain&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15628831701947930/15628831701947930.m3u8&quot;}, {&quot;text&quot;: &quot;A 40 year old patient had visited in OPD with sudden painful loss of vision. There were cells in the AC, KPs, pupil was constricted and non reacting. The patient was given the treatment. And was called after 7 days. The patient didn’t show up and then Corona lockdown happened which further delayed the patient’s visit to hospital. Now he comes up today with painful diminution of vision which has increased considerably over past 10 days. On examination, following image is obtained on Slit lamp.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpetic keratitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;iridocyclitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Angle closure glaucoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpetic keratitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/22.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25879591701947950/25879591701947950.m3u8&quot;}, {&quot;text&quot;: &quot;A 50 year old patient visits eye opd complains of loss of vision with raised iop(35 mm Hg) in right eye, which is not controlled by medical therapy. Trabeculectomy Surgery is planned after which the patient developed a filtration bleb infection. Which genus of organism is most commonly isolated in bleb-associated endophthalmitis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Streptococcus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Enterococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Propionibacterium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Streptococcus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30978231701947977/30978231701947977.m3u8&quot;}, {&quot;text&quot;: &quot;A young baby with hypotonia and development delay is referred to ophthalmology where microphakia, posterior lenticonus and cataract are diagnosed. The intra-ocular pressure is 29mmHg bilaterally with Perkins tonometry. What abnormality would be MOST likely on urinalysis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Red blood cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leucocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glucose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aminoaciduria&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Aminoaciduria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64687951701947991/64687951701947991.m3u8&quot;}, {&quot;text&quot;: &quot;A 22-year-old adult with mental handicap, short stature and brachydactyly is referred by his optician with deteriorating visual acuity. You note bilateral anteriorly subluxed lenses. What other lens anomaly might you anticipate?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior polar cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior lenticonus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior lenticonus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Microspherophakia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Microspherophakia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12919091701948017/12919091701948017.m3u8&quot;}, {&quot;text&quot;: &quot;A 58 year-old female has a history of breast cancer surgery done. She is a non smoker, non alcoholic. She develops rapid onset bilateral painful proptosis. What is the most likely cause?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orbital varices&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyroid eye disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Metastatic carcinoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cavernous haemangioma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Metastatic carcinoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13864371701948075/13864371701948075.m3u8&quot;}, {&quot;text&quot;: &quot;An 8-year-old boy complains of blurred vision for 1 week. Fundus findings are shown in Figure. What information from the history is in keeping with the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A pet cat at home&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Blunt trauma to the orbit&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Juvenile-onset diabetes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Prematurity with low birth weight&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. A pet cat at home&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/23.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22620451701948097/22620451701948097.m3u8&quot;}, {&quot;text&quot;: &quot;A 65 year old patient with Diabetic mellitus from past 20 years visits eye OPD. He is non smoker, non alcoholic. According to the ETDRS criteria, which of the following signs if present will classify an eye as having severe non-proliferative diabetic retinopathy:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Widespread hard exudates at the macula&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cotton wool spots in all 4 quadrants&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Venous beading in 2 quadrants&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arteriolar narrowing&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Venous beading in 2 quadrants&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21064061701948114/21064061701948114.m3u8&quot;}, {&quot;text&quot;: &quot;An 18 year old female patient visits eye OPD with her parents with complaints of diminution of distant vision. The patient is wearing spectacles of the power of 7D(Both Eyes). The patients wants to consider LASIK surgery for removal of spectacles. Which of the following is incorrect regarding LASIK surgery?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The minimum corneal thickness of cornea should be 510 micrometer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fundus examination must be done pre op&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;LASIK is also used to treat Dry eye&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Not done in a young child&amp;lt; 21 years&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. LASIK is also used to treat Dry eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29445871701948130/29445871701948130.m3u8&quot;}, {&quot;text&quot;: &quot;A 3-year-old girl with cystic fibrosis is brought to the physician for a follow-up examination. Her mother has noticed that the child has had multiple falls over the past 4 months while walking, especially in the evening. Her current medications include pancreatic enzyme supplements, an albuterol inhaler, and acetylcysteine. She is at the 10th percentile for height and the 5th percentile for weight. Examination shows dry skin, and cone shaped elevated papules on the trunk and extremities. There is an irregularly shaped foamy gray patch on the left CONJUNCTIVA. The remainder of the examination shows no abnormalities. Which of the following is the most appropriate next step in management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Administer niacin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Administer Zinc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Administer lutein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Administer Vitamin A&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Administer Vitamin A&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24017861701948152/24017861701948152.m3u8&quot;}, {&quot;text&quot;: &quot;A 50 year old patient was playing football when the ball hit his right eye. There Was a blunt trauma and the patient complained of sudden painful loss of vision. The patient was taken to the emergency where the surgery was performed and A post op image is shown: Why surgery is performed?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;To prevent rise in IOP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;To replace Lens with IOL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both A &amp;amp; B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;To reattach retina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. To replace Lens with IOL&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/26(1).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13369661701948186/13369661701948186.m3u8&quot;}, {&quot;text&quot;: &quot;A 3-week-old male infant is brought to the physician for follow-up. He was delivered at 30 weeks&#x27; gestation via cesarean section and was cyanotic at birth, requiring resuscitation and a neonatal intensive care unit hospitalization. His mother received no prenatal care; she has diabetes mellitus type II and hypertension. She was not tested for sexually transmitted infections during the pregnancy. The infant appears well. Ophthalmologic examination shows tortuous retinal vessels. There are well-demarcated areas of nonvascularized retina in the periphery. This patient&#x27;s retinal findings are most likely a result of which of the following?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oxygen therapy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hyperglycemia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glucocorticoid deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Treponema pallidum infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Oxygen therapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65792561701948201/65792561701948201.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 year old patient visits eye opd with complains of pain in both eyes with congestion, blurring of vision, photophobia and watery discharge. On examination the following is seen The probable causative organism is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Enterovirus-70&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Adenovirus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/27(1).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50678811701948214/50678811701948214.m3u8&quot;}, {&quot;text&quot;: &quot;The 70 year old female visits eye emg with sudden painless loss of vision 6 hours back. The patient gives a history of sitting in her room when he felt as if suddenly the voltage dropped down. Post that she was not able to see the objects clearly. On fundus examination. Following image is seen.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CRVO&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. CRVO&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/28.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4367611701948230/4367611701948230.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old patient visits eye OPD with complaints of slow painless loss of vision. The patient has a history of having done cataract surgery 1 month back. The surgery was uneventful. The patient was prescribed post operative eye drops which he didn’t use properly(low compliance). The eye drops prescribed to him was: Milflox DM(moxifloxacin and dexamethasone) 8 times Nepafenac TDS Timolol BD on further examination: The eye is quiet. Va 6/60 IOP 20 mm Hg. What is the cause of loss of vision:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;After cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cystoid macular edema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cystoid macular edema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17667471701948244/17667471701948244.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old is suspected to have diminution of vision due to glaucoma. You need to make sure if it is due to glaucoma or something else. Which of the following investigation to assess fundus(retinal examination) is best:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Biometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Biomicroscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Direct ophthalmoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Indirect ophthalmoscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Biomicroscopy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1520621701948256/1520621701948256.m3u8&quot;}, {&quot;text&quot;: &quot;After 48 hours of a cataract extraction operation, a patient complained of ocular pain and visual loss. On examination, this eye looked red with ciliary injection, corneal oedema and absent red reflex. The first suspicion must be:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Secondary glaucoma.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior uveitis.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bacterial endophthalmitis.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Bacterial endophthalmitis.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16974501701948274/16974501701948274.m3u8&quot;}, {&quot;text&quot;: &quot;A 75 yo diabetic and hypertensive patient visits Eye OPD with complaints of slow painless diminution of vision which has increased fromlast 5-6 days and is now associated with pain On examination, Cornea-clear AC- 1.5 mm in diameter Pupil- 4-5 mm in diameter Lens- whitish in colour to Lens-Intumuscent Vitreous- clear Fundus examination: disc margins defined, C:D ratio- 0.6, arterioles are attenuated, Dot blot h’ges on retina. What is the cause of pain &amp;amp; loss of vision?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hypertensive retinopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71122541701948288/71122541701948288.m3u8&quot;}, {&quot;text&quot;: &quot;A patient who was operated for cataract four months back comes to you with foggy vision. On examination following is found, which mode of treatment is most useful.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Excimer laser&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;YAG-Laser&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Argon laser&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Krypton laser&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. YAG-Laser&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/29.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59925811701948304/59925811701948304.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 94 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test9" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Ophthalmology Image Based Question&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Ophthalmology Image Based Question&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                20 Questions | 80 Total Marks | 30 min Duration | ~90.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;The fundoscopy findings of a known case of HIV with low CD4 counts in shown below. What is the treatment of choice for this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acyclovir&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ganciclovir&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Valacyclovir&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tryflurothymidine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ganciclovir&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(832).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A hypertensive patient comes to the OPD with complaints of visual disturbances. On fundoscopy, multiple flame-shaped hemorrhages, cotton wool spots, and disc edema were found. What is the grade of hypertensive retinopathy in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grade I&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Grade II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Grade III&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Grade IV&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Grade IV&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(731).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A child presented to the OPD with a characteristic type of cataract as seen in the image below. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Galactosemia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Wilson’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myotonic dystrophy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Galactosemia&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(648).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An 86-year-old man is posted for cataract surgery. The given lens is chosen to be used for implantation. Identify the lens.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior chamber IOL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior chamber IOL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Iris claw lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scleral fixated IOL&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior chamber IOL&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(598).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 68-year-old diabetic woman presents with painless loss of vision. The ocular findings are shown in the image below. What is the likely diagnosis and management for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Zonular cataract and lensectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rosette cataract and sugar control&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sunflower cataract and lesion extraction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Immature senile cataract and phacoemulsification with IOL&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Immature senile cataract and phacoemulsification with IOL&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(573).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The following finding is found on the ophthalmologic examination of a 19-year-old boy. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type 1 Diabetes mellitus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Alport’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lowe’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myotonic dystrophy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Myotonic dystrophy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(461).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;At a routine ophthalmological check-up, a patient was found to have bilateral, Y-shaped lens opacities as shown below. He was diagnosed with suture cataracts. Which zone of the lens nucleus is not involved here?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fetal nucleus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Embryonic nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Infantile nucleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adult nucleus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fetal nucleus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(414).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;What does the given fundoscopic picture suggest?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Primary optic atrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Secondary optic atrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glaucomatous optic atrophy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Consecutive optic atrophy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Glaucomatous optic atrophy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(391).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 36-year-old male comes to you with the complaints of foreign body sensation, irritation, and lacrimation in the right eye. During the evaluation, you notice the following findings with normal lid margins. This condition is known as?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Distichiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichiasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudotrichiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudodistichiasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Trichiasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(350).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Corneal ulcer in the given picture is stained with a dye. Which is false for the dye used here?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blue light comes from slit lamp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Green is normal area&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;The same dye is used in Goldmann applnation tonometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dye used is orange coloured dye&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Green is normal area&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202025-02-12%20at%205_45_12%20PM.jpeg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 14-year-old girl you examine in an outreach camp is found to have this abnormality. What is the most common site of the condition seen?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superonasal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferonasal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superotemporal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferotemporal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inferonasal&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(277).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is a feature of shown instrument?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;15 times magnification in emmetropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Image is erect and virtual&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Binocular vision&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Smaller field of vision&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Binocular vision&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(266).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the chart given in the picture below:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hess chart&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Snellen chart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pelli-Robson chart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;ETDRS chart&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hess chart&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13(230).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A neonate is brought with complaints of photophobia and watering. Clinical examination shows normal tear passages and clear but large cornea. Investigation reveals Haab’s striae seen in the eye. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Buphthalmos&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratoconus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trachoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratoglobus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Buphthalmos&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14(210).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Deposition of which of the following is responsible for band-shaped keratopathy?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Amyloid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Calcium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Monopolysaccharide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cholesterol&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Calcium&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(223).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient presents to you with anhidrosis and enophthalmos. Examination reveals miosis along with mild ptosis as shown in the below image. You decide to correct the ptosis by performing Fasanella-Servat operation, by resecting which of the following muscles?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Levator palpebrae superioris muscle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Frontalis muscle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior rectus muscle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Muller’s muscle&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Muller’s muscle&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(194).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 2-month-old girl child was brought to the hospital by her parents with the following presentation. What is the appropriate management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate surgery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wait until 4 months of age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Wait until 2 years of age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trial of medical therapy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Immediate surgery&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(161).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the defect shown in the image:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herbert pits&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Horner tranta spots&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gelatinous papillae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pannus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herbert pits&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(156).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An 12-year-old presented with the following growth in the eye as shown below. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Myxoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pyogenic granuloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Limbal dermoid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Limbal dermoid&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19(150).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the visual field defect in the given image:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Altitudinal hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Complete binasal hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bitemporal hemianopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Homonymous hemianopia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Homonymous hemianopia&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(154).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 30 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test10" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Orbit&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Orbit&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                36 Questions | 188 Total Marks | 46 min Duration | ~76.67 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which proptosis is produced by ethmoidal mucocoele&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Medial&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lateral&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57512741697897340/57512741697897340.m3u8&quot;}, {&quot;text&quot;: &quot;The muscle most commonly involved in thyroid ophthalmopathy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Inferior rectus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Medial rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral rectus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior rectus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Inferior rectus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60943171697897372/60943171697897372.m3u8&quot;}, {&quot;text&quot;: &quot;A 4 yr boy presents with fever,proptosis and eye pain. Most likely cause is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute frontal sinusitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Orbital cellulitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retrobulbar neuritis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Orbital cellulitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15632241697897387/15632241697897387.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of unilateral proptosis in children:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;rhabdomyosarcoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;metastases&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;orbital cellulitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. orbital cellulitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49409561697897402/49409561697897402.m3u8&quot;}, {&quot;text&quot;: &quot;Global rupture due to blunt trauma is indicated by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blow-out fracture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lens subluxation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contusion, haemorrhage and low intra-ocular pressure&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Proptosis and decreased mobility of muscle&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Contusion, haemorrhage and low intra-ocular pressure&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53558491697897415/53558491697897415.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are the causes of proptosis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Craniofacial synostosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Enopththalmos&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Orbital varix&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Enopththalmos&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4730001697897436/4730001697897436.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of unilateral proptosis in adults:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thyrotoxicosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intraocular haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Raised intracranial tension&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Thyrotoxicosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49268721697897473/49268721697897473.m3u8&quot;}, {&quot;text&quot;: &quot;Which exophthalmometer is useful in children:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hertel’s&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Luedde’s&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Moritz&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Simple rule&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Luedde’s&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67185851697897505/67185851697897505.m3u8&quot;}, {&quot;text&quot;: &quot;Optic foramen is situated between:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lesser and greater wing of sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lesser wing and body of sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Greater wing and body of sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Two roots of lesser wing of sphenoid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Two roots of lesser wing of sphenoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63916421697897571/63916421697897571.m3u8&quot;}, {&quot;text&quot;: &quot;Most common type of optic nerve glioma is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Protoplasmic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pilocytic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gemistocytic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fibrous&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pilocytic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20823741697897641/20823741697897641.m3u8&quot;}, {&quot;text&quot;: &quot;After removal of retinoblastoma, which tissue is sectioned to find distant metastasis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vortex vein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Central retinal vein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scleral and choroidal tissue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Optic nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77155781697897655/77155781697897655.m3u8&quot;}, {&quot;text&quot;: &quot;A 48-yr old lady presents with unilateral mild axial proptosis. There is no history of redness or pain. Which of the following is the most appropriate investigation:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CT-Scan to rule out meningioma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;USG to rule out orbital pseudotumor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T3 T4 measurement to rule out thyrotoxicosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Doppler to rule out hemangioma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. T3 T4 measurement to rule out thyrotoxicosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70265771697897669/70265771697897669.m3u8&quot;}, {&quot;text&quot;: &quot;A boy presents with diplopia and restriction of eye movements following blunt trauma to his eye. X-ray reveals blow-out fracture of orbit. Which part of orbit is most likely damaged.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior wall&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior wall&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial wall&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral wall&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inferior wall&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61530771697897683/61530771697897683.m3u8&quot;}, {&quot;text&quot;: &quot;Leucocoria can be seen in all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Persistent hyperplastic primary vitreous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Congenital glaucoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fungal endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Congenital glaucoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29221491697897702/29221491697897702.m3u8&quot;}, {&quot;text&quot;: &quot;Which is not a complication of blunt trauma to eye:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyphema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Perforation of iris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Iridodialysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Perforation of iris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14536941697897715/14536941697897715.m3u8&quot;}, {&quot;text&quot;: &quot;Unilateral pulsating exophthalmos is present in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orbital varices&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Carotico cavernous fistula&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxic thyroid goiter&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Carotico cavernous fistula&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76091221697897728/76091221697897728.m3u8&quot;}, {&quot;text&quot;: &quot;A patient had running nose and pain over medical aspect of eye being treated with decongestants for many days. He later developed chemosis, protosis with congestion of optic disc. What is the probable diagnosis? Loss of abduction was seen in opposite eye&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute ethmoidal sinusitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Orbital cellulitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Panophthalmitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cavernous sinus thrombosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5355941697897745/5355941697897745.m3u8&quot;}, {&quot;text&quot;: &quot;The average volume of orbit is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6 cc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;12 cc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;24 cc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;30 cc&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 30 cc&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54070911697897769/54070911697897769.m3u8&quot;}, {&quot;text&quot;: &quot;Enculeation means&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Removal of contents of globe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Removal of the content of the globe and all of sclera except for a frill around the optic nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Removal of entire globe along with a portion of optic nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Removal of the entire contents of orbit&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Removal of entire globe along with a portion of optic nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34852671697897787/34852671697897787.m3u8&quot;}, {&quot;text&quot;: &quot;Which is the weakest wall of the orbit :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Medial&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferior&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Medial&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48846241697897800/48846241697897800.m3u8&quot;}, {&quot;text&quot;: &quot;Vortex vein invasion is commonly seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Malignant melanoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic nerve glioma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Medullo-epitheliomas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Malignant melanoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63762161697897813/63762161697897813.m3u8&quot;}, {&quot;text&quot;: &quot;Hereditary retinoblastoma develop the following chromosomal deletion:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;13 q 14&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;13 p 1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;14 p 13&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;14 q 13&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 13 q 14&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2016631697897828/2016631697897828.m3u8&quot;}, {&quot;text&quot;: &quot;A one year old child having leucocoria was detected to be having a unilateral, large retinoblastoma filling half the globe. Current therapy would involve:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Enucleation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chemotherapy followed by local dyes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Direct laser abeation using photo dynamic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cryotherapy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Enucleation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18753931697897844/18753931697897844.m3u8&quot;}, {&quot;text&quot;: &quot;Fasanella-Servat operation is specifically indicated in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Steroid- induced ptosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myasthenia gravis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Horner’s syndrome&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Horner’s syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5963581697897857/5963581697897857.m3u8&quot;}, {&quot;text&quot;: &quot;Most common primary malignant intraorbital tumor in children&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;rhabdomyosarcoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;malignant melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;metastases&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. rhabdomyosarcoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51487011697897875/51487011697897875.m3u8&quot;}, {&quot;text&quot;: &quot;Most common parasitic infestation found in the orbit is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cysticercosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Entamoeba&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Onchocerciasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxoplasmosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cysticercosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28336781697897888/28336781697897888.m3u8&quot;}, {&quot;text&quot;: &quot;All the nerves pass through SOF except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oculomotor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trochlear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ophthalmic division of the fifth nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Optic nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/350501697897900/350501697897900.m3u8&quot;}, {&quot;text&quot;: &quot;Proptosis in a young child is produced by following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Leukemia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glioma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meningioma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Meningioma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72249261697897913/72249261697897913.m3u8&quot;}, {&quot;text&quot;: &quot;In panophthalmitis, the treatment of choice is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Enucleation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Evisceration&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Exenteration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Stdroids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Evisceration&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9638081697897945/9638081697897945.m3u8&quot;}, {&quot;text&quot;: &quot;A 45-yr old male presented with proptosis with reduced upward and downward movements. On USG,there is a cystic lesion in superior rectus that contains hyperdense material. The most likely diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orbital cysticercosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hemangioma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Orbital cysticercosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;SOF lies between&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Body of sphenoid and Lesser wing of sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Body of sphenoid and greater wing of sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lesser and Greater wing of sphenoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Zygomatic bone and frontal bone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lesser and Greater wing of sphenoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74392411697897962/74392411697897962.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following may cause bilateral proptosis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glioma of the optic nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Craniosynostosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Thyroid ophthalmopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Glioma of the optic nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56469691697897978/56469691697897978.m3u8&quot;}, {&quot;text&quot;: &quot;Most common second malignancy in patient of retinoblastoma post radiotherapy is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Osteosarcoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ewing&#x27;s sarcoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medulloblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Osteoblasts&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Osteosarcoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61980161697897993/61980161697897993.m3u8&quot;}, {&quot;text&quot;: &quot;Most common intraocular tumour encroaching the orbit is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Astrocytoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinoblastoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenoid wing meningioma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;medulloblastoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Retinoblastoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41825181697898005/41825181697898005.m3u8&quot;}, {&quot;text&quot;: &quot;A hectic bout of fever with bilateral proptosis in 25yrs old diabetic following an injury to face is most diagnostic of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyrotoxicosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intracranial neoplasm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Orbital tumour&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cavernous sinus thrombosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52163451697898017/52163451697898017.m3u8&quot;}, {&quot;text&quot;: &quot;Alkali injury to eye causes :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Globe perforation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic neuritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Symblepharon&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Symblepharon&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14168081697898030/14168081697898030.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 46 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test11" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Retina&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Retina&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                38 Questions | 204 Total Marks | 48 min Duration | ~75.79 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Amsler Grid chart is used for testing:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Angle of primary deviation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Angle of secondary deviation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Macular function&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic nerve function&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Macular function&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20262271697903268/20262271697903268.m3u8&quot;}, {&quot;text&quot;: &quot;Earliest ophthalmoscopic sign of diabetic retinopathy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hard exudates&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dot haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Microaneurysms&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Microaneurysms&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61936771697903253/61936771697903253.m3u8&quot;}, {&quot;text&quot;: &quot;The commonest cause of rubeosis iridis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetes mellitus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Central vein occlusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Central retinal artery occlusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Carotid stenosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Diabetes mellitus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6152531697903234/6152531697903234.m3u8&quot;}, {&quot;text&quot;: &quot;All are true regarding Eales disease except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Occurs in young&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vascular sheathing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic neuritis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Optic neuritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63513591697903222/63513591697903222.m3u8&quot;}, {&quot;text&quot;: &quot;Cattle-truck appearance is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CRVO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;BRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;BRVO&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. CRAO&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47418861697903206/47418861697903206.m3u8&quot;}, {&quot;text&quot;: &quot;For flourescein angiography of retina, dye is injected in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Femoral artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antecubital vein&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ophthalmic artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Internal carotid artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Antecubital vein&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36648301697903189/36648301697903189.m3u8&quot;}, {&quot;text&quot;: &quot;Sauce and cheese retinopathy is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CMV&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Toxoplamosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. CMV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41640981697903161/41640981697903161.m3u8&quot;}, {&quot;text&quot;: &quot;All are fundus findings of diabetic retinopathy except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Microneurysms&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinal haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Arteriolar dilatation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Neovascularisation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Arteriolar dilatation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73170551697903124/73170551697903124.m3u8&quot;}, {&quot;text&quot;: &quot;Laser photocoagulation affects which layer of the retina:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Layer of rods and cones&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retinal pigment epithelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inner plexiform layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nerve fibre layer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Retinal pigment epithelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78963761697903098/78963761697903098.m3u8&quot;}, {&quot;text&quot;: &quot;Pepper salt fundus is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Multiple sclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cystinosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Weil marchesani syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Congenital syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ophthal-7.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54708451697903084/54708451697903084.m3u8&quot;}, {&quot;text&quot;: &quot;Cherry-red spot over retina is seen in all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tay sach’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neimann pick disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Batten Mayo syndrome&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Batten Mayo syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15775881697903059/15775881697903059.m3u8&quot;}, {&quot;text&quot;: &quot;Thinnest part of retina is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Optic disc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fovea centralis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ora serrata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mid-Peripheral retina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ora serrata&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12147081697903044/12147081697903044.m3u8&quot;}, {&quot;text&quot;: &quot;The laser procedure most often used for treating iris neovascularisation is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Goniophotocoagulation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laser trabeculoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pan retinal photocoagulation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laser iridoplasty&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pan retinal photocoagulation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50570701697903032/50570701697903032.m3u8&quot;}, {&quot;text&quot;: &quot;Fundus of a young patient shows pigment along retinal midperiphery and waxy pale disc. The diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinitis pigmentosa&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diabetic retinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Central serous retinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lattice degeneration of retina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Retinitis pigmentosa&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41323131697903019/41323131697903019.m3u8&quot;}, {&quot;text&quot;: &quot;A 66-year old elderly male present with heart disease and has sudden loss of vision in one eye, examination reveals a cherry red spot over the fundus, the likely diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Central retinal vein occlusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Central retinal artery occlusion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Amaurosis fugax&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute ischemic optic neuritis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Central retinal artery occlusion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10313371697902989/10313371697902989.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of Vision-loss in non-proliferative diabetic retinopathy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sub-retinal haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Macular edema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Macular edema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44971461697902970/44971461697902970.m3u8&quot;}, {&quot;text&quot;: &quot;Henle’s layer is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Outer Nuclear layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Outer plexiform layer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inner Nuclear layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inner plexiform layer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Outer plexiform layer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17719691697902956/17719691697902956.m3u8&quot;}, {&quot;text&quot;: &quot;Cystoid macular edema involves dysfunction in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Outer blood retinal barrier&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inner blood retinal barrier&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both of the above&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inner blood retinal barrier&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6249771697902932/6249771697902932.m3u8&quot;}, {&quot;text&quot;: &quot;ETDRS vision chart study is done in patients with diabetic retinopathy. ETDRS stands for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Emergency treatment for diabetic retinopathy and study&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Eye testing on rotatory drum and its study&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Extended therapy for diabetic retinopathy and its study&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Early treatment for diabetic retinopathy study&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Early treatment for diabetic retinopathy study&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54348991697902915/54348991697902915.m3u8&quot;}, {&quot;text&quot;: &quot;A young male presented with sudden painless loss of vision with floaters, retinal vasculitis was seen. He recovered spontaneously within 3 months. Most likely cause.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Central serous retinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Macular hole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myopic crescent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Vitreous haemorrhage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52051551697902898/52051551697902898.m3u8&quot;}, {&quot;text&quot;: &quot;Night blindness occurs in all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinitis pigmentosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;High myopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vitamin A deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tobacco amblyopia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Tobacco amblyopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57884121697902885/57884121697902885.m3u8&quot;}, {&quot;text&quot;: &quot;Photoretinitis is seen with:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ultra violet rays&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Infrared ray&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gamma rays&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;X-rays&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Infrared ray&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64123961697902869/64123961697902869.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are features of CRVO except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gross impairment of vision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Severe pain in the eye&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superficial haemorrhages in fundus examination&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Markedly dilated veins&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Severe pain in the eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14587381697902856/14587381697902856.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following staphyloma occurs in high myopia:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ciliary staphyloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior staphyloma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterior staphyloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Intercalary staphyloma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior staphyloma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38718341697902843/38718341697902843.m3u8&quot;}, {&quot;text&quot;: &quot;Normal ratio of size of arteries and veins in fundus is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2:3&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;3:2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1:1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;3:5&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 2:3&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55216751697902830/55216751697902830.m3u8&quot;}, {&quot;text&quot;: &quot;In RD fluid accumulates between:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Layers of OPL and INL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neurosensory retina and RPE&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;NFL and rest of the retina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Between RPE and Bruch’s membrane&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Neurosensory retina and RPE&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75477781697902819/75477781697902819.m3u8&quot;}, {&quot;text&quot;: &quot;Hard exudates are found in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;OPL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;INL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;IPL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ganglion cell layer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. OPL&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33816221697902805/33816221697902805.m3u8&quot;}, {&quot;text&quot;: &quot;Retinopathy of leukemia includes all the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dilated and tortuous retinal veins&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Roth spots&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Foster fuch spots&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Foster fuch spots&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15596911697902785/15596911697902785.m3u8&quot;}, {&quot;text&quot;: &quot;Angiod streaks are seen in all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Paget’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudoxanthoma elasticum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ehler Danlos syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myopic maculopathy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Myopic maculopathy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61360821697902755/61360821697902755.m3u8&quot;}, {&quot;text&quot;: &quot;Retinal detachment with photopsia and floaters are seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhegmatogenous RD&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Exudative RD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tractional RD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rhegmatogenous RD&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29527461697902737/29527461697902737.m3u8&quot;}, {&quot;text&quot;: &quot;ICG angiography is best indicated for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Classical ARMD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dry ARMD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Occult ARMD&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wet ARMD&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Occult ARMD&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51483321697902721/51483321697902721.m3u8&quot;}, {&quot;text&quot;: &quot;In ERG ‘a’ wave is due to:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bipolar cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ganglion cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rods and cones&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;NFL&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Rods and cones&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39747041697902706/39747041697902706.m3u8&quot;}, {&quot;text&quot;: &quot;100 day glaucoma is a feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CRAO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CRVO&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CSR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CME&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. CRVO&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47848801697902681/47848801697902681.m3u8&quot;}, {&quot;text&quot;: &quot;The normal ratio of light peak and dark trough on an EOG&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1.5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;More than 1.85&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Less than 1.85&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. More than 1.85&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74471691697902667/74471691697902667.m3u8&quot;}, {&quot;text&quot;: &quot;The development of subretinal demarcation lines (high water marks) in the retina is indicative of–&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Longstanding retinal detachment&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fresh retinal detachment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal tumour formation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Normal retinal finding&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Longstanding retinal detachment&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49200051697902653/49200051697902653.m3u8&quot;}, {&quot;text&quot;: &quot;A 7-year old male child presents with normal vision 6/6 in the right eye and hand movement perception close to the face in the left eye. On fundoscopy, his right eye was normal and left eye showed retinal detachment, subretinal yellowish exudates and telangiectatic vessels. The most likely diagnosis is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Coat’s disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sympathetic ophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Familial exudative vitreoretinopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinopathy of prematurity&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Coat’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64630241697902639/64630241697902639.m3u8&quot;}, {&quot;text&quot;: &quot;Arden index is used for interpretation of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Visual evoked response&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Electrooculogram&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Electroretinogram&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Visual field charting&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Electrooculogram&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73359731697902626/73359731697902626.m3u8&quot;}, {&quot;text&quot;: &quot;Hollenhorst plaque is composed of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cholesterol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Calcium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Platelets&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Talc&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cholesterol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42053171697902569/42053171697902569.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 48 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test12" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Squint  Optics&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Squint  Optics&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                41 Questions | 224 Total Marks | 51 min Duration | ~74.63 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which of the following material is best suited for manufacture of gas permeable contact lenses –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glass&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Methyl methacrylate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Silicone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rubber&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Silicone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30155561697957369/30155561697957369.m3u8&quot;}, {&quot;text&quot;: &quot;Fixation of visual reflexes is accomplished by –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6 mth&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1 yr&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;2 yr&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;3yr&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 6 mth&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2652611697957383/2652611697957383.m3u8&quot;}, {&quot;text&quot;: &quot;True regarding LR palsy is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Crossed diplopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Uncrossed diplopia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Divergent squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pupillary dilation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Uncrossed diplopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16502051697957397/16502051697957397.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice in aphakia is–&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spectacles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Contact lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intra –ocular lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epikerato phakia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Intra –ocular lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71148521697957410/71148521697957410.m3u8&quot;}, {&quot;text&quot;: &quot;Most important factor to focus rays on retina&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Corneal curvature&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Axial&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Media length of eyeball&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Corneal curvature&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49159161697964510/49159161697964510.m3u8&quot;}, {&quot;text&quot;: &quot;The power of eye is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;15D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;29D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;58D&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;100D&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 58D&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64117091697964541/64117091697964541.m3u8&quot;}, {&quot;text&quot;: &quot;Secondary deviation is more than primary deviation in a diabetic patient:–&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spastic squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Paralytic squint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Concomitant squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Restrictive squint&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Paralytic squint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34254191697957436/34254191697957436.m3u8&quot;}, {&quot;text&quot;: &quot;treatment of amblyopia in a 3 yr old child is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orthoptic exercises&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Occlusion of one eye&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Prism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Surgery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Occlusion of one eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49504481697957454/49504481697957454.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of accomodative strabismus is–&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orthoptic exercises&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lens implant&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Refractive correction&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Prism correction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Refractive correction&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40520621697957473/40520621697957473.m3u8&quot;}, {&quot;text&quot;: &quot;Downward movement of abducted eyeball is action of –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;IO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;IR&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;SR&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. IR&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64719931697957501/64719931697957501.m3u8&quot;}, {&quot;text&quot;: &quot;Infant is physiologically&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Myopic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypermetropic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Astigmatic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Emmetropic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Hypermetropic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43981001697957518/43981001697957518.m3u8&quot;}, {&quot;text&quot;: &quot;Which is not a clinical feature of right sided VI th nerve palsy-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Convergent squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Face turn to left&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inability to abduct right eye&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diplopia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Face turn to left&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70908231697957552/70908231697957552.m3u8&quot;}, {&quot;text&quot;: &quot;Action of superior oblique muscle are all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intorsion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Extorsion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Depression&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Abduction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Extorsion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70050211697957895/70050211697957895.m3u8&quot;}, {&quot;text&quot;: &quot;Soft contact lens uses have high tendency to develop&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Recurrent corneal ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acanth amoeba ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudomonas infection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pneumococcal infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pseudomonas infection&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64487301697957920/64487301697957920.m3u8&quot;}, {&quot;text&quot;: &quot;Inverted Purkinje image is seen on–&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior surface of cornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior surface of lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior surface of cornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior surface of lens&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Posterior surface of lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54213131697957936/54213131697957936.m3u8&quot;}, {&quot;text&quot;: &quot;Magnification caused by direct ophthalmoscope is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;5 times&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;15 times&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;50 times&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;10 times&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 15 times&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68478371697957948/68478371697957948.m3u8&quot;}, {&quot;text&quot;: &quot;A lady using contact lens developed photophobia, blurred vision and watery discharge was diagnosed to be suffering from over-wearing syndrome . Most appropriate management is –&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Avoid use of lens for 48 - 72 hrs&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antibiotic and cycloplegic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Change the contact lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Send the lens for culture and sensitivity&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Avoid use of lens for 48 - 72 hrs&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23816351697957963/23816351697957963.m3u8&quot;}, {&quot;text&quot;: &quot;After maximum correction ,the vision of RE is 6/36 and left eye is 6/6 and with 66 cm retinoscopy RE is +4.5 D and LE is 1.5 D with normal fundus. Most likely cause of defect of vision-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Refractive error&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anisometropic Amblyopia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Strabismic Amblyopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anisometropia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Anisometropic Amblyopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63245851697957986/63245851697957986.m3u8&quot;}, {&quot;text&quot;: &quot;A child was taken to a doctor by his mother complaining that there is decrease in his school performance, his teacher says that he frequently squeezes his eyes and says that there is difficulty in seeing the black board. What is most probable diagnosis-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Myopia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypermetropia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presbyopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Astigmatism&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Myopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77979651697957999/77979651697957999.m3u8&quot;}, {&quot;text&quot;: &quot;Basanti, a 20yr old female presents with complaints of difficulty in reading near print. On examination there is ptosis and diplopia on looking in all direction. What is the most probable diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lateral rectus palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oculomotor palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presbyopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myasthenia gravis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Myasthenia gravis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13261961697958013/13261961697958013.m3u8&quot;}, {&quot;text&quot;: &quot;Retinoscopy is done on a 0.5 D myopic patient at a distance of 1 metre. Movement of image will be -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Move with the mirror&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Move opposite to the mirror&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;No movement of image with the mirror&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Image can move on any side&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Move with the mirror&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37489821697958028/37489821697958028.m3u8&quot;}, {&quot;text&quot;: &quot;A soft contact lens user has keratitis. Most likely cause is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acanthamoeba ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erosion of cornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pseudomonas infection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pseudomonas infection&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56252091697958040/56252091697958040.m3u8&quot;}, {&quot;text&quot;: &quot;Eye is deviated laterally and downwards, patient is unable to look up or medially, likely nerve involved is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trochlear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trigeminal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oculomotor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Abducens&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Oculomotor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20955081697958074/20955081697958074.m3u8&quot;}, {&quot;text&quot;: &quot;Visual acuity is test of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Light sense&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Color sense&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Depth perception&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Form sense&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Form sense&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55398691697958092/55398691697958092.m3u8&quot;}, {&quot;text&quot;: &quot;Yoke muscles for dextroelevation are:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Right IR and Left SO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Right SR and Left IO&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right SO and Left IR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Right IO and Left SR&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Right SR and Left IO&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14197701697958120/14197701697958120.m3u8&quot;}, {&quot;text&quot;: &quot;Hirschberg test is used to detect:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Squint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Visual acuity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Optic neuritis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Squint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55723011697958172/55723011697958172.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following combination is false:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;SR and SO are intorters&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SR and IR are adductors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;SR and SO are abductors&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IR and IO are extorters&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. SR and SO are abductors&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42546281697958188/42546281697958188.m3u8&quot;}, {&quot;text&quot;: &quot;Eye achieves adult size by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;13 year&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4 year&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 13 year&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19522421697958210/19522421697958210.m3u8&quot;}, {&quot;text&quot;: &quot;In a mixed type of accommodative esotropia&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Child has normal AC/A but high refractive error&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Child has abnormal AC/A ratio and normal refraction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Child has both increased AC/A and increased refraction for age&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Child has both increased AC/A and increased refraction for age&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77004271697958231/77004271697958231.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not a cycloplegic&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phenylephrine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Homatropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cyclopentolate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Phenylephrine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66389711697958323/66389711697958323.m3u8&quot;}, {&quot;text&quot;: &quot;Secondary deviation follows:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Donders law&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Listing law&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hering’s law&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sherrington’s law&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Hering’s law&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6273471697958365/6273471697958365.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the muscles does not arise from the apex of the orbit:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;SO&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;IO&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;IR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;SR&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. IO&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47519521697958390/47519521697958390.m3u8&quot;}, {&quot;text&quot;: &quot;Which instrument is based on the principle of first purkinje images:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinoscope&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Slit lamp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cross-Cylinder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratometer&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Keratometer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78845711697958408/78845711697958408.m3u8&quot;}, {&quot;text&quot;: &quot;Most rapidly acting cycloplegic is;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Atropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tropicamide&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Homatropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cyclopentolate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tropicamide&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47723551697958446/47723551697958446.m3u8&quot;}, {&quot;text&quot;: &quot;Maddox rod is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Series of fused cylindrical glasses&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Series of fused prisms of increasing length&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Series of fused prisms of decreasing length&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Series of alternating spherical and cylindrical glasses&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Series of fused cylindrical glasses&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75192381697958459/75192381697958459.m3u8&quot;}, {&quot;text&quot;: &quot;A patient has a spectacle correction of -6D and -8D.He has started seeing some opacities floating in front of his eye and that his vision is decreased in the last few days.What is the best investigation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Refraction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Indirect ophthalmoscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Distant direct ophthalmoscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Indirect ophthalmoscopy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36896621697958478/36896621697958478.m3u8&quot;}, {&quot;text&quot;: &quot;If retinoscopy is done at 1m distance,the correction factor used while prescribing the glasses is 1D with retinoscopy performed at a distance of 50cm,the correction factor will be:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2D&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1.5D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1D&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 2D&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29528621697958501/29528621697958501.m3u8&quot;}, {&quot;text&quot;: &quot;Pincushion distortion with aphakic glasses is due to :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Periphery of the lens magnifying more than the centre of the lens&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Centre of the lens magnifying more than the periphery of the lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thickness of the lens&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Size of the lens&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Periphery of the lens magnifying more than the centre of the lens&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19359021697958525/19359021697958525.m3u8&quot;}, {&quot;text&quot;: &quot;Miotics are used in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Divergent squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Convergent squint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Paralytic squint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Convergent squint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15335141697958541/15335141697958541.m3u8&quot;}, {&quot;text&quot;: &quot;definition of blindness according to WHO :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Less than 1/60&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Less than 3/60&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Less than 6/60&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Less than 6/18&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Less than 3/60&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39835171697958555/39835171697958555.m3u8&quot;}, {&quot;text&quot;: &quot;A myope with power of -3D will have minification of image by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;8%&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 6%&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64622781697958573/64622781697958573.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 51 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test13" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Uveitis&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Uveitis&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                44 Questions | 232 Total Marks | 54 min Duration | ~73.64 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which cell type is most typically seen in KP of non-granulomatous uveitis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PMN cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Monocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphocytes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plasma cells&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lymphocytes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13514381697954956/13514381697954956.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about sympathetic ophthalmitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Earliest sign is retrolental flare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Most of the cases occur within two weeks of injury&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Uveal antigen has been implicated as the responsible exciting agent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;First symptom is loss of accommodation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Most of the cases occur within two weeks of injury&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75300561697954973/75300561697954973.m3u8&quot;}, {&quot;text&quot;: &quot;Subacute anterior uveitis associated with raised intraocular pressure can be treated by all of the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acetazolamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cylopentolate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pilocarpine&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pilocarpine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77213851697954987/77213851697954987.m3u8&quot;}, {&quot;text&quot;: &quot;Dalen-Fuch’s Nodules are seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mycotic endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phacotoxic endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bacterial endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sympathetic ophthalmitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sympathetic ophthalmitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2506611697954999/2506611697954999.m3u8&quot;}, {&quot;text&quot;: &quot;Type of synechiae in iris bombe is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Total&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Goniform&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ring&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Filiform&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ring&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3406081697955042/3406081697955042.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following diseases are associated with HLA-B27 uveitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Behcet’s disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ankylosing spondylitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Reiter’s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Behcet’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59271321697955057/59271321697955057.m3u8&quot;}, {&quot;text&quot;: &quot;Commonest infection causing blindness in adults :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Toxocariasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Toxoplasmosi gondii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Taenia solium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plasmodium&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Toxoplasmosi gondii&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3027341697955071/3027341697955071.m3u8&quot;}, {&quot;text&quot;: &quot;First sign of sympathetic ophthamia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retrolental flare&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Aqueous flare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dilated pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Constricted pupil&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Retrolental flare&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38911181697955087/38911181697955087.m3u8&quot;}, {&quot;text&quot;: &quot;Circularis Iridis major is seen at:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ciliary body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Root of iris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Collarette of iris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pupillary margin of iris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Root of iris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77973341697955102/77973341697955102.m3u8&quot;}, {&quot;text&quot;: &quot;What is the most common complication in recurrent anterior uveitis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staphyloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitreous haemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cataract&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44987291697955115/44987291697955115.m3u8&quot;}, {&quot;text&quot;: &quot;Complications of iridocyclitis are all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Secondary glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Complicated cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phthisis bulbi&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Corneal ulcer&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Corneal ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28034221697955128/28034221697955128.m3u8&quot;}, {&quot;text&quot;: &quot;Earliest symptom of sympathetic ophthalmia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Photophobia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Loss of near vision&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Loss of distant vision&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Loss of near vision&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24940411697955147/24940411697955147.m3u8&quot;}, {&quot;text&quot;: &quot;In acute anterior uveitis, pupil is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oval&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Circular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Small, irregular&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dilated&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Small, irregular&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53524521697955161/53524521697955161.m3u8&quot;}, {&quot;text&quot;: &quot;Skin depigmentation, bilateral uveitis and tinnitus are features of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vogt- Koyanagi-Harada syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Waardenburg syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Apert syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Werner’s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vogt- Koyanagi-Harada syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66968751697955174/66968751697955174.m3u8&quot;}, {&quot;text&quot;: &quot;All are complications of anterior uveitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Calcification of cornea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retinal detachment&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Retinal detachment&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70839831697955189/70839831697955189.m3u8&quot;}, {&quot;text&quot;: &quot;Candle-Wax spots in the retina is seen in;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Toxocara&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cytomegalo inclusive disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sarcoidosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6069611697955203/6069611697955203.m3u8&quot;}, {&quot;text&quot;: &quot;Aqueous flare is best demonstrated by;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Torch light&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Corneal loupe&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Narrow beam of slit lamp&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Direct ophthalmoscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Narrow beam of slit lamp&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11363261697955216/11363261697955216.m3u8&quot;}, {&quot;text&quot;: &quot;Amsler sign is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posner-Schlossmann syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fuch’s uveitis syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lepromatous uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ocular toxocariasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Fuch’s uveitis syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63668931697955228/63668931697955228.m3u8&quot;}, {&quot;text&quot;: &quot;Causes of heterochromia include all except;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Siderosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Congenital Horner’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Waardenberg’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vogt-Koyanagi-syndrome&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Vogt-Koyanagi-syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3804421697955242/3804421697955242.m3u8&quot;}, {&quot;text&quot;: &quot;Headlight-in-fog appearance of retina is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Toxoplasmosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Toxocara&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cytomegalovirus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Toxoplasmosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55192851697955257/55192851697955257.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 yrs of old presents with Severe, sudden onset of pain, corneal congestion, photophobia and deep anterior chamber in RE. The left eye is normal. X-ray pelvis shows sacro-iliitis. The diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior uveitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intermediate uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scleritis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior uveitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21814821697956032/21814821697956032.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following causes Panuveitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ankylosing spondylitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sympathetic ophthalmitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ankylosing spondylitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69173171697956047/69173171697956047.m3u8&quot;}, {&quot;text&quot;: &quot;All are features of acute Uveitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Circumcorneal congestion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Deep anterior chamber&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Miosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Limited movements of globe&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Limited movements of globe&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5781731697956069/5781731697956069.m3u8&quot;}, {&quot;text&quot;: &quot;Snow-banking is typically seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pars planitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Endophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Coat’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Panophthalmitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pars planitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13424171697956082/13424171697956082.m3u8&quot;}, {&quot;text&quot;: &quot;Dangerous area of the eye is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ciliary body&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sclera&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Optic nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ciliary body&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38525261697956096/38525261697956096.m3u8&quot;}, {&quot;text&quot;: &quot;Pathognomonic diagnostic sign of anterior uveitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aqueous flare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratic precipitates&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Constriction of pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Raised IOP&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Keratic precipitates&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5370191697956108/5370191697956108.m3u8&quot;}, {&quot;text&quot;: &quot;Iris pearls are seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes simplex keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Syphilitic uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes Zoster uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lepromatous uveitis.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lepromatous uveitis.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65292911697956121/65292911697956121.m3u8&quot;}, {&quot;text&quot;: &quot;Sign of activity in anterior uveitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aqueous flare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Aqueous cell in the anterior chamber&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Constricted pupil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Raised IOP&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Aqueous cell in the anterior chamber&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64933651697956137/64933651697956137.m3u8&quot;}, {&quot;text&quot;: &quot;Most common complication of pars planitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cystoid macular edema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Band shaped keratopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cystoid macular edema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35001561697956149/35001561697956149.m3u8&quot;}, {&quot;text&quot;: &quot;True statement about Fuch’s heterochromic iridocyclitis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyperpigmented iris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypopigmented iris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior synechiae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Coarse KPs&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Hypopigmented iris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23800891697956166/23800891697956166.m3u8&quot;}, {&quot;text&quot;: &quot;Sympathetic ophthalmia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Unilateral non-suppurative inflammation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral non-suppurative inflammation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bilateral suppurative inflammation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Unilateral suppurative inflammation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bilateral non-suppurative inflammation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33636871697956189/33636871697956189.m3u8&quot;}, {&quot;text&quot;: &quot;The neoantigen causing sympathetic ophthalmia is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lens protein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;ciliary protein&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinal S antigen&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Retinal S antigen&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12483851697956276/12483851697956276.m3u8&quot;}, {&quot;text&quot;: &quot;Posner–Schlossmann syndrome is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Iridocyclitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Corneal ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Conjunctivitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Iridocyclitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31058321697956291/31058321697956291.m3u8&quot;}, {&quot;text&quot;: &quot;Dalen –Fuch’s nodules are seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior segment of eye in sympathetic ophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior segment of eye in sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior segment of eye in sympathetic ophthalmitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior segment of eye in granulomatous uveitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Posterior segment of eye in sympathetic ophthalmitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75442101697956304/75442101697956304.m3u8&quot;}, {&quot;text&quot;: &quot;Anterior ciliary arteries are derived from:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Short PCA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Long PCA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Muscular artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Conjunctival artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Muscular artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71979861697956318/71979861697956318.m3u8&quot;}, {&quot;text&quot;: &quot;Iris Roseola is seen with which of the following disease:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;TB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42559961697956339/42559961697956339.m3u8&quot;}, {&quot;text&quot;: &quot;Transient and recurrent hypopyon is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Behcet’s disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Still’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rheumatoid arthritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Behcet’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29888681697956352/29888681697956352.m3u8&quot;}, {&quot;text&quot;: &quot;All are causes of chronic granulomatous uveitis except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Brucellosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fuch’s heterochromic iridocyclitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Fuch’s heterochromic iridocyclitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54494171697956393/54494171697956393.m3u8&quot;}, {&quot;text&quot;: &quot;Drug of choice of iridocyclitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Atropine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Steroid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pilocarpine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Timolol&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Steroid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49340631697956413/49340631697956413.m3u8&quot;}, {&quot;text&quot;: &quot;Eale’s Disease is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Recurrent anterior uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Recurrent vitreous haemorrhage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Recurrent macular haemorrhage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Recurrent subconjunctival haemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Recurrent vitreous haemorrhage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70328971697956442/70328971697956442.m3u8&quot;}, {&quot;text&quot;: &quot;Lisch nodules on iris is a feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Amyloid oasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberous sclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neurofibromatosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Neurofibromatosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57690291697956457/57690291697956457.m3u8&quot;}, {&quot;text&quot;: &quot;Which uveitis is associated with encephalitis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sympathetic ophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vogt-Koyanagi-Harada syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Behçet&#x27;s disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vogt-Koyanagi-Harada syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65469411697956470/65469411697956470.m3u8&quot;}, {&quot;text&quot;: &quot;All are type 4 hypersensitivity reactions except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Eale’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Disciform keratitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sympathetic ophthalmitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Interstitial Stromal keratitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Interstitial Stromal keratitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64276041697956481/64276041697956481.m3u8&quot;}, {&quot;text&quot;: &quot;All are causes of salt and pepper fundus except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinitis pigmentosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Tuberculosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4000531697956493/4000531697956493.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 54 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

</body>
</html>
