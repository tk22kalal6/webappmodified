<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ENT - Combined Tests</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
</style>
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 0;
    margin: 0;
  }

  button {
    margin: 5px;
    padding: 10px 15px;
    background: #ffffff;
    border: 1px solid #2d3748;
    border-radius: 4px;
    cursor: pointer;
    color: #000000;
    position: relative;
    top: 5px;
    font-size: 14px;
    transition: background 0.2s ease, color 0.2s ease, transform 0.1s ease;
  }

  button:hover {
    background: #f3f4f6;
    color: #000000;
    transform: translateY(-1px);
  }

  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden;
  }

  .iframe-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  .iframe-container iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
  }

  .dropdown-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1100;
  }

  .dropdown-toggle {
    background: #2c5281;
    color: white;
    border: none;
    font-size: 14px;
    padding: 10px 18px;
    border-radius: 6px;
    font-weight: bold;
    letter-spacing: 0.5px;
  }

  .dropdown-toggle:hover {
    background: #24466c;
  }

  .dropdown-menu {
  display: none;
  position: absolute;
  right: 0;              /* keep aligned to right edge of toggle */
  margin-top: 6px;
  background: white;
  border: 1px solid #cbd5e0;
  border-radius: 8px;
  max-height: 350px;
  overflow-y: auto;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  min-width: 250px;
  max-width: 90vw;       /* prevent it from going outside screen */
  word-wrap: break-word; /* wrap long names */
  white-space: normal;   /* allow text to wrap */
  animation: fadeIn 0.2s ease-in-out;
}

.dropdown-menu button {
  display: block;
  width: 100%;
  text-align: left;
  margin: 0;
  padding: 10px 15px;
  border-radius: 0;
  background: transparent;
  color: #2d3748;
  border: none;
  border-bottom: 1px solid #edf2f7;
  font-size: 13px;
  white-space: normal;   /* allow wrapping inside button */
  word-break: break-word;
}

  .dropdown-menu button:hover {
    background: #ebf4ff;
    color: #1a365d;
  }

  .dropdown-menu button:last-child {
    border-bottom: none;
  }

  fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    display: block;
    margin: 10px auto;
  }

  body > section:last-child {
    margin-bottom: 0 !important;
  }
</style>
  
  <script>
  function showTest(id) {
    document.querySelectorAll(".iframe-container").forEach(div => div.style.display = "none");
    document.getElementById(id).style.display = "block";
    document.getElementById("dropdownMenu").style.display = "none";
    window.scrollTo(0, 0);
  }
  function toggleDropdown() {
    const menu = document.getElementById("dropdownMenu");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
  }
  document.addEventListener("click", function(event) {
    const toggle = document.getElementById("dropdownToggle");
    const menu = document.getElementById("dropdownMenu");
    if (!toggle.contains(event.target) && !menu.contains(event.target)) {
      menu.style.display = "none";
    }
  });
  </script>
<script src="../../../access-control.js"></script>
  <script src="../../../block.js"></script>
  <script src="../../../error-handler/link-checker.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5920367457745298"
     crossorigin="anonymous"></script>
</head>
<body>
<script>
      // Initialize access control for protected page
      if (!accessControl.initProtectedPage()) {
        throw new Error('Access denied - redirecting to index.html');
      }
    </script>
<button onclick="history.back()" style="position: absolute; top: 20px; left: 20px; background: transparent; color: white; border: none; padding: 10px; cursor: pointer; z-index: 1001; font-size: 20px;">
  <i class="fas fa-arrow-left"></i>
</button>
  
  <div class="dropdown-wrapper">
  <button class="dropdown-toggle" id="dropdownToggle" onclick="toggleDropdown()">â˜° INDEX</button>
  <div class="dropdown-menu" id="dropdownMenu">
    <button onclick="showTest('test1')">Acoustic_Neuroma</button>
<button onclick="showTest('test2')">Anatomy_and_Physiology_of_Larnyx</button>
<button onclick="showTest('test3')">Anatomy_and_Physiology_of_Nose</button>
<button onclick="showTest('test4')">Audiometric_Tests_and_Miscellaneous</button>
<button onclick="showTest('test5')">Congenital_Anomalies_of_larynx</button>
<button onclick="showTest('test6')">Diseases_Infections_and_Tumors_of_Larynx</button>
<button onclick="showTest('test7')">Diseases_of_Nasal_Septum</button>
<button onclick="showTest('test8')">Epistaxis</button>
<button onclick="showTest('test9')">External_Ear_and_its_Diseases</button>
<button onclick="showTest('test10')">Facial_Nerve_and_its_Disorders</button>
<button onclick="showTest('test11')">Facial_and_Nose_Trauma_including_CSF_Rhinorrhea</button>
<button onclick="showTest('test12')">Image_Based_and_Recent_Updates</button>
<button onclick="showTest('test13')">Inner_Ear_and_its_Diseases</button>
<button onclick="showTest('test14')">Instrument</button>
<button onclick="showTest('test15')">Menieres_Disease</button>
<button onclick="showTest('test16')">Middle_Ear_and_its_Diseases</button>
<button onclick="showTest('test17')">Miscellaneous_Disorders_of_Nose</button>
<button onclick="showTest('test18')">Nasal_Tumors_and_Polyposis</button>
<button onclick="showTest('test19')">Nasopharynx</button>
<button onclick="showTest('test20')">Nerve_Palsies</button>
<button onclick="showTest('test21')">Oral_Cavity</button>
<button onclick="showTest('test22')">Oropharynx_and_hypopharynx</button>
<button onclick="showTest('test23')">Otosclerosis</button>
<button onclick="showTest('test24')">Pharyngeal_Spaces_and_their_Infections</button>
<button onclick="showTest('test25')">Rhino-Sinusitis_and_Complications</button>
<button onclick="showTest('test26')">Stridor_Voice_disorders_Tracheostomy_and_Miscellaneous</button>
</div>
  </div>
  
<div id="test1" class="iframe-container" style="display:block;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Acoustic Neuroma&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Acoustic Neuroma&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                7 Questions | 28 Total Marks | 17 min Duration | ~145.71 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;The earliest nerve to be involved in acoustic neuroma is.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vth nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;VIIth nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;X1 nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;X11 nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vth nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52443861700562053/52443861700562053.m3u8&quot;}, {&quot;text&quot;: &quot;Hitzelbergerâ€™s sign is defined as&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Reduced corneal sensitivity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypoesthesia of the posterior meatal wall&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Paraesthesia of face&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Delayed blink reflex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Hypoesthesia of the posterior meatal wall&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62098981700562072/62098981700562072.m3u8&quot;}, {&quot;text&quot;: &quot;Acoustic neuroma causes the following except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vertigo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ptosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Unilateral deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Loss of corneal reflex&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ptosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18633721700562087/18633721700562087.m3u8&quot;}, {&quot;text&quot;: &quot;The most common site of origin of Acoustic neuroma is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior vestibular division of 8th nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior vestibular division of 8th nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cochlear nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Facial nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inferior vestibular division of 8th nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75589641700562100/75589641700562100.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about retrocochlear hearing loss except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tone decay is faster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Recruitment is present&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Roll over phenomenon is present&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Poor speech discrimination score&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Recruitment is present&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59448941700562114/59448941700562114.m3u8&quot;}, {&quot;text&quot;: &quot;In the internal auditory canal, the vertical crest (Billâ€™s bar) marks a plane between :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior and inferior vestibular nerves&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial and cochlear nerves&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inferior vestibular and singular nerves&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior vestibular and facial nerves&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Superior vestibular and facial nerves&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Explanation:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;â€¢ Billâ€™s Bar is a bony crest located inside the internal auditory canal (IAC). It serves as an important anatomical landmark that separates:&lt;/li&gt;&lt;li&gt;â€¢ Superiorly â†’ Facial nerve (CN VII) Inferiorly â†’ Superior vestibular nerve (a branch of CN VIII, vestibulocochlear nerve) This anatomical division is important in surgical approaches to acoustic neuroma, helping surgeons differentiate the facial nerve from vestibular structures.&lt;/li&gt;&lt;li&gt;â€¢ Incorrect Options:&lt;/li&gt;&lt;li&gt;â€¢ A. Superior and Inferior Vestibular Nerves â€“ Incorrect The superior and inferior vestibular nerves are separated by a horizontal crest (falciform crest), not by Billâ€™s bar. The superior vestibular nerve innervates the utricle, superior semicircular canal, and lateral semicircular canal, while the inferior vestibular nerve supplies the saccule and posterior semicircular canal.&lt;/li&gt;&lt;li&gt;â€¢ B. Facial and Cochlear Nerves â€“ Incorrect The facial nerve (CN VII) and cochlear nerve (CN VIII) are separated laterally within the IAC, but Billâ€™s bar does not divide them. Instead, they are divided by the falciform crest and nerve arrangement in the IAC.&lt;/li&gt;&lt;li&gt;â€¢ C. Inferior Vestibular and Singular Nerves â€“ Incorrect The singular nerve is a small branch from the inferior vestibular nerve, supplying the posterior semicircular canal. Billâ€™s bar does not separate them; they are located in the inferior part of the IAC.&lt;/li&gt;&lt;/ul&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14307621700562126/14307621700562126.m3u8&quot;}, {&quot;text&quot;: &quot;The â€œTullio phenomenon; consists of dizziness induced by sound occurs in all of the following except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Perilymph fistula&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;meniereâ€™s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Post fenestration surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acoustic neuroma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Acoustic neuroma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11431751700562138/11431751700562138.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 17 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test2" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Anatomy And Physiology Of Larnyx&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Anatomy And Physiology Of Larnyx&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                13 Questions | 56 Total Marks | 23 min Duration | ~106.15 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Choose the most appropriate statement regarding anatomy of larynx&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The rima glottidis is the interval between the false cords.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratinizing stratified squamous epithelium lines the true cords.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;The posterior part of the ventricular sinus contains the mucus secreting saccule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The paraglottic and pre-epiglottic spaces are continuous.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. The paraglottic and pre-epiglottic spaces are continuous.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69131571700744866/69131571700744866.m3u8&quot;}, {&quot;text&quot;: &quot;Greater horn and lower portion of the hyoid bone develops from :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;II branchial Arch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;III branchial Arch&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;IV branchial Arch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;V/VI branchial Arch&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. III branchial Arch&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43036991700744876/43036991700744876.m3u8&quot;}, {&quot;text&quot;: &quot;Only vocal fold abductor is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior Cricoarytenoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lateral Cricoarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thyroarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cricothyroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Posterior Cricoarytenoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44704181700744886/44704181700744886.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true of the vocal folds of the larynx except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;They are covered with a mucosa that is innervated by branches of the vagus nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;They are abducted during respiration by contraction of the posterior cricoarytenoid muscles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;They are adducted during swallowing by contraction of the lateral cricoarytenoid muscles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Area below vocal is supplied by internal laryngeal nerve&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Area below vocal is supplied by internal laryngeal nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68966661700744939/68966661700744939.m3u8&quot;}, {&quot;text&quot;: &quot;Chief pitch-changing muscle is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior Cricoarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lateral Cricoarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thyroarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cricothyroid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Cricothyroid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32999281700744974/32999281700744974.m3u8&quot;}, {&quot;text&quot;: &quot;Cartilage present in thyrohyoid ligament, may be mistaken on x-ray as a foreign body when calcified is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cricoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trieceous Cartilage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Corniculate Cartilage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cuneiform Cartilage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Trieceous Cartilage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4771141700745169/4771141700745169.m3u8&quot;}, {&quot;text&quot;: &quot;Vocal ligament is formed by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Squamous epithelium and superficial layer of the lamina propria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intermediate and deep lamina propria&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superficial and intermediate lamina propria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superficial and deep lamina propria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Intermediate and deep lamina propria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54660441700745189/54660441700745189.m3u8&quot;}, {&quot;text&quot;: &quot;Superior margin of the infantâ€™s larynx is at the level of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cervical spine C1&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cervical spine C2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cervical spine C3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cervical spine C6&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cervical spine C1&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71503511700745201/71503511700745201.m3u8&quot;}, {&quot;text&quot;: &quot;Incorrect statement regarding laryngeal innervation is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Internal Branch of the superior laryngeal nerve innervates the laryngeal mucosa above the glottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Muscles are supplied by recurrent laryngeal nerve except cricothyroid which is supplied by external branch of superior laryngeal nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Laryngospasm is mediated by the recurrent laryngeal nerve.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Recurrent laryngeal nerve innervates the laryngeal mucosa inferior to the glottis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Laryngospasm is mediated by the recurrent laryngeal nerve.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75291101700745215/75291101700745215.m3u8&quot;}, {&quot;text&quot;: &quot;Vocal cord is lined by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stratified columnar epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudociliated colummer epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stratified squamous epithelium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cuboidal epithelium&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Stratified squamous epithelium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46319371700745804/46319371700745804.m3u8&quot;}, {&quot;text&quot;: &quot;During strong whisper position of vocal cords is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1.5 mm from midline&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;3.5mm from midline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;7 mm from midline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;9.5 mm from midline&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1.5 mm from midline&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41467401700745227/41467401700745227.m3u8&quot;}, {&quot;text&quot;: &quot;The narrowest portion of an infantâ€™s upper airway is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Carina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottic space&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Supra glottic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Subglottic space&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59350391700745703/59350391700745703.m3u8&quot;}, {&quot;text&quot;: &quot;Pre-epiglottic Space is bounded by all of the following except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyoid bone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyrohyoid membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hyoepiglottic ligament&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Conus elasticus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Conus elasticus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65335321700745729/65335321700745729.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 23 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test3" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Anatomy And Physiology Of Nose&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Anatomy And Physiology Of Nose&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                18 Questions | 72 Total Marks | 28 min Duration | ~93.33 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Most developed paranasal sinus at birth is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Ethmoid sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1285321700738964/1285321700738964.m3u8&quot;}, {&quot;text&quot;: &quot;Largest paranasal sinus is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Maxillary sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14748421700738976/14748421700738976.m3u8&quot;}, {&quot;text&quot;: &quot;Alveolar process of maxilla contains :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Second bicuspid and first and second molars&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Second bicuspid and second and third molars&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;First bicuspid and first and second molars&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;First bicuspid and second and third molars&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Second bicuspid and first and second molars&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ans%203_.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21762611700738986/21762611700738986.m3u8&quot;}, {&quot;text&quot;: &quot;Most anterior cell of anterior ethmoid group is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Agger Nasi Cells&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Onodi Cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Haller Cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fovea Ethmoidalis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Agger Nasi Cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ans%204.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31450661700738997/31450661700738997.m3u8&quot;}, {&quot;text&quot;: &quot;Pick the false statement regarding olfactory pathway :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Only neurons in adult human that replace themselves&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Axones of olfactory nerves are unmyelinated C fibres&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Smallest and slowest fibres in nervous system&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mitral cells are tertiary order neurons&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Mitral cells are tertiary order neurons&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43691371700739007/43691371700739007.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not true about ethmoid air cells&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior ethmoid air cells are 1 to 8&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior and posterior ethmoid air cells are separated by basal lamella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bulla ethmoidalis is the anterior most anterior ethmoidal air cell&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Haller cells are anterior ethmoidal air cell lying close to orbital floor&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Bulla ethmoidalis is the anterior most anterior ethmoidal air cell&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/911561700739017/911561700739017.m3u8&quot;}, {&quot;text&quot;: &quot;The radiological presence of which paranasal sinus appears last in human life&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Frontal sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51035381700739050/51035381700739050.m3u8&quot;}, {&quot;text&quot;: &quot;1st radiological evidence of sphenoid sinus is by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;4-5 mth&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1 yr&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6 yrs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4 yrs&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 4 yrs&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ans%2010_.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11990331700739061/11990331700739061.m3u8&quot;}, {&quot;text&quot;: &quot;Type of sphenoid sinus in adult population is usually:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sellar&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Post seller&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pre seller&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Maximal Pneumatization&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sellar&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10601.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3511471700739071/3511471700739071.m3u8&quot;}, {&quot;text&quot;: &quot;Uppermost extent of the nose as determined by direct visual inspection :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glabella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Radix&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nasion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinion&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Radix&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6330657ans40entqb.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33115621700739082/33115621700739082.m3u8&quot;}, {&quot;text&quot;: &quot;The internal nasal valve (limen nasi) is bordered by of the following structures except the :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal septum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Middle turbinate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Upper lateral cartilage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Middle turbinate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34282721700739094/34282721700739094.m3u8&quot;}, {&quot;text&quot;: &quot;pH of nasal secretion is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;7&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;8&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;9&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 7&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67857111700739105/67857111700739105.m3u8&quot;}, {&quot;text&quot;: &quot;Sphenoidal sinus opens into :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Inferior meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoethmoidal recess&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sphenoethmoidal recess&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8850601700739215/8850601700739215.m3u8&quot;}, {&quot;text&quot;: &quot;Nasolacrimal duct opens into :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inferior meatus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenopalatine recess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Inferior meatus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34737291700739356/34737291700739356.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following bones do not contribute the nasal septum :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lacrimal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Palatine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lacrimal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/ENT-25.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38744671700739377/38744671700739377.m3u8&quot;}, {&quot;text&quot;: &quot;Frontal sinuses appear radiologically at the age of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;12&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 6&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10085601700739389/10085601700739389.m3u8&quot;}, {&quot;text&quot;: &quot;Asymmetrical Congestive Response (The Nasal Cycle) occurs every:-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1-2 hours&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2â€“7 hours&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1-2 mins&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2â€“7 mins&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 2â€“7 hours&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4286321700739400/4286321700739400.m3u8&quot;}, {&quot;text&quot;: &quot;Normal nasofrontal angle is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;105&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;134&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;190&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;125&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 134&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5320514answe82entqb.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62335741700739414/62335741700739414.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 28 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test4" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Audiometric Tests And Miscellaneous&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Audiometric Tests And Miscellaneous&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                31 Questions | 140 Total Marks | 41 min Duration | ~79.35 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;All are true about image shown below except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It is due to interference of transmission of bone conducted sound due to increase in ossicular inertia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Itâ€™s an acoustic dip in 2000 Hz in AC curve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;The notch disappears after stapes surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Middle ear resonance is at 2000 HZ so the notch comes at this frequency&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Itâ€™s an acoustic dip in 2000 Hz in AC curve&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Q%20ent3.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59448431700562971/59448431700562971.m3u8&quot;}, {&quot;text&quot;: &quot;All are subjective tests for audiometry except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tone decay&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Impedance audiometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Speech audiometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pure tone audiometry&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Impedance audiometry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ent%20Q%20280.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17444981700562982/17444981700562982.m3u8&quot;}, {&quot;text&quot;: &quot;According to WHO classification, for severe degree of impairment of hearing is at&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;26-40 db&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;41-55 db&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;56-60 db&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;61-80 db&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 61-80 db&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(837).png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72957771700562997/72957771700562997.m3u8&quot;}, {&quot;text&quot;: &quot;To distinguish between cochlear and post cochlear damage test done is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Brainsterm evoked response&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Impedence audiometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pure tone audiometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Brainsterm evoked response&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34646111700563007/34646111700563007.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given image and comment on â€˜Holeâ€™ Diameter:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;89 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;69 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;19 mm&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;29 mm&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 19 mm&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/83118457154225_460995904649488_3500708034856878080_n.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18758451700563019/18758451700563019.m3u8&quot;}, {&quot;text&quot;: &quot;The pressure gain that results from ossicular coupling in normal ears is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Negligible&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Frequency-dependent&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frequency-independent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Intensity - dependent&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Frequency-dependent&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10958041700563032/10958041700563032.m3u8&quot;}, {&quot;text&quot;: &quot;Resonance Frequencies are natural frequencies that vibrate a mass with the least amount of force. Resonance frequency for Concha is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;800â€“1600 Hz&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;800 Hz.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;4000â€“6000 Hz&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;500â€“2000 Hz&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 4000â€“6000 Hz&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33716901700563042/33716901700563042.m3u8&quot;}, {&quot;text&quot;: &quot;High frequency audiometry is used in â€“&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ototoxicity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Non-organic hearing loss&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meniereâ€™s disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ototoxicity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48955631700563053/48955631700563053.m3u8&quot;}, {&quot;text&quot;: &quot;The incision used in endomeatal approach to the ear is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lempert I incision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rosenâ€™s incision&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lempert II incision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wildeâ€™s incision&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rosenâ€™s incision&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17796481700563063/17796481700563063.m3u8&quot;}, {&quot;text&quot;: &quot;Tuning fork of 512 Hz is used to test the hearing because it is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Better heard&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Better felt&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Produces over tones&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Not heard&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Better heard&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4155971700563411/4155971700563411.m3u8&quot;}, {&quot;text&quot;: &quot;A 22 year old kamla came with impairment of hearing. Rhiinnâ€™s test showed positive result on right side &amp;amp; negative result on left side. Weberâ€™s test showed lateralization to left side :diagnosis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Right sided conductive deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Right sided conductive deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Left sided sensorineural deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Left sided conductive deafness&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Left sided conductive deafness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21535331700563422/21535331700563422.m3u8&quot;}, {&quot;text&quot;: &quot;Fistula test stimulates :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lateral semicircular canal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterior semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cochlea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lateral semicircular canal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68668681700563433/68668681700563433.m3u8&quot;}, {&quot;text&quot;: &quot;False positive fistula test is associated with&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Perilymph fistula&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Malignant sclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cholesteatoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Congenital syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51659551700563443/51659551700563443.m3u8&quot;}, {&quot;text&quot;: &quot;Average thresholds for speech frequency are:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;128, 250, and 500 Hz&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;250, 500, and 1000 Hz&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;128, 1000, and 2000 Hz&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;500, 1000, and 2000 Hz&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 500, 1000, and 2000 Hz&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15768241700563489/15768241700563489.m3u8&quot;}, {&quot;text&quot;: &quot;Type C tympanogram suggest:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tympanosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Effusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Eustachian tube dysfunction&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Eustachian tube dysfunction&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77214331700563500/77214331700563500.m3u8&quot;}, {&quot;text&quot;: &quot;Acoustic reflex is typically elicited at :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;30 dB above threshold..&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;50 dB above threshold. .&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;60 dB above threshold. .&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;70 dB above threshold. .&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 70 dB above threshold. .&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73525601700563509/73525601700563509.m3u8&quot;}, {&quot;text&quot;: &quot;In Bingâ€™s test on alternately compressing and relaxing the tragus, the sound increases and decreases; this indicates:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sensorineural deafness&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adhesive otitis media&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CSOM&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sensorineural deafness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5519741700563521/5519741700563521.m3u8&quot;}, {&quot;text&quot;: &quot;Use of instrument shown in Fig provides all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Magnification&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Assessment of movement of the tympanic membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Removal of foreign body from the ear&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;As applicator for the powdered antibiotic of ear&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Removal of foreign body from the ear&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/323712q320entqb.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63862601700563532/63862601700563532.m3u8&quot;}, {&quot;text&quot;: &quot;False regarding hearing assessment in newborn:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Done for all normal babies to assess hearing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Using BERA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Using OAE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Using pure tone audiometry&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Using pure tone audiometry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42902261700563542/42902261700563542.m3u8&quot;}, {&quot;text&quot;: &quot;Recording of evoked neuroelectrical events from the auditory nerve and cochlea in response to auditory clicks via air conduction is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Electrocochleography&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otoacoustic Emissions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Auditory Brainstem Response&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acoustic Reflex Testing&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Electrocochleography&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29346221700563556/29346221700563556.m3u8&quot;}, {&quot;text&quot;: &quot;Recruitment phenomenon is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;ASOM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CSOM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Traumatic perforation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Endolymphatic hydrops&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Endolymphatic hydrops&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22949801700563567/22949801700563567.m3u8&quot;}, {&quot;text&quot;: &quot;Peak V in Auditory Brainstem Response (ABR) suggest :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Eighth nerve (proximal segment)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Eighth nerve (distal segment)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral lemniscus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferior Colliculus.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lateral lemniscus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70632951700563579/70632951700563579.m3u8&quot;}, {&quot;text&quot;: &quot;Minimum hearing loss is seen in which of the following lesions of conductive apparatus.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Complete obstruction of ear canal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ossicular interruption with intact drum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ossicular interruption with perforation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Closure of oval window.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Complete obstruction of ear canal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43383581700563590/43383581700563590.m3u8&quot;}, {&quot;text&quot;: &quot;The center for stapedial reflex is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior olivary complex&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Medial geniculate body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior colliculus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral lemniscus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Superior olivary complex&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28031011700563603/28031011700563603.m3u8&quot;}, {&quot;text&quot;: &quot;Type V curve of Bekesy audiometry is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Normal hearers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cochlear lesion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retrocochlear lesion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Non-organic hearing loss&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Non-organic hearing loss&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66654691700563613/66654691700563613.m3u8&quot;}, {&quot;text&quot;: &quot;Most reliable test for eustachian tube dysfunction:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Politzer test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tympanometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;VEMP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinomanometry&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tympanometry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13227211700563628/13227211700563628.m3u8&quot;}, {&quot;text&quot;: &quot;An audiogram of an individual is given below Degree of hearing handicap is ;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;24%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;34%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;42%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;50%&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 24%&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ent%20332.png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59302991700563653/59302991700563653.m3u8&quot;}, {&quot;text&quot;: &quot;Lombard test is done for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Presbycusis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudohypacusis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;ASOM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CSOM&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pseudohypacusis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16599231700563666/16599231700563666.m3u8&quot;}, {&quot;text&quot;: &quot;Etiology for pulsatile tinnitus includes the followings except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Arteriovenous malformation of neck.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glomus jugulare tumors.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hyperthyroidism&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Otosclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37173131700563678/37173131700563678.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about lasers in ENT except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Argon and KTP laser are visible lasers where as CO 2 laser and Nd YAG lasers are invisible&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CO 2 laser is the most frequently used laser in ENT surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Silicon Endotracheal tube wrapped with metallic foil should be used for laser assisted laryngeal surgeries&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CO 2 laser can pass through the flexible endoscopes&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. CO 2 laser can pass through the flexible endoscopes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9802591700563689/9802591700563689.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the investigation:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Politzer test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tympanometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;VEMP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Electrocochleography&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tympanometry&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/2002843q14entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67181821700563714/67181821700563714.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 41 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test5" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Congenital Anomalies Of Larynx&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Congenital Anomalies Of Larynx&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                7 Questions | 32 Total Marks | 17 min Duration | ~145.71 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Most common congenital anomaly of larynx :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Laryngeal web&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laryngomalacia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Laryngeal stenosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vocal and palsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Laryngomalacia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2185821700563913/2185821700563913.m3u8&quot;}, {&quot;text&quot;: &quot;1day old child presented with weak cry at birth, aphonia and inspiratory stridor. Incomplete recanalization was considered.Most common site of defect would be at :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supraglottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hypopharynx&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Glottic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65348381700563924/65348381700563924.m3u8&quot;}, {&quot;text&quot;: &quot;A child born with 80 % subglottic stenosis should be graded as:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grades I&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Grades II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Grades III&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Grades IV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Grades III&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50347911700563935/50347911700563935.m3u8&quot;}, {&quot;text&quot;: &quot;Endoscopic management (CO2 or KTP laser excision with dilation) for congenital subglottic stenosis is considered for : :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grades I and II&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Grades I,II and III&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Only Grades I&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Grades IV.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Grades I and II&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46081621700563951/46081621700563951.m3u8&quot;}, {&quot;text&quot;: &quot;2 wks old presented with intermittent inspiratory stridor that improves in prone position; worse with feeding and hoarse voice;diagnosis of laryngomalacia was made;which of the given symptoms does not favour the diagnosis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intermittent inspiratory stridor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stridor that improves in prone position&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stridor that worsen with feeding&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hoarse voice&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Hoarse voice&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26496851700563962/26496851700563962.m3u8&quot;}, {&quot;text&quot;: &quot;Rajesh, a 7-month-old child, presents with failure of gaining weight and noisy breathing which becomes worse when the child cries. Laryngoscopy shows a reddish mass in subglottis. Which of the following is not a part of treatment modality in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radiation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tracheostomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Carbon dioxide laser treatment&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Radiation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13737231700563974/13737231700563974.m3u8&quot;}, {&quot;text&quot;: &quot;The statement not true about Laryngeal Web is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital anamoly&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cry is normal in the patient&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CO2 Laser is helpful in its management&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mc Naught Keel is used to prevent the reformation of web after surgery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cry is normal in the patient&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36034531700563988/36034531700563988.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 17 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test6" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Diseases Infections And Tumors Of Larynx&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Diseases Infections And Tumors Of Larynx&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                41 Questions | 164 Total Marks | 51 min Duration | ~74.63 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 40 yr old male teacher presents with complains of hoarseness , vocal fatigue &amp;amp; pain in neck on prolonged phonation. Direct laryngoscopy shows bilateral pin head size swelling on Ant.1/3 &amp;amp; post 2/3 junction of vocal cord. What could be the probable diagnosis ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vocal polyp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal nodule&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acute laryngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute pharyngitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vocal nodule&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17928021700806459/17928021700806459.m3u8&quot;}, {&quot;text&quot;: &quot;All are true of TB larynx except :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mouse nibbled appearance of vocal cord.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Turban epiglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contact ulcer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior part of larynx affected more than anterior part.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Contact ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11594831700806474/11594831700806474.m3u8&quot;}, {&quot;text&quot;: &quot;In case of unilateral superior laryngeal nerve paralysis, posterior commissure points to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Paralyzed side&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Normal side&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Midline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Paralyzed side&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3076311700806507/3076311700806507.m3u8&quot;}, {&quot;text&quot;: &quot;Most common organism causing Adult Supraglottitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parainfluenza&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Respiratory syncytial virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Streptococcus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Streptococcus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34879971700806529/34879971700806529.m3u8&quot;}, {&quot;text&quot;: &quot;Feature suggesting acute epiglottitis includes :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Graudual in onset.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Barky cough.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;High grade fever&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Steeple sign on radiograph.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. High grade fever&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21949921700806539/21949921700806539.m3u8&quot;}, {&quot;text&quot;: &quot;Which virus is the leading cause of the croup syndrome in young children and, when infecting mammalian cells in culture, will hemabsorb red blood cells?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Group B coxsackievirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parainfluenza virus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Adenovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinovirus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Parainfluenza virus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12188591700806550/12188591700806550.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with fever, sore throat and difficulty to swallow. His radiograph is given below. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;TB larynx&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Croup&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acute Epiglottitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngomalacia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Acute Epiglottitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/2687449q187entqb.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77239451700806561/77239451700806561.m3u8&quot;}, {&quot;text&quot;: &quot;Turban Shaped Epiglottis is seen in -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute laryngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute laryngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Laryngeal tuberculosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Carcinoma larynx&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Laryngeal tuberculosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29180821700806964/29180821700806964.m3u8&quot;}, {&quot;text&quot;: &quot;Gold standard test for laryngopharyngeal reflux is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Esophageal motility study&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Barium swallow&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;24 hour double probe pH monitoring&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Esophageal biopsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 24 hour double probe pH monitoring&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23836781700806976/23836781700806976.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about atrophic laryngitis except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;More common in females&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stridor with respiratory difficulty is the chief complaint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Atrophy of laryngeal mucosa and crust formation is seen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral glycerol spray is helpful&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Stridor with respiratory difficulty is the chief complaint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57320941700806986/57320941700806986.m3u8&quot;}, {&quot;text&quot;: &quot;In a patient of acute epiglottitis, all of the following are part of management except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intubation to secure the airway&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Steroids to decrease oedema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Antibiotics to control infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Repeat direct laryngoscopy every hour to assess laryngeal oedema&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Repeat direct laryngoscopy every hour to assess laryngeal oedema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24221301700806997/24221301700806997.m3u8&quot;}, {&quot;text&quot;: &quot;Vocal cord lesions: all are true except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Early vocal cord nodules are managed with speech therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pachydermia laryngis is a premalignant condition&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Reinkeâ€™s oedema is best managed with decortication of vocal cords&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Co 2 laser is very useful in management of juvenile papilloma of larynx&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pachydermia laryngis is a premalignant condition&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/328861700807009/328861700807009.m3u8&quot;}, {&quot;text&quot;: &quot;A 52 year old female patient underwent total thyroidectomy. While surgery, both side superior laryngeal nerves got damaged. What are the expected post operative symptoms of patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Poor quality of voice &amp;amp; aspiration&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Respiratory distress &amp;amp; aspiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Respiratory distress with poor quality of voice&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Respiratory distress with normal voice&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Poor quality of voice &amp; aspiration&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17887671700807107/17887671700807107.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of involvement of TB Laryngitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior interarytenoids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laryngeal surface of epiglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lingual surface of epiglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vocal folds&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Posterior interarytenoids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45009831700807620/45009831700807620.m3u8&quot;}, {&quot;text&quot;: &quot;Pseudoepitheliomatous hyperplasia of the larynx is a feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilitic Laryngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scleroma of the Larynx&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;TB Laryngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Leprosy (Hansenâ€™s Disease)&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Scleroma of the Larynx&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59621241700807636/59621241700807636.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of laryngeal papillomatosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior commissure&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior commissure&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Supraglottis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior commissure&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62013121700808526/62013121700808526.m3u8&quot;}, {&quot;text&quot;: &quot;â€œJuvenile Recurrent Respiratory Papillomatosisâ€ is characterized by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Multiple sites of involvement, recurrent, may resolve spontaneously&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Multiple sites of involvement, recurrence less common, may resolve spontaneously&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Single sites of involvement, recurrent, may resolve spontaneously.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Single sites of involvement, recurrence less common, may resolve spontaneously.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Multiple sites of involvement, recurrent, may resolve spontaneously&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63679121700808565/63679121700808565.m3u8&quot;}, {&quot;text&quot;: &quot;Recurrent respiratory papillomatosis is treated locally by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acyclovir&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cidofovir&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Zinc&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ranitidine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cidofovir&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66595691700808579/66595691700808579.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cartilage involved in Chondromas is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thyroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cricoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Arytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epiglottis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cricoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75940051700808658/75940051700808658.m3u8&quot;}, {&quot;text&quot;: &quot;Tumour arising from schwann cells in posterior aspect of true vocal fold is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chondromas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granular Cell Tumor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphangiomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hemangioma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Granular Cell Tumor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50386381700808713/50386381700808713.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site involved in sarcoidosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trachea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epiglottis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Epiglottis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58277661700808727/58277661700808727.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site involved in wegenerâ€™s granulomatosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supraglottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epiglottis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Subglottic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49165491700808737/49165491700808737.m3u8&quot;}, {&quot;text&quot;: &quot;Joint most commonly involved in rheumatoid arthritis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cricoarytenoid joint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyroarytenoid joint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cricothyroid joint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Interarytenoid region&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cricoarytenoid joint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16743731700808781/16743731700808781.m3u8&quot;}, {&quot;text&quot;: &quot;Incorrect statement regarding reinkeâ€™s space edema is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superficial layer of the lamina propria is involved&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypothyroidism may be associated&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Increased risk of laryngeal cancer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Antireflux medications should be given trial&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Increased risk of laryngeal cancer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41942201700808796/41942201700808796.m3u8&quot;}, {&quot;text&quot;: &quot;Laryngeal ventricle protruding between true and false vocal folds is called :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vocal Fold Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mucus-Retention Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ventricular Prolapse&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngocele&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ventricular Prolapse&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41692411700808820/41692411700808820.m3u8&quot;}, {&quot;text&quot;: &quot;Air filled dilation of the appendix of the ventricle, communicating with laryngeal lumen :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vocal Fold Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mucus-Retention Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ventricular Prolapse&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngocele&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Laryngocele&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67961691700808849/67961691700808849.m3u8&quot;}, {&quot;text&quot;: &quot;52 yrs old male operated for hernia presented with change in voice after 2 days of operation.On indirect laryngeoscopy swelling on medial aspects of arytenoids was seen;Diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Contact Ulcers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal Fold Granulomas&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ventricular Prolapse&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngocele&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vocal Fold Granulomas&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43583381700808875/43583381700808875.m3u8&quot;}, {&quot;text&quot;: &quot;Bilateral inflammatory tissue at junction of anterior and middle third of vocal fold :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Contact Ulcers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal Fold Granulomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal nodules&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vocal polyps&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Vocal nodules&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26274171700808893/26274171700808893.m3u8&quot;}, {&quot;text&quot;: &quot;Unilateral translucent, broad-based vocal fold lesion at junction ofmiddle and anterior vocal folds at free edge is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Contact Ulcers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal Fold Granulomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal nodules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vocal polyps&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Vocal polyps&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29629721700808911/29629721700808911.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of supraglottic Ca is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Infrahyoid epiglottis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Suprahyoid epiglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Aryepiglottic fold&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;False cords&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Infrahyoid epiglottis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2337031700808957/2337031700808957.m3u8&quot;}, {&quot;text&quot;: &quot;Hoarseness, aspiration, dysphagia and odynophagia are feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supraglottis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Supraglottis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Airway obstruction (biphasic stridor), hoarseness, dysphagia, odynophagia are feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supraglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. All&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44340521700810137/44340521700810137.m3u8&quot;}, {&quot;text&quot;: &quot;60 yrs old male presented with insidious dysphagia, referred otalgia and weight loss. Indirect laryngoscopy revealed smooth surface growth involving epiglottic and left aryepiglottic fold with left vocal cord fixed.Direct laryngoscopy and biopsy confirmed the diagnosis of squamous cell carcinoma.C.T scan revealed the invasion of preepiglottic space and para-glottic space. Clinically the patient is suffering from :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supraglottis Carcinoma Stage TÂ¬Â¬1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Supraglottis Carcinoma Stage T3&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Supraglottis Carcinoma Stage T4a&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Supraglottis Carcinoma Stage TÂ¬Â¬4b&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Supraglottis Carcinoma Stage T3&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36451501700810148/36451501700810148.m3u8&quot;}, {&quot;text&quot;: &quot;General contraindications for partial laryngectomies includes all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fixed cords&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cartilage invasion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Supraglottic extension&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Significant oropharyngeal extension&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Supraglottic extension&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/960051700810159/960051700810159.m3u8&quot;}, {&quot;text&quot;: &quot;â€œT1 or T2 (limited T3) supraglottic tumors with good pulmonary function testsâ€ is an indication for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cordectomy via Laryngofissure&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Supraglottic Laryngectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vertical Partial Laryngectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Extended Hemilaryngectomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Supraglottic Laryngectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23797251700810176/23797251700810176.m3u8&quot;}, {&quot;text&quot;: &quot;Staging of glottic carcinoma of larynx with fixation of vocal cords is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;T1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;T2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T3&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;T4&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. T3&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24515451700810192/24515451700810192.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with carcinoma larynx with the involvement of anterior commissure and right vocal cord developed perichondritis of thyroid cartilage. What will be the best treatment for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;He should be given radical radiotherapy as this can cure early tumors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;He should be treated with combination of chemotherapy and radiotherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;He should first receive radiotherapy, and if residual tumor is present, then should undergo laryngectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;He should first undergo laryngectomy and then postoperative radiotherapy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. He should first undergo laryngectomy and then postoperative radiotherapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57082931700810223/57082931700810223.m3u8&quot;}, {&quot;text&quot;: &quot;A tracheostomized patient, with portex tracheostomy tube, in the ward, developed sudden complete blockage of the tube. What will be the best next step for the management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate removal of the tracheostomy tube&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Suction of tube with sodium bicarbonate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Suction of tube with saline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Jet ventilation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Immediate removal of the tracheostomy tube&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24556531700810264/24556531700810264.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following structure is not removed during â€œVertical Partial Laryngectomyâ€&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ventricle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Paraglottic space&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal cord&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arytenoid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Arytenoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45642271700810281/45642271700810281.m3u8&quot;}, {&quot;text&quot;: &quot;The ideal treatment for T1N0M0 glottic cancer larynx is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radiotherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laser cordectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Total laryngectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Decortication of vocal cord&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Laser cordectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15555561700810294/15555561700810294.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given prosthesis ,it is being used for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Preventing Aspiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Voice&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Respiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Voice&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(350).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22129321700810307/22129321700810307.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 51 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test7" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Diseases Of Nasal Septum&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Diseases Of Nasal Septum&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                12 Questions | 48 Total Marks | 22 min Duration | ~110.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 7 year old child while playing fell down. He has developed nasal blockage on both sides and there is swelling around the nose. What is the further treatment of this child?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aspiration of septal swelling&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior Nasal packing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Start Intravenous steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Start Topical Corticosteroid nasal spray&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Aspiration of septal swelling&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69797421700748664/69797421700748664.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following lead to perforation of Cartilaginous part of nasal septum except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lupus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66994801700748674/66994801700748674.m3u8&quot;}, {&quot;text&quot;: &quot;About nasal syphilis which of the following is untrue :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Perforation occurs in septum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Saddle nose deformity may occur&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;In new born, it presents as snuffles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Secondary syphilis is the common association&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Secondary syphilis is the common association&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5833401700748685/5833401700748685.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of saddle nose is: :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trauma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T.B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Trauma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67245701700748697/67245701700748697.m3u8&quot;}, {&quot;text&quot;: &quot;Saddle nose involving both cartilage and bone is best corrected by :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Silicon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Teflon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Iliac crest&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;11th rib&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Iliac crest&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5076791700748741/5076791700748741.m3u8&quot;}, {&quot;text&quot;: &quot;If midline of dorsum from frontonasal angle to the tip is curved: it results in:-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Saddle nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hump nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Crooked nose&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Deviated nose&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Crooked nose&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67244571700748752/67244571700748752.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of septal perforation is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tertiary syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Septoplasties&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cocaine abusers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Granulomatous or vascular diseases&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Septoplasties&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43209951700748763/43209951700748763.m3u8&quot;}, {&quot;text&quot;: &quot;Crooked nose involves&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Septum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dorsum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both septum and dorsum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Both septum and dorsum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8584971700748774/8584971700748774.m3u8&quot;}, {&quot;text&quot;: &quot;Cottle test is done to rule out obstruction at the level of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Choanal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nasal valve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Attic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Turbinate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Nasal valve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66424441700748786/66424441700748786.m3u8&quot;}, {&quot;text&quot;: &quot;Reduction rhinoplasty is for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hump nose&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Narrow nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Crooked nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Saddle nose&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hump nose&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15307891700748796/15307891700748796.m3u8&quot;}, {&quot;text&quot;: &quot;Upper respiratory gummas can lead to perforation of the nasal septum or palate in which of the following conditions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Primary syphilis.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Secondary Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Late Syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Late Syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23671681700748812/23671681700748812.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the surgical procedure:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Submucous Resection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Augmentation rhinoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Reduction rhinoplasty&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Le Fort I fracture reduction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Reduction rhinoplasty&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6327345q3entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48128681700748823/48128681700748823.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 22 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test8" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Epistaxis&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Epistaxis&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 20 Total Marks | 15 min Duration | ~180.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;85 yrs old ramu presented with nasal bleed;on examination person was too anaemic.Bleeding didnâ€™t responded to anterior nasal packing.Most common site of bleed in such clinical situation would be?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Littleâ€™s area&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retro-columellar region&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Woodruffâ€™s plexus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Both littleâ€™s area and retro-columellar region&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Woodruffâ€™s plexus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20741531700564203/20741531700564203.m3u8&quot;}, {&quot;text&quot;: &quot;MC cause of epistaxis in 3 years old child :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal polyp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Foreign body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Upper respiratory catarrh&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trauma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Trauma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51282791700564214/51282791700564214.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following statements regarding epistaxis is untrue:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior epistaxis is more common&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Woodruffâ€™s plexus appear to originate from posterior pharyngeal wall and arterial in origin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;In young persons venous bleeding is more common&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior epistaxis usually occur after 40 yrs.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Woodruffâ€™s plexus appear to originate from posterior pharyngeal wall and arterial in origin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24438961700564225/24438961700564225.m3u8&quot;}, {&quot;text&quot;: &quot;Kiesselbachâ€™s Plexus (Littleâ€™s area) is contributed by all of the following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior ethmoidal.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior ethmoidal.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Greater palatine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenopalatine arteries&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Posterior ethmoidal.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68245721700564235/68245721700564235.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not ligated in case of epistaxis control?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior ethmoidal artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;External carotid artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Internal carotid artery&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Internal carotid artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22157561700564248/22157561700564248.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test9" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;External Ear And Its Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;External Ear And Its Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                23 Questions | 92 Total Marks | 33 min Duration | ~86.09 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;No cartilage is found between tragus and the crux of helix ; this area is called :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tragus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antitragus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cymba conchae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Incisura terminalis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Incisura terminalis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64860441700551741/64860441700551741.m3u8&quot;}, {&quot;text&quot;: &quot;Dimension of tympanic membrane is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;10 mm tall,9 mm wide and 0.1 mm thick&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1 mm tall,9 mm wide and 0.1 mm thick&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;10 mm tall,9 mm wide and 1 mm thick&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1 mm tall,9 mm wide and 1 mm thick&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 10 mm tall,9 mm wide and 0.1 mm thick&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73048801700551755/73048801700551755.m3u8&quot;}, {&quot;text&quot;: &quot;The following structure represents all the three components of the embryonic disc:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tympanic membrane&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Meninges&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tympanic membrane&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55676281700551768/55676281700551768.m3u8&quot;}, {&quot;text&quot;: &quot;Most of the medial surface of pinnae is supplied by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Greater auricular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lesser occipital&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Auricotemporal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;A &amp;amp; B&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. A &amp; B&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47975671700551976/47975671700551976.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the congenital abnormality:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bat ear&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mozart ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Wildermth ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mondini dysplasia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bat ear&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5910073q264entqb.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13498461700552009/13498461700552009.m3u8&quot;}, {&quot;text&quot;: &quot;Instrumentation of the external canal can cause nausea or coughing through stimulation of the:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;5th cranial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;7th cranial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;9th cranial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;10th cranial nerve&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 10th cranial nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21270901700552024/21270901700552024.m3u8&quot;}, {&quot;text&quot;: &quot;External ear canal is fully formed by: -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6th wk&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;8th wk&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;20th wk&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;28th wk&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 28th wk&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67114131700552043/67114131700552043.m3u8&quot;}, {&quot;text&quot;: &quot;Direction of water jet while doing syringing of ear should be :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Poster superior&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterosuperior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posteroinferior&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Poster superior&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20756421700552072/20756421700552072.m3u8&quot;}, {&quot;text&quot;: &quot;A new born presents with bilateral microtia and external auditory canal atresia. Corrective surgery is usually performed is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;&amp;lt; 1 year of age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;5-7 years of age&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Puberty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adulthood&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 5-7 years of age&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29493621700552083/29493621700552083.m3u8&quot;}, {&quot;text&quot;: &quot;After rupture of tympanic membrane the hearing loss is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;10-40 dB&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;5-15 dB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;20 dB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;300 dB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 10-40 dB&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77707221700552094/77707221700552094.m3u8&quot;}, {&quot;text&quot;: &quot;Last component of the pinna to develop is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tragus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lobule&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Helix&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Antihelix&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lobule&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65782221700552117/65782221700552117.m3u8&quot;}, {&quot;text&quot;: &quot;Select the most inappropriate statement regarding â€œKeratosis Obturansâ€&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Is an growth abnormality.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratin plugs should be initially removed with acetic acid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Usually bilateral&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Associated with frequent ear discharge&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Associated with frequent ear discharge&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66435691700552130/66435691700552130.m3u8&quot;}, {&quot;text&quot;: &quot;Wet Newspaperâ€™ like appearance in external auditory canal is a feature of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Localised otitis externa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otomycosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Exostosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diffuse otitis externa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Otomycosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75007231700552140/75007231700552140.m3u8&quot;}, {&quot;text&quot;: &quot;Keratosis obturans is caused due to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Abnormal collection of cerumen in the outer part of external auditory canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Abnormal collection of cerumen in the deeper part of external auditory canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Abnormal epithelial migration of skin of external auditory canal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chronic foul smelling ear discharge present in external auditory canal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Abnormal epithelial migration of skin of external auditory canal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68637941700552152/68637941700552152.m3u8&quot;}, {&quot;text&quot;: &quot;Constriction of the helix and scapha lead to:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Protruding Ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cryptotia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cup Ear Deformity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Colobomata&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cup Ear Deformity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43205861700552163/43205861700552163.m3u8&quot;}, {&quot;text&quot;: &quot;True unilateral neoplastic benign outgrowth in the external auditory canal:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Osteoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratosis Obturans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exostoses&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Osteoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42097651700552173/42097651700552173.m3u8&quot;}, {&quot;text&quot;: &quot;External auditory canal cholesteatoma caused by blockage of the EAC permitting accumulation of epithelial debris is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Osteoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratosis Obturans&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exostoses&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Keratosis Obturans&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73114841700552185/73114841700552185.m3u8&quot;}, {&quot;text&quot;: &quot;Appropriate treatment for an acute stable hematoma of the pinna of the ear includes which of the following measures?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ice packs and prophylactic antibiotics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Excision of the hematoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Needle aspiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Incision, drainage, and pressure bandage&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Incision, drainage, and pressure bandage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32348001700552197/32348001700552197.m3u8&quot;}, {&quot;text&quot;: &quot;Multiple or bilateral smooth sessile protrusions of the medial bony canal is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Osteoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratosis Obliterans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exostoses&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Exostoses&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68024881700552209/68024881700552209.m3u8&quot;}, {&quot;text&quot;: &quot;Most common organism associated with â€œOsteomyelitis of the Skull Baseâ€™:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Streptococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;H.influenzae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pseudomonas&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3904251700552219/3904251700552219.m3u8&quot;}, {&quot;text&quot;: &quot;Clinical evidence of malignant otitis externa with infection of soft tissues beyond the external auditory canal but negative Tc-99 Bone scan is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stage 1&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stage 2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stage 3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Stage 4&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Stage 1&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28823351700552230/28823351700552230.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about malignant otitis externa except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Skull base osteomyelitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Technetium scan is more useful in the prognostic evaluation of this entity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;ESR can be used to monitor the progression of disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Facial nerve is the most commonly involved nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Technetium scan is more useful in the prognostic evaluation of this entity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65991861700552242/65991861700552242.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 year old young Swimmer came with the complaints of itching and pain in right ear since 2 days. On examination the patient cried as the surgeon pulled the ear Pinna. He also noticed that the ear canal was narrowed, edematous and the skin is red. The disease the swimmer is suffering from?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Furuncle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute diffuse external otitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malignant otitis externa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Otomycosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Acute diffuse external otitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40251441700552254/40251441700552254.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 33 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test10" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Facial Nerve And Its Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Facial Nerve And Its Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                7 Questions | 28 Total Marks | 17 min Duration | ~145.71 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;True statement regarding facial palsy:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Common with longitudinal fracture..&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Common with transverse fracture.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Always associated with CSF otorhoea.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Complete nerve palsy.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Common with transverse fracture.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63686571700557805/63686571700557805.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with facial nerve palsy following head trauma with fracture of the mastoid; best intervention here is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate decompression&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wait and watch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facial sling&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Steroids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Immediate decompression&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8549631700557817/8549631700557817.m3u8&quot;}, {&quot;text&quot;: &quot;In a patient of facial nerve injury -----Schirmerâ€™s test shows decresed lacrimation, taste sensation is impaired and stapedial reflex is absent. Where is the level of injury?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Labyrinthine segment of facial nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Horizontal segment of facial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Extratemporal part of facial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vertical segment of facial nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Labyrinthine segment of facial nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16672551700557839/16672551700557839.m3u8&quot;}, {&quot;text&quot;: &quot;A patient of bellâ€™s palsy shows no improvement with 3 weeks of steroid therapy. His electroneuronography reveals no significant facial nerve degeneration . What should be the next step in the management&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acyclovir should be added to treatment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Continue with steroids and repeat assesment&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facial nerve decompression&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Transtympanic dexamethasone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Continue with steroids and repeat assesment&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20038431700557855/20038431700557855.m3u8&quot;}, {&quot;text&quot;: &quot;Regarding facial nerve, labyrinthine segment extends from :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Brainstem to internal auditory canal (IAC).&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meatal foramen of the IAC to the fundus of IAC.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fundus of IAC to geniculate ganglion.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Geniculate ganglion to the second genu.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Fundus of IAC to geniculate ganglion.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22627631700557865/22627631700557865.m3u8&quot;}, {&quot;text&quot;: &quot;The nervus of Wrisberg branch of facial supplies&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anteriosuperior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterioinferior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posteriosuperior&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterioinferior&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Posteriosuperior&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57231351700557879/57231351700557879.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 17 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test11" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Facial And Nose Trauma Including Csf Rhinorrhea&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Facial And Nose Trauma Including Csf Rhinorrhea&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                8 Questions | 36 Total Marks | 18 min Duration | ~135.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Trauma to which bony structure causes the highest risk of cerebrospinal fluid leakage?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vomer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Perpendicular plate of the ethmoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Perpendicular plate of the palatine bone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Premaxilla&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Perpendicular plate of the ethmoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38353501701439098/38353501701439098.m3u8&quot;}, {&quot;text&quot;: &quot;CSF Rhinorrhea occurs due to fracture of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Roof of orbit&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cribriform plate of ethmoidal bone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoid bone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cribriform plate of ethmoidal bone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24706691701439111/24706691701439111.m3u8&quot;}, {&quot;text&quot;: &quot;The pathognomonic test for CSF in suspected CSF rhinorrhea is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glucose concentration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Handkerchief test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Halo sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Beta-2 transferrin&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Beta-2 transferrin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68674591701439121/68674591701439121.m3u8&quot;}, {&quot;text&quot;: &quot;â€œ Jarjawayâ€ fracture of nasal septum from blow from the ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Front&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Below&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial side&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral side&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Front&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42387511701439134/42387511701439134.m3u8&quot;}, {&quot;text&quot;: &quot;â€œChevalletâ€ fracture of nasal septum from blow from the ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Front&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Below&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial Side&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral side&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Below&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22589251701439144/22589251701439144.m3u8&quot;}, {&quot;text&quot;: &quot;All are true regarding CSF rhinorrhoea except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CSF discharge stiffen the handkerchief.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glucose level &amp;gt; 30 mg % is confirmatory&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intrathecal 5% fluroscein stains the CSF bright yellow green&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Discharge is thin,watery and clear&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. CSF discharge stiffen the handkerchief.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23083221701439161/23083221701439161.m3u8&quot;}, {&quot;text&quot;: &quot;Target sign is seen in a blot test from nasal discharge in which of these conditions.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Traumatic CSF leak&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fracture mastoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Spontaneous CSF leak&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meningoencephalocele&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Traumatic CSF leak&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55332841701439181/55332841701439181.m3u8&quot;}, {&quot;text&quot;: &quot;Pathology shown in given coronal CT scan slice should be corrected by?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Open reduction immediately&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Open reduction after 3 days&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Open reduction after 3 weeks&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Open reduction after 3 months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Open reduction after 3 weeks&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7728.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38019871701439192/38019871701439192.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 18 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test12" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Image Based And Recent Updates&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Image Based And Recent Updates&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                49 Questions | 132 Total Marks | 59 min Duration | ~72.24 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Study the given image and comment which of the following nerve will be least commonly involved?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;8&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;9&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;10&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;11&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 8&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/4888797q118entqb.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39416871701430103/39416871701430103.m3u8&quot;}, {&quot;text&quot;: &quot;Spot Diagnosis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Quinke&#x27;s disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Quinsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Palatal hematoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ca Tongue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Quinke&#x27;s disease&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/909782Untitled-1.JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73469641701430116/73469641701430116.m3u8&quot;}, {&quot;text&quot;: &quot;Metastasis of carcinoma buccal mucosa goes to :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Regional lymph node&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Liver&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Heart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Brain&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Regional lymph node&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72099041701430127/72099041701430127.m3u8&quot;}, {&quot;text&quot;: &quot;After laparoscopic appendectomy, patient had fall from bed on her nose after which she had swelling in nose and slight difficulty in breathing. Next step in management :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;IV antibiotics for 7-10 days&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Observation in hospital&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Surgical drainage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Discharge after 2 days and follow up of the patient after 8 weeks&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Surgical drainage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50663061701430139/50663061701430139.m3u8&quot;}, {&quot;text&quot;: &quot;Oral diaphragm is formed by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mylohyoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Genioglossus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hyoglossus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Buccinator&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Mylohyoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11672.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70838381701430155/70838381701430155.m3u8&quot;}, {&quot;text&quot;: &quot;A 70 years old male presented with conductive deafness in left ear.His left tympanic membrane appears dull.On examination he has 3 cms enlarged cervical lymph node.On tympanometry,type B tympanogram is seen.Most likely diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasopharyngeal cancer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cerebellopontine angle tumors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cholesteatomas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Nasopharyngeal cancer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Study the given image and comment on â€˜Holeâ€™ Diameter:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;89 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;69 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;19 mm&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;29 mm&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 19 mm&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6236415q15entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5377241701430230/5377241701430230.m3u8&quot;}, {&quot;text&quot;: &quot;Interpret the following audiogram&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Normal Hearing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Conductive Hearing loss&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sensorineural Hearing loss&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mixed hearing loss&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Conductive Hearing loss&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6497992q36entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6861921701430513/6861921701430513.m3u8&quot;}, {&quot;text&quot;: &quot;A 50 year old male patient presenting with hearing loss complaint was subjected to audiometry. His audiogram is shown below What is the most possible diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Presbyacusis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Noise induced hearing loss&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mild conductive hearing loss&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Noise induced hearing loss&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/279005800.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58014891701430538/58014891701430538.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the audiological investigation whose recordings are shown in the given picture&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cortical evoked response audiometry&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Brainstem evoked response audiometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Transient evoked otoacoustic emissions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Otoacoustic emissions&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Brainstem evoked response audiometry&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/4396055q1entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50689061701430552/50689061701430552.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the abnormality:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bat ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mozaic ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stahl&#x27;s bar&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wildermth ear&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Stahl&#x27;s bar&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/394086q12entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48265831701430575/48265831701430575.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the landmark shown in given image :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lateral semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Superior semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facial recess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Donaldson line.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Donaldson line.&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1668611q2entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75319271700561960/75319271700561960.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the incision shown the given image ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lempert I incision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rosenâ€™s incision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lempert II incision&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wildeâ€™s incision&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Wildeâ€™s incision&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/775718800.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46771921701430617/46771921701430617.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the investigation:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Politzer test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tympanometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;VEMP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Electrocochleography&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tympanometry&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/2002843q14entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67181821700563714/67181821700563714.m3u8&quot;}, {&quot;text&quot;: &quot;Comment on the diagnosis:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Right Conductive Deafness and Left Sensorineural Deafness.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Right Conductive Deafness and Left Conductive Deafness.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right Sensorineural Deafness and Left Conductive Deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Right Sensorineural Deafness and Left Sensorineural Deafness&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Right Sensorineural Deafness and Left Sensorineural Deafness&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5209391ans12entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60598061701430646/60598061701430646.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given image and comment on the diagnosis :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Michel aplasia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mondini dysplasia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bingâ€™s dysplasia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scheibe&#x27;s dysplasia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Michel aplasia&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/236481q11entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36168931701430660/36168931701430660.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given instrument,it is being used for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Preventing Aspiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Voice&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Respiration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Voice&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/229739300.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16472101701430674/16472101701430674.m3u8&quot;}, {&quot;text&quot;: &quot;A 2 year old child presents to emergency with fever and respiratory distress. He has drooling of saliva and her mother told he has been refusing feeds since yesterday. Xray soft tissue neck lateral view is shown in picture. What is the possible diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Prevertebral abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute Retropharyngeal abscess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parapharyngeal abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Peritonsillar abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Acute Retropharyngeal abscess&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/2798558q10entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8527811700747322/8527811700747322.m3u8&quot;}, {&quot;text&quot;: &quot;16 years old promila presents with pain over the cheek . Patient also complains of purulent nasal discharge. Examination Reveals oedema of lower eyelids and purulent discharge in middle meatus. Involvement of which of the following para-nasal sinus is suspected.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary Sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ethmoid Sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Maxillary Sinus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Qbank%20ent%20Q417.png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67889651701430759/67889651701430759.m3u8&quot;}, {&quot;text&quot;: &quot;A 37 year old patient with Diabetic Ketoacidosis is admitted in ICU. On ENT examination, he is found to be having blackish mass in the nose and necrosis of skin of external nose. What is the Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mucormycosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lupus Vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cavernous sinus thrombosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Mucormycosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/3307350q2entimage2.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78143151701431009/78143151701431009.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the surgical procedure:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Submucous Resection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Augmentation rhinoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Reduction rhinoplasty&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Le Fort I fracture reduction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Reduction rhinoplasty&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6327345q3entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48128681700748823/48128681700748823.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given image and comment on the best possible combination:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A-Rhinophyma B-Rhinoscleroma C-Rhinosporodiosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;B-Rhinophyma A-Rhinosporodiosis C-Rhinoscleroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;C-Rhinoscleroma B-Rhinophyma A-Rhinosporodiosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;A-Rhinosporodiosis B-Rhinophyma C-Rhinoscleroma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. A-Rhinophyma B-Rhinoscleroma C-Rhinosporodiosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1086203q4entimage.jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/7716810ans4entimage.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)Ref: Read the text belowSol:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8425871701431077/8425871701431077.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given image and comment on the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Eagleâ€™s syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Apertâ€™s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sicklerâ€™s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Usherâ€™s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Eagleâ€™s syndrome&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5018210q5entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37253291701431088/37253291701431088.m3u8&quot;}, {&quot;text&quot;: &quot;A 33 year old female patient has suddenly developed Aphonia. Her Laryngeal endoscopy picture shows immobile cords as shown in the picture. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bilateral adductor palsy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral abductor palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phonaesthenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Functional Aphonia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bilateral adductor palsy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/291092entdqb.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57273511701431224/57273511701431224.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not an indication of auditory brainstem implant?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neurofibromatosis type 2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Congenital absence of 8th nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mondiniâ€™s dysplasia of cochlea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Michelâ€™s aplasia of cochlea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Mondiniâ€™s dysplasia of cochlea&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/3977677Q7entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15959031701431245/15959031701431245.m3u8&quot;}, {&quot;text&quot;: &quot;A patient of left sided Meniereâ€™s disease does not respond to conventional medical treatment. His episodes are becoming more frequent and he has developed severe sensorineural hearing loss on left side. Identify the treatment being rendered to patient in given picture?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cody Tack procedure&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Partical repositioning manoeuvre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microwick assisted transtympanic Gentamicin Injection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Middle ear Ventilation tube&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Microwick assisted transtympanic Gentamicin Injection&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/3312882q8entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3908281700561970/3908281700561970.m3u8&quot;}, {&quot;text&quot;: &quot;Which membrane separates Scala Vestibuli and Scala Media?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Basilar membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Reissnerâ€™s membrane&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tectorial membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sharpnellâ€™s membrane&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Reissnerâ€™s membrane&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1431060q9entimage.jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11738.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15942031701431322/15942031701431322.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about bone anchored hearing aid except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It has surgically implantable titanium fixture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;it transmits sound directly to cochlea through the bone conduction using the principle of osseointegration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;It is indicated in patients with External Auditory canal atresia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;It is not indicated in patients with chronic discharging ear with hearing loss&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. It is not indicated in patients with chronic discharging ear with hearing loss&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5255041ENTIMAGE.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5435741701431363/5435741701431363.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the prosthesis given in the picture used in treatment of serous otitis media&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ossicular Prosthesis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Partical repositioning manoeuvre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microwick assisted transtympanic Gentamicin Injection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Middle ear Ventilation tube&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Middle ear Ventilation tube&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6888082entimage2.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20576951701431376/20576951701431376.m3u8&quot;}, {&quot;text&quot;: &quot;A newborn baby is brought to the OPD with complaints of noisy breathing. On performing Direct laryngoscopy, you notice the following findings. Which of the following stridor is seen in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Expiratory stridor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inspiratory stridor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Biphasic stridor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of these&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inspiratory stridor&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(783).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 14-year-old boy presents with recurrent episodes of spontaneous nasal bleeding. There is no history of trauma or fall. He gives a history of unilateral nasal obstruction and denasal speech. Contrast-enhanced CT scan of the head is taken, which is shown below. What is this sign known as?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aquino sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antral sign&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Teardrop sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hanging drop sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Antral sign&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(690).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 6-year-old boy presented with recurrent URTI, poor growth, high-arched palate, and impaired hearing. Tympanogram is given as follows. What would be the most appropriate management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grommet insertion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenoidectomy with grommet insertion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Myringotomy with grommet insertion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Myringotomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Adenoidectomy with grommet insertion&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(611).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 65-year-old trumpet player presents with hoarseness of voice, cough, and neck swelling as shown in the image below. The swelling increases in size on coughing and on performing Valsalva maneuver. On pressing the swelling, a gurgling sound is heard. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thyroglossal cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Laryngocele&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Zenkerâ€™s diverticulum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cystic hygroma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Laryngocele&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(558).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Given below is the endoscopic view of the right nasal cavity. Identify the marked structure?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Inferior Turbinate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Superior Turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Uncinate process&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Inferior Turbinate&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(541).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 50-year-old patient presents with multiple nodules in the nasal mucosa. Biopsy from the nodules revealed the presence of Miculikz cells and Russell bodies. Which of the following is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Granulomatosis with polyangitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinosporidiosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rhinoscleroma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(426).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 10-year-old boy comes with complaints of right ear pain, difficulty in opening the mouth, painful swallowing, and fever. The oral cavity examination reveals the following. The external facial examination is unremarkable. Which of the following is likely?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pharyngitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parotid abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bezoldâ€™s Abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Quinsy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Quinsy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(385).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the structure marked in the image.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fossa of Rosenmuller&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tubal tonsil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Opening of eustachian tube&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adenoid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fossa of Rosenmuller&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(364).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The following instrument is useful in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Posterior rhinoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anterior rhinoscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Endoscopic rhinoscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Endoscopic sinus examination&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Anterior rhinoscopy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(297).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 20-year-old female patient presents with features of bilateral conductive hearing loss, not associated with tinnitus. The following image shows the otoscopic findings of her tympanic membranes. What is this sign called?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rising sun sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Schwartze sign&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Setting sun sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cart wheel appearance&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Schwartze sign&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(252).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A child with protruding ears as shown is brought to the OPD by his worried parents. They opt for surgical correction of the defect due to cosmetic reasons. After what age would you proceed with the surgery?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;3 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;6 years&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3 years&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;6 months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 6 years&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(244).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;What is the main use of the instrument seen in the image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Reduction of Zygoma Fracture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Reduction of the fracture of nasal bone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Caldwell-Luc operation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Punching out bone in DCR procedure&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Reduction of the fracture of nasal bone&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13(209).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The test shown in the image is used to detect the abnormality of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal vestibule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Choana&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nasal valve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nasolacrimal duct&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Nasal valve&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14(193).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 32-year-old pregnant woman came with complaints of progressive hearing loss and tinnitus for a few weeks. Pure tone audiometry was done as shown below. Which of the following phenomenon is seen in the above patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Paracusis willisii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tullio phenomenon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Recruitment phenomenon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Roll-over phenomenon&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Paracusis willisii&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(205).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 38-year-old housewife presents with facial weakness on the right side, difficulty in closing the right eye, and loss of taste sensation. Which of the following is false regarding this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes virus is a cause&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It is an idiopathic condition&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Recurrence is uncommon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Males are affected more commonly than females&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Males are affected more commonly than females&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(174).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 38-year-old woman presents with hoarseness and a low-pitched voice. She is a singer and a known smoker. Her laryngoscopy findings are given below. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Reinke&#x27;s edema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal polyp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal nodules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngeal papilloma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Reinke&#x27;s edema&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(141).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A male patient presents with complaints of a sudden loss of taste and hearing loss. He also says he is unable to close one eye and tears do not stop flowing. On examination, there are lesions In the ear as shown in the image given below. What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bell&#x27;s palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ramsay Hunt syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Moebius syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Melkersson-Rosenthal syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ramsay Hunt syndrome&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(138).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient undergoes indirect laryngoscopy as a part of his routine ENT examination. The laryngoscopy image is given below. Identify the structure marked as A:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pyriform fossa&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epiglottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glottis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Esophagus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pyriform fossa&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19(129).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following x-ray view is shown in the image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhese view&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Caldwell&#x27;s view&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Water&#x27;s view&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pierre&#x27;s view&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Caldwell&#x27;s view&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(137).png&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20_1(39).png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 47-year-old female patient presents with hearing loss and tinnitus for the last several years. The hearing loss has been worsening while the tinnitus is pulsatile. Otoscopy reveals the following findings. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cholesteatoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otitis media&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glomus tumor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meniere&#x27;s disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Glomus tumor&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(328).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 59 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test13" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Inner Ear And Its Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Inner Ear And Its Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                31 Questions | 124 Total Marks | 41 min Duration | ~79.35 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Endolymph in the inner ear :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Is a filtrate of blood serum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Is secreted by Stria vascularis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Is secreted by Basilar membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Is secreted by Hair cells&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Is secreted by Stria vascularis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53256791700561457/53256791700561457.m3u8&quot;}, {&quot;text&quot;: &quot;Cochlear implant is done in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scala vestibule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scala tympani&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cochlear duct&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Endolymphatic duct&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Scala tympani&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20472401700561670/20472401700561670.m3u8&quot;}, {&quot;text&quot;: &quot;All are characteristic features of superior semicircular canal dehiscence except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Third window phenomenon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sensorineural hearing loss on audiometry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tullioâ€™s phenomenon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vestibular evoked myogenic potential is a useful investigation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sensorineural hearing loss on audiometry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3128131700561706/3128131700561706.m3u8&quot;}, {&quot;text&quot;: &quot;Incorrect statement regarding nystagmus of â€˜Benign Paroxysmal Positional Vertigoâ€™ ? Â¬: -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Several (2-to 10-) second latency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Geotropic (beating toward the ground)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Horizontal-rotary&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lasts more than 60 seconds before abating&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lasts more than 60 seconds before abating&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45259241700561592/45259241700561592.m3u8&quot;}, {&quot;text&quot;: &quot;In modified kobrak test,labyrinth is considered dead if no response is seen on:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;5 ml water&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;10 ml water&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;20 ml water&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;40 ml water&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 40 ml water&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Labyrinthine artery is a branch of: -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Internal carotid artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Basilar artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior cerebellar artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior inferior cerebellar artery&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Anterior inferior cerebellar artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7391981700561444/7391981700561444.m3u8&quot;}, {&quot;text&quot;: &quot;Sensorineural deafness is seen in all of following except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alport syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Treacher Collinâ€™s syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pendredâ€™s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Michaelâ€™s aplasia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Treacher Collinâ€™s syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68673691700561531/68673691700561531.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following would be the most appropriate treatment for rehabilitation of a patient, who has bilateral profound deafness following surgery for bilateral acoustic schwannoma :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bilateral high powered digital hearing aid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral cochlear implants&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Unilateral cochlear implant&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Brain stem implant&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Brain stem implant&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69103221700561660/69103221700561660.m3u8&quot;}, {&quot;text&quot;: &quot;Cochlear implants may be associated with:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pneumococcal meningitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial cellulitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Septic jugular vein thrombosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Brain abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pneumococcal meningitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6251371700561649/6251371700561649.m3u8&quot;}, {&quot;text&quot;: &quot;In cochlea, endolymph has potential of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;+80 mv&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;â€“ 80 mv&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;+20 mv&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;â€“ 20 mv&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. +80 mv&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53995281700561470/53995281700561470.m3u8&quot;}, {&quot;text&quot;: &quot;Notch in audiogram shows&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Noise induced hearing loss (NIHL)&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;A frequency of 4000 Hz causes more damage than lower or higher frequencies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Meniereâ€™s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sudden hearing loss&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Noise induced hearing loss (NIHL)&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/308610400.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74973251700561758/74973251700561758.m3u8&quot;}, {&quot;text&quot;: &quot;In monoaural displacusis the lesion is in the :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cochlea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Auditary nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Brain stem&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cerebrum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cochlea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27783551700561692/27783551700561692.m3u8&quot;}, {&quot;text&quot;: &quot;Bone conduction is decreased in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ossicular necrosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ossicular disruption&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tympannic perforation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cochlear disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Cochlear disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65023991700561559/65023991700561559.m3u8&quot;}, {&quot;text&quot;: &quot;Peripheral vertigo is characterized by ;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Severe intensity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vertical nystagmus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Does not fatigue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bilateral nystagmus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Severe intensity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(1245).png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44980721700561579/44980721700561579.m3u8&quot;}, {&quot;text&quot;: &quot;The bony cochlea is a coiled tube makingâ€¦.turns around a bony pyramid calledâ€¦:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2 Â¼, modiolus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2 Â½, helocotrema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;2 Â¾ modiolus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2 Â¾ helicotrema&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 2 Â¾ modiolus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34040721700561404/34040721700561404.m3u8&quot;}, {&quot;text&quot;: &quot;Otoacoustic emissions arise from?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Inner hair cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Outer hair cells&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Organ or Corti&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Brain stem&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Outer hair cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41331911700561519/41331911700561519.m3u8&quot;}, {&quot;text&quot;: &quot;The best tool for hearing screening for NICU or high risk babies&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;OAE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;AABR&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;ECOG&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Impedance Audiometry&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. AABR&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25798951700561731/25798951700561731.m3u8&quot;}, {&quot;text&quot;: &quot;Untrue statement regarding Vestibular neuronitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vertigo lasting days after an upper respiratory infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Associated hearing loss&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;No Associated neurologic sign or symptoms&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sudden onset of vertigo&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Associated hearing loss&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42276461700561348/42276461700561348.m3u8&quot;}, {&quot;text&quot;: &quot;Receptors for rotational acceleration are :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vestibular receptors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otolithic organs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Semicircular canals&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Semicircular canals&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15755231700561493/15755231700561493.m3u8&quot;}, {&quot;text&quot;: &quot;Vertical nystagmus is produced by stimulating :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Horizontal canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Superior canal.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior canal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Posterior canal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61883751700561482/61883751700561482.m3u8&quot;}, {&quot;text&quot;: &quot;Lateral wall of vestibule is formed by: -&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Footplate of the stapes.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Semicircular canals&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Internal acoustic meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Modiolus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Footplate of the stapes.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65752441700561424/65752441700561424.m3u8&quot;}, {&quot;text&quot;: &quot;Bilateral Down-sloping High Frequency SNHL is feature of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ossicular chain discontinuity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Endolymphatic hydrops&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presbycusis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Presbycusis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23801700561625/23801700561625.m3u8&quot;}, {&quot;text&quot;: &quot;Spontaneous otoacoustic emissions :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Does not require external stimulus, not present in all normal ears&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Require external stimulus, not present in all normal ears&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Does not require external stimulus, present in all normal ears&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Require external stimulus, present in all normal ears&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Does not require external stimulus, not present in all normal ears&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76687591700561545/76687591700561545.m3u8&quot;}, {&quot;text&quot;: &quot;Subjective tinnitus is far more common than objective tinnitus; example of such tinnitus is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Arteriovenous malformations&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Palatal myoclonus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tensor tympani muscle spasm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Presbycusis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Presbycusis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50310081700561364/50310081700561364.m3u8&quot;}, {&quot;text&quot;: &quot;Ideal time for treatment of hearing loss for language development is..&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6months&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;2 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;3 year&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 6months&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41371191700561681/41371191700561681.m3u8&quot;}, {&quot;text&quot;: &quot;Electrode of cochlear implant is inserted at :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Round Window&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lateral semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oval window.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vestibular aquidect.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Round Window&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46542921700561636/46542921700561636.m3u8&quot;}, {&quot;text&quot;: &quot;The basilar and tectorial membranes of the cochlea&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Are of a uniform width but vary in thickness within the cochlea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Are of a constant width and thickness throughout the cochlea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vary in both thickness and width in a base-to-apex pattern within the cochlea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Are middle ear structures and are not located within the cochlea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Vary in both thickness and width in a base-to-apex pattern within the cochlea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78103921700561389/78103921700561389.m3u8&quot;}, {&quot;text&quot;: &quot;What is true about auditory neuropathy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tympanometry normal BERA normal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;OAE abnormal BERA normal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;OAE normal BERA abnormal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tympanometry abnormal BERA abnormal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. OAE normal BERA abnormal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48742701700561746/48742701700561746.m3u8&quot;}, {&quot;text&quot;: &quot;In the human, the most commonly affected cells of the inner ear in noise trauma are&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intermediate cells of the stria vascularis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inner hair cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Interdental cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Outer hair cells&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Outer hair cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63155441700561610/63155441700561610.m3u8&quot;}, {&quot;text&quot;: &quot;A Patient has developed Sudden Sensorineural Hearing loss on Right side. What all can be part of management of this patient except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oral steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gentamycin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hyperbaric oxygen therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Transtympanic injection of Dexamethasone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Gentamycin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35190651700561720/35190651700561720.m3u8&quot;}, {&quot;text&quot;: &quot;All are causes of sensorineural deafness except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Old age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cochlear otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Loud sound&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rupture of tympanic membrane&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Rupture of tympanic membrane&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71826091700561504/71826091700561504.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 41 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test14" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Instrument&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Instrument&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                26 Questions | 84 Total Marks | 36 min Duration | ~83.08 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Thomas splint was devised by Sir H.O Thomas for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;To splint fracture shaft of femur&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;To stabilize cervical spine after trauma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;For transportation of polytrauma patients&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;For treating tuberculosis of knee&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. For treating tuberculosis of knee&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho7.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74433251704979812/74433251704979812.m3u8&quot;}, {&quot;text&quot;: &quot;Name of the injury for which this surgery is done :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fracture I/T femur&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fracture S/T femur&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fracture SOF&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fracture head of femur&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fracture I/T femur&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1550638101.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22759661704985630/22759661704985630.m3u8&quot;}, {&quot;text&quot;: &quot;In Thomas splint, most troubling is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ring&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Side bars&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gauze support&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Traction attachment&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ring&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76411771704985682/76411771704985682.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the use of the instrument ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lumbar traction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cervical traction&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tibia traction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Femur traction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cervical traction&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/687138900.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72835061704465623/72835061704465623.m3u8&quot;}, {&quot;text&quot;: &quot;Weight allowed in skeletal traction is up to :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;5kg&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;10kg&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;20kg&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;30kg&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 20kg&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69157621704465634/69157621704465634.m3u8&quot;}, {&quot;text&quot;: &quot;Which statement about Denham pin is true:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It is used to give skeletal traction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It has threads in the center of pin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;It is used to give skeletal traction through calcaneum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All of the above&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. All of the above&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18804211704465664/18804211704465664.m3u8&quot;}, {&quot;text&quot;: &quot;Action of intramedullary â€˜Kâ€™ nail is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Two-point fixation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Three- point fixation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Compression&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Weight concentration&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Three- point fixation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39038851704465731/39038851704465731.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the given device and the indication.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spanning external fixator, fracture shaft tibia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Spanning external fixator, fracture shaft femur&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Spanning external fixator, peri-articular fracture knee&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ilizarov fixator, patellar fracture&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Spanning external fixator, peri-articular fracture knee&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(480).jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1179).JPG&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52577791698573914/52577791698573914.m3u8&quot;}, {&quot;text&quot;: &quot;In which of the following nerve injuries is the instrument shown below used?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radial nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Median nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ulnar nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Volkmanns ischemic contracture&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Radial nerve&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(62).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is true about the type of fixation shown in the image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fracture tibia, Ilizarov fixator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fracture tibia, spanning fixator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fracture femur, spanning fixator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Periarticular fracture of knee, spanning fixator&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Periarticular fracture of knee, spanning fixator&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(771).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 58-year-old post-menopausal lady comes to you with a DEXA report showing a T-score of -2.8 SD. Which of the following braces can be used to prevent pathological vertebral fractures in her?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Milwaukee brace&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SOMI brace&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Boston brace&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Taylor brace&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Taylor brace&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The postoperative X-ray of a patient who underwent femoral nailing is shown below. Which of the following statement is false regarding this nail?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cloverleaf shape provides tensile strength&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Proximal migration of the nail may lead to bursitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Based on the concept of three point fixation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The eye of the nail is useful during its removal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cloverleaf shape provides tensile strength&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(788).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is used to stabilise a fracture of the distal femur as shown in the image below?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rail fixator&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ilizarov fixator&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;K wire binding&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Interlocking nail&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rail fixator&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(737).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the following device.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cock-up splint&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Colle`s cast&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Knuckle bender splint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dynamic finger splint&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cock-up splint&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(619).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;For which of the following conditions would a patient be prescribed the orthosis shown in the image below?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Foot drop&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pilon fracture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Medial tibial stress syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fracture of the calcaneum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Foot drop&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(566).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Following a femoral shaft fracture, your consultant asks you to provide tibial traction. Which of the following will you request from the nurse? 1. Thomas splint 2. K-wire 3. Steinmann pin 4. Denhamâ€™s pin 5. Bohlerâ€™s stirrup 6. Bohler Braun splint&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1,2,4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;3, 5, 6&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3,4,5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1, 2, 3, 4, 5, 6&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 3, 5, 6&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the instrument in the given image that is used in spinal fusion surgery.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herbert screw&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;KÃ¼ntscherâ€™s nail&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Polyaxial pedicle screw&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acutrax screw&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Polyaxial pedicle screw&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(560).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The splint shown in the image is used in the palsy of which nerve?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radial nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Median nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ulnar nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior interosseous nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ulnar nerve&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(540).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Following a road traffic accident, a patient with an intertrochanteric fracture of the femur was treated with the implant shown below. Identify the implant.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Proximal femoral nail&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dynamic hip screw&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Austin Moore prosthesis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herbert screw&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dynamic hip screw&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(438).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the instrument given below.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bone nibbler&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bone curette&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Plate holding forceps&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bone holding forceps&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bone nibbler&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(441).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following instruments can be used in both internal fixation of small bones and Ilizarovâ€™s technique?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Steinmannâ€™s pin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kirschnerâ€™s wire&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Denham pin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Knowles pin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Kirschnerâ€™s wire&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The brace shown in the given image is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Boston brace&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Milwaukee brace&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Taylor brace&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;ASHE brace&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Milwaukee brace&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13(411).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the instrument shown below.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Malleolar screw&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cortical screw&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cancellous screw&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Steinmann pin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cancellous screw&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(381).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the name of the instrument given below:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bent Hohmann retractor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bone holding forceps&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bone distractor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bone curette&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bone holding forceps&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(355).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Following a road traffic accident, a patient develops type Illa compound tibial fracture. Arrange the following external fixators in decreasing order of their stability (highest to lowest). 1. Ilizarov fixator 2. Uniplanar with a single rod 3. Uniplanar with double rod 4. Biplanar frame/Ring with a cylindrical rod&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1&amp;gt;2&amp;gt;3&amp;gt;4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2&amp;gt;4&amp;gt;3&amp;gt;1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1&amp;gt;4&amp;gt;3&amp;gt;2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2&amp;gt;3&amp;gt;1&amp;gt;4&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 1&gt;4&gt;3&gt;2&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The following instrument is used for.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nibbling the ends of the bones&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Holding the bone and plate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Controlled traction of fracture segments&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cutting the K-wire&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Holding the bone and plate&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(338).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 36 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test15" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Menieres Disease&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Menieres Disease&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                6 Questions | 24 Total Marks | 16 min Duration | ~160.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which of the following is not a typical feature of Meniereâ€™s disease?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sensorineural deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vertigo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pulsatile tinnitus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fluctuating deafness&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pulsatile tinnitus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63518561700561910/63518561700561910.m3u8&quot;}, {&quot;text&quot;: &quot;In a classical case of Meniereâ€™s disease which one of the following statement is true :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Carhartâ€™s Notch is a characteristic feature in puretone audiogram&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Schwartzâ€™s sign is usually present in the tympanic membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Low frequency sensory neural deafness is often seen in pure tone audiogram&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Decompression fallopian canal is the treatment of choice&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Low frequency sensory neural deafness is often seen in pure tone audiogram&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61590651700561923/61590651700561923.m3u8&quot;}, {&quot;text&quot;: &quot;Study the audiogram Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CSOM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Noise induced hearing loss.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meniereâ€™s disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Meniereâ€™s disease&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/ent(2).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28126281700561936/28126281700561936.m3u8&quot;}, {&quot;text&quot;: &quot;35 years old male presents with sensory deafness since 1 year,vertigo since 6 months and tinnitus for last week.On tuning fork test weber was lateralised to normal ear and rinne test was positive.Patient is suffering from:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Meniere disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lermoyez syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral sinus thrombophlebitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lermoyez syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15128551700561948/15128551700561948.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the landmark shown in given image :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lateral semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Superior semicircular canal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facial recess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Donaldson line.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Donaldson line.&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1668611q2entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75319271700561960/75319271700561960.m3u8&quot;}, {&quot;text&quot;: &quot;A patient of left sided Meniereâ€™s disease does not respond to conventional medical treatment. His episodes are becoming more frequent and he has developed severe sensorineural hearing loss on left side. Identify the treatment being rendered to patient in given picture?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cody Tack procedure&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Partical repositioning manoeuvre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microwick assisted transtympanic Gentamicin Injection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Middle ear Ventilation tube&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Microwick assisted transtympanic Gentamicin Injection&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/3312882q8entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3908281700561970/3908281700561970.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 16 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test16" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Middle Ear And Its Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Middle Ear And Its Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                36 Questions | 148 Total Marks | 46 min Duration | ~76.67 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 12 year-old patient presented with bleeding from ear, pain, tinnitus and increasing deafness. Examination revealed red swelling/mass behind the intact tympanic membrane that blanches on pressure with pneumatic speculum. Treatments for her include all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Preoperative embolisation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Radiotherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Interferons&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Interferons&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5139471700555347/5139471700555347.m3u8&quot;}, {&quot;text&quot;: &quot;Schwartz operation is also called as&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cortical mastoidectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Modified radical mastoidectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Radial mastoidectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fenestration operation.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cortical mastoidectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70275781700555369/70275781700555369.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 years old male is having Attic cholesteatoma of left ear with lateral sinus thrombophlebitis. Which of the following will be the operation of choice?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intact canal wall mastoidectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Simple mastoidectomy with Tympanoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Canal wall down mastoidectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mastoidectomy with cavity obliteration&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Canal wall down mastoidectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14301051700556920/14301051700556920.m3u8&quot;}, {&quot;text&quot;: &quot;The glomus tumor invasion of jugular bulb is diagnosed by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Carotid angiography&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vertebral venous venography&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CT&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Jugular venography&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Jugular venography&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28098951700556933/28098951700556933.m3u8&quot;}, {&quot;text&quot;: &quot;Hallmark feature of mastoiditis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sagging&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ear Discharge&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ironing of mastoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tenderness&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sagging&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3690441700556944/3690441700556944.m3u8&quot;}, {&quot;text&quot;: &quot;&#x27;Gradenigo triadâ€™ is characteristic of;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Petrous Apicitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial Nerve Paralysis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subperiosteal Abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Labyrinthine Fistula&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Petrous Apicitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23017171700556956/23017171700556956.m3u8&quot;}, {&quot;text&quot;: &quot;Processus cochleariformis is related to:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tendon of tensor tympani&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Basal turns cochlea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Handle of malleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Incus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tendon of tensor tympani&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21438231700556966/21438231700556966.m3u8&quot;}, {&quot;text&quot;: &quot;Features of moderately retracted tympanic membrane are all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Handle of malleus appearance foreshortened&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cone of light is absent or interrupted&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral process of malleus becomes more prominent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Shiny pearly white tympanic membrane&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Shiny pearly white tympanic membrane&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78102841700557032/78102841700557032.m3u8&quot;}, {&quot;text&quot;: &quot;Portion of middle ear around the tympanic orifice of Eustachian tube is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mesotympanum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epitympanum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypotympanum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Protympanum&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Protympanum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78257121700557044/78257121700557044.m3u8&quot;}, {&quot;text&quot;: &quot;Infant Eustachian tube is characterized by all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;About half as long as in the adults&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;The osseous portion is longer than the cartilagenous portion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;It is shorter, horizontal, and wider than that of adults&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The tensor veli palatini muscle is more efficient in infants.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. The tensor veli palatini muscle is more efficient in infants.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23821761700557058/23821761700557058.m3u8&quot;}, {&quot;text&quot;: &quot;Sinus tympani is bounded by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Only subiculum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Only ponticulus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subiculum above and ponticulus below&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subiculum below and ponticulus above&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Subiculum below and ponticulus above&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12914561700557073/12914561700557073.m3u8&quot;}, {&quot;text&quot;: &quot;Kornerâ€™s septum is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Petrosquamous suture..&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Petrotemporal suture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Temporosquamous suture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Petrosquamous suture..&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2516821700557082/2516821700557082.m3u8&quot;}, {&quot;text&quot;: &quot;Most susceptible ossicle in chronic suppurative otitis media is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neck of malleus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Short process of incus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Long process of incus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Neck of stapes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Long process of incus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65943261700557113/65943261700557113.m3u8&quot;}, {&quot;text&quot;: &quot;Tympanic plexus is formed by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Spinal assessory nerve and sympathetic fibres.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vagus nerve and sympathetic fibres&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glossopharyngeal nerve and sympathetic fibres&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arnoldâ€™s and sympathetic fibres.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Glossopharyngeal nerve and sympathetic fibres&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57682201700557137/57682201700557137.m3u8&quot;}, {&quot;text&quot;: &quot;Eustachian tube is lined by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudostratified columnar in bony part and columnar in cartilaginous.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudostratified columnar in both cartilaginous and bony part .&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Columnar in both cartilaginous and bony part .&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudostratified columnar in cartilaginous part and columnar in bony.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pseudostratified columnar in cartilaginous part and columnar in bony.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77632901700557149/77632901700557149.m3u8&quot;}, {&quot;text&quot;: &quot;Patulous eustachian tube seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pregnancy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cleft palate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Down syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;ASOM&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pregnancy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43619681700557162/43619681700557162.m3u8&quot;}, {&quot;text&quot;: &quot;Prussakâ€™s space is bounded below by?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fibers of lateral malleolar fold&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Shrapnellâ€™s membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malleus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Incus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Malleus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60641551700557176/60641551700557176.m3u8&quot;}, {&quot;text&quot;: &quot;What is the type of joint between the ossicles of bear:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fibrous joint&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Primary cartilaginous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Secondary cartilaginous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Synovial joint&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Synovial joint&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4492921700557187/4492921700557187.m3u8&quot;}, {&quot;text&quot;: &quot;Study the given image and choose the most appropriate statement&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Extradural abscess is most common complication&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Combined approach tympanoplasty is canal wall up procedure&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tober Ayer sign is an CT finding&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Patient is suffering from serous otitis media&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Combined approach tympanoplasty is canal wall up procedure&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Q%20ent.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37330231700557202/37330231700557202.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are features of CSOM except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rinne - Positive on the affected side&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Weber - Lateralised to the diseased ear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pure Tone audiometry show conductive hearing loss.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The hearing loss is invariably under 40 dB.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rinne - Positive on the affected side&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65240501700557218/65240501700557218.m3u8&quot;}, {&quot;text&quot;: &quot;Group A of â€˜Austin Kartush classificationâ€™ includes:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Malleus and stapes present&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Malleus and foot plate of stapes present&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malleus absent and stapes present&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Malleus and stapes suprastructure absent&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Malleus and stapes present&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13304771700557229/13304771700557229.m3u8&quot;}, {&quot;text&quot;: &quot;Wullstein classification is used for tubotympanic ear,Considering the classification â€˜Columella tympanoplastyâ€™ is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type I&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Type II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Type III&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type IV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Type III&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77496251700557242/77496251700557242.m3u8&quot;}, {&quot;text&quot;: &quot;A 7 year old male presents to the ER with a two day history of worsening ear pain and discharge. On the day prior to presentation, his parents noted redness behind his right ear, and that his right ear appeared to be sticking out. He had been well until 10 days ago when he started complaining of a cough and runny nose that progressed to include right ear pain and fever. He was evaluated in the clinic 5 days ago and diagnosed with an acute right otitis media. He was placed on amoxicillin and he initially appeared to improve until two days ago when his ear pain recurred and this is now accompanied by ear drainage, redness behind his right ear, and a prominent right pinna which is pointing up and out. The most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otitis externa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otitis media with effusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mastoiditis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Allergic otitis media&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Mastoiditis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Q%20ent2.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18264231700557255/18264231700557255.m3u8&quot;}, {&quot;text&quot;: &quot;Sade classification is related with retraction of pars tensa.Grade 2 includes&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mild retraction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retracted TM touching incus or stapes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;TM touching promontory but moves on seigelisation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;TM touching promontory, does not move&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Retracted TM touching incus or stapes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/734901700557267/734901700557267.m3u8&quot;}, {&quot;text&quot;: &quot;Which is the most common type of congenital ossicular dysfunction?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Isolated stapes defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stapes defect with fixation of footplate and lenticular process involvement&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Defective lenticular process of incus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Stapes defect with fixation of footplate and lenticular process involvement&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46018221700557278/46018221700557278.m3u8&quot;}, {&quot;text&quot;: &quot;Most common intracranial complication of CSOM is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Meningitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Brain abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral sinus thrombosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subdural abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Meningitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57387041700557308/57387041700557308.m3u8&quot;}, {&quot;text&quot;: &quot;Infection of CNS spreads to middle ear through:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cochlear aqueduct&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Endolymphatic sac&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphatics route&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fissure of Hyrtl&#x27;s&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Fissure of Hyrtl&#x27;s&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49996621700557319/49996621700557319.m3u8&quot;}, {&quot;text&quot;: &quot;Light house sign is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Serous otitis media&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;ASOM&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CSOM&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Otic hydrocephalus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. ASOM&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16219721700557339/16219721700557339.m3u8&quot;}, {&quot;text&quot;: &quot;The brown sign is seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Glomus tumour&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meniereâ€™s disease.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acoustic neuroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Glomus tumour&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7411701700557355/7411701700557355.m3u8&quot;}, {&quot;text&quot;: &quot;A 5 year old patient presents with the history of hearing loss. On examination he is found to have a pearly white mass behind the intact tympanic membrane.What is the most possible diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital cholesteatoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exostosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Congenital cholesteatoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52162311700557375/52162311700557375.m3u8&quot;}, {&quot;text&quot;: &quot;A child presents with ear infection with foul smelling discharge.On futher exploration a small perforation is found in the pars flaccida of the tympanic membrane.Most appropriate next step in the management would be :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tympanoplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Topical antibiotics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;I.V antibiotics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mastoid exploration&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Mastoid exploration&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38040511700557389/38040511700557389.m3u8&quot;}, {&quot;text&quot;: &quot;25 yrs old ramesh presented with irregular fever having one or more peaks in a day,headache and general weakness.Local examination reveals tenderness over mastoid. External compression of jugular vein results in no rise in CSF,patient was suffering from:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lateral Sinus Thrombophlebitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Otitic Hydrocephalus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subacute Mastoiditis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Labyrinthine Fistula&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lateral Sinus Thrombophlebitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74658281700557401/74658281700557401.m3u8&quot;}, {&quot;text&quot;: &quot;â€œInvagination of TM from attic part of pars tensa is form of retraction pocketâ€ is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ruediâ€™s theory&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wittmaackâ€™s theory&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Habermannâ€™s theory&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sadeâ€™s theory&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Wittmaackâ€™s theory&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57542721700557413/57542721700557413.m3u8&quot;}, {&quot;text&quot;: &quot;All of the given features suggest unsafe CSOM except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Profuse discharge&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fleshy polyp.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mixed deafness.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Attic perforation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Profuse discharge&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8185071700557423/8185071700557423.m3u8&quot;}, {&quot;text&quot;: &quot;All are clinically applicable statements to glomus Jugulare except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intralesional Bleomycin is standard therapy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erosion of caroticojugular spine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Biopsy is avoided in this patient&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Brown sign on pneumatic otoscopy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Intralesional Bleomycin is standard therapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60048921700557435/60048921700557435.m3u8&quot;}, {&quot;text&quot;: &quot;Which is not found on the medial wall of middle ear&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Processus Cochleariformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial Recess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Secondary tympanic membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subiculum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Facial Recess&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52892861700557446/52892861700557446.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 46 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test17" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Miscellaneous Disorders Of Nose&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Miscellaneous Disorders Of Nose&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                19 Questions | 80 Total Marks | 29 min Duration | ~91.58 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Rhinitis sicca is most commonly seen&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior nares&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior nares&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Supreme meatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior meatus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior nares&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38790511701437861/38790511701437861.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are causes of Rhinolalia Clauses except-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasopharyngeal carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypertrophied adenoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Allergic Rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Velopharyngeal insufficiency&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Velopharyngeal insufficiency&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37937741701437874/37937741701437874.m3u8&quot;}, {&quot;text&quot;: &quot;Hypernasality with stridor is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Unilateral abductor palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral abductor palsy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Laryngomalacia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bilateral abductor palsy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69211111701438150/69211111701438150.m3u8&quot;}, {&quot;text&quot;: &quot;The commonest cause of unilateral mucopurulent rhinorrhoea in a child is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Foreign body&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenoids which are blocking the airways&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Deviated nasal septum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inadequately treated acute frontal sinusitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Foreign body&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30519201701438167/30519201701438167.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about ozaena except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Common in female&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It is usually unilateral&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nasal cavity is filled with greenish crusts&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atrophic rhinitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. It is usually unilateral&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1781241701438178/1781241701438178.m3u8&quot;}, {&quot;text&quot;: &quot;Unilateral pain, purulent rhinorrhea and epistaxis are diagnositic of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinophyma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinolith&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratotic Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inverted Papilloma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rhinolith&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38022881701438243/38022881701438243.m3u8&quot;}, {&quot;text&quot;: &quot;A wide roomy nasal cavity with thick crust formation and disfigured hard external nose is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Atrophic Rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinosporidiosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinitis sicca&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Rhinoscleroma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21393101701438254/21393101701438254.m3u8&quot;}, {&quot;text&quot;: &quot;McGovern&#x27;s technique is used for management of :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Foreign body nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atrophic rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypertrophic rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Choanal atresia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Choanal atresia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37114051701438265/37114051701438265.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice of vasomotor rhinitis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vidian neurectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Antibiotics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anti allergic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vidian neurectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39744251701438373/39744251701438373.m3u8&quot;}, {&quot;text&quot;: &quot;Sluderâ€™s neuralgia originates through:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Arnold nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior ethmoid nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenopalatine Ganglion&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trigeminal nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Sphenopalatine Ganglion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27277161701438407/27277161701438407.m3u8&quot;}, {&quot;text&quot;: &quot;20 yrs old male presented with thick sticky nasal discharge and nasal obstruction since last 6 months. On examination hypertrophy of nasal mucosa seen, Which turbinate seem to be involved ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inferior&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Inferior&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15118071701438429/15118071701438429.m3u8&quot;}, {&quot;text&quot;: &quot;20 yrs old female presented with nasal obstruction and epistaxis. On examination nasal cavity was full of foul smelling crusts. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypertrophic rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atrophic rhinitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rhinitis Sicca&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinitis caseosa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Atrophic rhinitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2832171701438454/2832171701438454.m3u8&quot;}, {&quot;text&quot;: &quot;Bloated plasma cells with bifringent inclusions are feature of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypertrophic rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinosporidiosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinitis caseosa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Rhinoscleroma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22873281701438468/22873281701438468.m3u8&quot;}, {&quot;text&quot;: &quot;The earliest sign of congenital syphilis usually rhinitis, or \&quot;snuffles\&quot; appear after?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2-6 days.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2-6 wks&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;7 days&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;7 wks&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 2-6 wks&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30828671701438483/30828671701438483.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of tuberculosis in nasal cavity is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior end of inferior turbinate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior end of inferior turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anterior end of middle turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior end of middle turbinate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior end of inferior turbinate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55018741701438495/55018741701438495.m3u8&quot;}, {&quot;text&quot;: &quot;Most common head and neck symptom of wegenerâ€™s granulomatosis ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ulcerative lesions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Subglottic stenosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Serous chronic otitis media&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Recurrent and chronic sinusitis.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Recurrent and chronic sinusitis.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21786811701438509/21786811701438509.m3u8&quot;}, {&quot;text&quot;: &quot;Untrue statement regarding Non-healing midline granuloma (Polymorphic Reticulosis) is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;No pulmonary involvment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Renal involvement&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Treatment includes radiotherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Treatment includes surgery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Renal involvement&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70845241701438522/70845241701438522.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following sinus is not visible on Waterâ€™s View&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior ethmoid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Posterior ethmoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27809381701438535/27809381701438535.m3u8&quot;}, {&quot;text&quot;: &quot;In Caldwell-Luc procedure the incision is made in the :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Palpebral Sulcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior orbital sulcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chiasmatic sulcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Gingivobuccal sulcus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Gingivobuccal sulcus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 29 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test18" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Nasal Tumors And Polyposis&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Nasal Tumors And Polyposis&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                18 Questions | 72 Total Marks | 28 min Duration | ~93.33 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 2-year-old child is brought to the hospital with a compressible swelling root of nose; most likely diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A-V malformation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lacrimal sac cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ethmoid sinus cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Meningoencephalocele&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Meningoencephalocele&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23399031700824639/23399031700824639.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with a history of chronic bacterial sinusitis presents to the emergency department with a very severe headache. While waiting to be seen, he develops a generalized grand mal seizure. Physical examination, after the seizure is over, demonstrates high fever, exophthalmos, papilledema, and nerve palsies of the VI and III cranial nerves on one side. Which of the following is the most appropriate next step?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Admit to the medical floor for monitoring of progression of symptoms&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Emergency CT scan&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Emergency exploratory surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Emergency ultrasound&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Emergency CT scan&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38941731700824688/38941731700824688.m3u8&quot;}, {&quot;text&quot;: &quot;Symptom not favouring the diagnosis of inverted papilloma :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Unilateral obstruction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinorrhea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Diplopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Translucent blood less mass&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Translucent blood less mass&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6245461700824698/6245461700824698.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of â€˜squamous cell carcinomaâ€™ nasal cavity is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Litterâ€™s area&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inferior turbinate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral wall&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Middle meatus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lateral wall&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38736831700824722/38736831700824722.m3u8&quot;}, {&quot;text&quot;: &quot;Ideal treatment of rhinosporidiosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rifampicin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Excision with cautery at base&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dapasone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laser&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Excision with cautery at base&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18628511700824734/18628511700824734.m3u8&quot;}, {&quot;text&quot;: &quot;Russell body is fond in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinospordisosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Muromycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rhinoscleroma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36768571700824745/36768571700824745.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following sinus is not visible on Waterâ€™s View&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sphenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior ethmoid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Posterior ethmoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16779911700824771/16779911700824771.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following best differentiates antrochoanal polyp from ethmoidal polyp?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;They are multiple&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Best seen on posterior rhinoscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;They are bilateral&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Recurrence on polypectomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Best seen on posterior rhinoscopy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31347731700824787/31347731700824787.m3u8&quot;}, {&quot;text&quot;: &quot;Inverted papilloma is characterized by all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Also called as schneiderian papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seen more often in females&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presents with epistaxis and nasal obstruction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Originates from lateral wall of nose&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Seen more often in females&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50550621700824817/50550621700824817.m3u8&quot;}, {&quot;text&quot;: &quot;Study the figure and diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinophyma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinolith&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratotic Papilloma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inverted Papilloma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rhinophyma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ent%20Q66.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32813381700824829/32813381700824829.m3u8&quot;}, {&quot;text&quot;: &quot;Most common malignant tumour invading skin of nose is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinophyma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rodent ulcer.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;SCC&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Melanoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rodent ulcer.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45311161700824840/45311161700824840.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about nose and sinus malignancy except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Malignancy of infrastructure of maxillary sinus has poor prognosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Woodworker carcinoma is adenocarcinoma of ethmoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ringertz tumour of nose is a premalignant condition&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Esthesioneuroblastoma is a malignant tumour which originates from the olfactory neuroepithelium of nose.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Malignancy of infrastructure of maxillary sinus has poor prognosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64153831700824862/64153831700824862.m3u8&quot;}, {&quot;text&quot;: &quot;According to Ledermanâ€™s classification which of the followingis not included in suprastructure:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Olfactory area of nose&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Respiratory area of nose&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Respiratory area of nose&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47296041700824895/47296041700824895.m3u8&quot;}, {&quot;text&quot;: &quot;Coincidental malignancy in upper respiratory tract with inverted papilloma is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;5%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;4%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;0.1%&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 4%&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58577431700824908/58577431700824908.m3u8&quot;}, {&quot;text&quot;: &quot;Friable, â€œstrawberryâ€ red (vascular) polypoid nasal lesion are feature of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypertrophic rhinitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinosporidiosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rhinoscleroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rhinitis caseosa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rhinosporidiosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60772881700824924/60772881700824924.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of sinonasal melanoma is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nasal septum&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Nasal septum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78697011700824937/78697011700824937.m3u8&quot;}, {&quot;text&quot;: &quot;Madhuri, a 35-year- old teacher, complains of a nasal quality to her voice, as well as a blocked and runny nose. She now has lost her sense of taste and smell. She also complaint of post nasal drip, she has recently been diagnosed as having asthma and has been started on oral steroids inhalers. Examination confirms the polyp-like swellings within the nose on both side. History of an adverse reaction to which drug should be enquired specifically:-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Minoxidil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cisplatin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Aspirin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Neomycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Aspirin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44085021700824952/44085021700824952.m3u8&quot;}, {&quot;text&quot;: &quot;A 14 years boy presents with nasal obstruction, proptosis (Fig),recurrent epistaxis from 3â€“4 years not responding to anterior nasal packing. Which artery is source of bleeding&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Internal maxillary artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ascending pharyngeal artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facial artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anterior Ethmoidal artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Internal maxillary artery&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/ENT.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44967581700824965/44967581700824965.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 28 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test19" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Nasopharynx&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Nasopharynx&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                12 Questions | 48 Total Marks | 22 min Duration | ~110.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;The pharynx, funnel-shaped tube,15 cm long is widest :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Opposite skull base.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Opposite styloid process&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Opposite hyoid.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Opposite thyroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Opposite hyoid.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14364551701441488/14364551701441488.m3u8&quot;}, {&quot;text&quot;: &quot;A 65 year old male presents with cervical lymphadenopathy with recurrent epistaxis. Most likely cause is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Angiofibroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ca Nasopharynx&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rhabdomyosarcoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ca Nasopharynx&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15272961701441500/15272961701441500.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are true about juvenile angiofibroma except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frog face deformity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Weber Fergussonâ€™s transmaxillary approach is ideal for angiofibroma limited to nose &amp;amp; nasopharynx&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Flutamide can induce tumor shrinkage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior margin of sphenopalatine foramen is the most common site of origin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Weber Fergussonâ€™s transmaxillary approach is ideal for angiofibroma limited to nose &amp; nasopharynx&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60251431701441512/60251431701441512.m3u8&quot;}, {&quot;text&quot;: &quot;Trotters triad is seen in carcinoma of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxilla&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Larynx&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nasopharynx&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Nasopharynx&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2341861701441524/2341861701441524.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of tumor in the nasopharynx:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Eustachian tubes.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fossa of RosenmÃ¼ller&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Base of tongue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Post cricoid space&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Fossa of RosenmÃ¼ller&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19365491701441536/19365491701441536.m3u8&quot;}, {&quot;text&quot;: &quot;An inner longitudinal layer of pharynx includes all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stylopharyngeus.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Palatopharyngeus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Salpingopharyngeus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Inferior constrictor&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Inferior constrictor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72294841701441546/72294841701441546.m3u8&quot;}, {&quot;text&quot;: &quot;Interdigitating superior constrictor muscles that form a band at the posterior pharyngeal wall:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Passavantâ€™s Ridge.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rathkeâ€™s Pouch Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sinus of Morgagni&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Torus tubarius&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Passavantâ€™s Ridge.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5058581701441557/5058581701441557.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the structure crosses through sinus of morgagni:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stapedius&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tensor veli palatini&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tensor tympani&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chordae tympani&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tensor veli palatini&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30687431701441570/30687431701441570.m3u8&quot;}, {&quot;text&quot;: &quot;Not a true statement regarding adenoids&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Physiological enlargement continues upto 6 years of age&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenoids do not have capsule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Adenoidectomy is contraindicated in submucous cleft palate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Digital palpation of adenoid tissue should be avoided before removal in adenoidectomy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Digital palpation of adenoid tissue should be avoided before removal in adenoidectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60608431701441581/60608431701441581.m3u8&quot;}, {&quot;text&quot;: &quot;Adenoids are prominent in children upto :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;4 yrs.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;6 yrs.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;10 yrs.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;14 yrs&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 6 yrs.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73706371701441627/73706371701441627.m3u8&quot;}, {&quot;text&quot;: &quot;Tonsils of Gerlach are related with :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lingual tonsil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tubal tonsil&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Faucial tonsil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Luschkaâ€™s tonsil&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tubal tonsil&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74927231701441657/74927231701441657.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following does not form Waldeyerâ€™s ring?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Palatine Tonsils&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Adenoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Jugulodigastric node&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lateral pharyngeal bands.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Jugulodigastric node&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66326911701441670/66326911701441670.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 22 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test20" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Nerve Palsies&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Nerve Palsies&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                6 Questions | 24 Total Marks | 16 min Duration | ~160.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Position of vocal cord in recurrent laryngeal nerve paralysis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gentle abduction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Paramedian&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intermediate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Full abduction&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Paramedian&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74156451700564088/74156451700564088.m3u8&quot;}, {&quot;text&quot;: &quot;Which one of the following lesions of vocal cord is dangerous to life :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bilateral adductor paralysis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral abductor paralysis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Combined paralysis of left side superior and recurrent laryngeal nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Superior laryngeal nerve paralysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bilateral abductor paralysis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37404831700564107/37404831700564107.m3u8&quot;}, {&quot;text&quot;: &quot;Type I thyroplasty is for :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vocal cord medialization&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal cord lateralization&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal cord shortening&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vocal Cord Lengthening&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vocal cord medialization&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38617561700564118/38617561700564118.m3u8&quot;}, {&quot;text&quot;: &quot;Kashima Operation is done for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bilateral adductor palsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bilateral abductor palsy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phonaesthenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Laryngeal paillomatosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bilateral abductor palsy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50523111700564130/50523111700564130.m3u8&quot;}, {&quot;text&quot;: &quot;Lateralisation of vocal cords includes all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cordectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nerve muscle implant&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Injection of Teflon&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arytenoidectomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Injection of Teflon&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19811301700564140/19811301700564140.m3u8&quot;}, {&quot;text&quot;: &quot;Medializing vocal fold by inward lateral compression with an implant is :-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thyroplasty Type I&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thyroplasty Type II&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thyroplasty Type III&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Thyroplasty Type IV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Thyroplasty Type I&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49477581700564150/49477581700564150.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 16 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test21" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Oral Cavity&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Oral Cavity&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                11 Questions | 40 Total Marks | 21 min Duration | ~114.55 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A patient has carcinoma of tongue in the right lateral aspect with lymph node of 4 cm size in level 3 on the left side of neck, what is the stage?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;N0&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;N1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;N2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;N3&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. N2&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/51455581.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72006981706515028/72006981706515028.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following is the high risk premalignant lesion of Ca oral cavity except ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythroplakia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;speckled Leukoplakia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;sideropenic dysphagia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Discoid lupus erythematosus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. sideropenic dysphagia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/77494822.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8225691706515042/8225691706515042.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of oral cancer is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lips&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tongue&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Buccal Mucosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Alveolus of teeth&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tongue&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43841981706515057/43841981706515057.m3u8&quot;}, {&quot;text&quot;: &quot;Stain used to diagnose premalignant conditions of lip is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Crystal violet&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Toluidine blue&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;H and E&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Giemsa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Toluidine blue&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/50969223.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11339131706515069/11339131706515069.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice for carcinoma of lip of less than 1 cm is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radiation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chemotherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Excision&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Radiation and Chemotherapy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Excision&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53391101706515083/53391101706515083.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with cheek cancer has a tumour of 2.5 cm located close to and involving the lower alveolus. A single mobile ipsilateral lymph node measuring 6 cm is palpable. The TNM stage is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;T1N1M0&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;T2N2M0&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T2N1M0&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;T4N2M0&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. T4N2M0&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/57460184.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45792571706515095/45792571706515095.m3u8&quot;}, {&quot;text&quot;: &quot;Carcinoma of tongue most commonly occur at:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dorsum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lateral border of anterior 2/3rd&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lateral border of posterior 1/3rd&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tip&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lateral border of anterior 2/3rd&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33062831706515109/33062831706515109.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following statements best represent Ludwigâ€™s angina?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A type of coronary artery spasm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;An infection of the cellular tissues around submandibular salivary gland&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Esophageal Spasm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retropharyngeal infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. An infection of the cellular tissues around submandibular salivary gland&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/49352345.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41977341706515123/41977341706515123.m3u8&quot;}, {&quot;text&quot;: &quot;Dentigerous cyst arises from:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The root of a caries tooth&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;The Periosteum Of The Fractured Mandible&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;An unerupted permanent tooth&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The sequestrum osteomyelitis of mandible&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. An unerupted permanent tooth&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59663331706515136/59663331706515136.m3u8&quot;}, {&quot;text&quot;: &quot;What are Rushton bodies?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyaline Bodies of odontogenic cyst&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Refractile Bodies In Radicular Cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bodies Seen In Ameloblastoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hyaline bodies seen in dentigerous cyst&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hyaline Bodies of odontogenic cyst&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28937601706515147/28937601706515147.m3u8&quot;}, {&quot;text&quot;: &quot;Abbe-Estlander Flap Is Used For:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lip&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tongue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eyelid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ears&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lip&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/60672409.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12797041704546857/12797041704546857.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 21 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test22" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Oropharynx And Hypopharynx&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Oropharynx And Hypopharynx&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                18 Questions | 72 Total Marks | 28 min Duration | ~93.33 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;All of the following are part of Laryngopharynx except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Post Cricoid area&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pyriform sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vallecula&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior Pharyngeal wall&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Vallecula&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53842421701675623/53842421701675623.m3u8&quot;}, {&quot;text&quot;: &quot;The lingual tonsil are found.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tip of toungue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Near submandibular gland&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Middle of the tongue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pharyngeal tongue&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pharyngeal tongue&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46027931701675660/46027931701675660.m3u8&quot;}, {&quot;text&quot;: &quot;Secondary haemorrhage after tonsillectomy is most commonly seen on?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;6 hours after surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;24 hours after surgery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6 days after surgery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;14 days after surgery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 6 days after surgery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56824331701675753/56824331701675753.m3u8&quot;}, {&quot;text&quot;: &quot;The anterior boundary of the lateral wall of the oropharynx is formed by the :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Median glossoepiglottic fold&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lateral pharyngoepiglottic fold.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Palatoglossal fold&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Palatopharyngeal fold.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Palatoglossal fold&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66245571701675773/66245571701675773.m3u8&quot;}, {&quot;text&quot;: &quot;The superior laryngeal nerve lies deep to a mucosal fold in the lateral wall of the :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pyriform fossae&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Postcricoid Area&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oropharynx&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Base of tongue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pyriform fossae&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9492491701675790/9492491701675790.m3u8&quot;}, {&quot;text&quot;: &quot;The principal sensory and motor supply of the pharynx is by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;IX and X respectively&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;X and IX respectively&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;IX and XI respectively&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IX and XII respectively&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. IX and X respectively&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46373321701675807/46373321701675807.m3u8&quot;}, {&quot;text&quot;: &quot;Lymph nodes located in submental region belongs to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Level IA&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Level IB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sublevels IIA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Level IIB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Level IA&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28978561701675832/28978561701675832.m3u8&quot;}, {&quot;text&quot;: &quot;Ascending pharyngeal artery suppling tonsils is a branch of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lingual artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial artery.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tonsillar artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;External carotid artery.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. External carotid artery.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15890021701675859/15890021701675859.m3u8&quot;}, {&quot;text&quot;: &quot;Least common symptom of acute tonsillitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sore throat&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Odynophagia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cervical adenopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trismus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Trismus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65081271701675878/65081271701675878.m3u8&quot;}, {&quot;text&quot;: &quot;Symptoms of acute tonsillitis with throat swab showing fusiform bacilli and spirochaetes is feature of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diphtheria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vincent angina&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Infectious Mononucleosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aphthous ulcers.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vincent angina&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9767131701675895/9767131701675895.m3u8&quot;}, {&quot;text&quot;: &quot;Most common tonsillar malignancy in children is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mucoepidermoid Ca&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lymphoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;SCC&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adenocell carcinoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lymphoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17646451701675908/17646451701675908.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of oropharynx malignancy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Soft Palate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Base of Tongue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tonsil/Lateral Pharyngeal Wall.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Posterior Pharyngeal Wall.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Tonsil/Lateral Pharyngeal Wall.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43380741701675922/43380741701675922.m3u8&quot;}, {&quot;text&quot;: &quot;Most common variety of oropharynx malignancy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Squamous Cell Carcinoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lymphoepitheliomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphomas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sarcomas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Squamous Cell Carcinoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53364041701675939/53364041701675939.m3u8&quot;}, {&quot;text&quot;: &quot;Most common site of hypopharynx malignancy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pyriform Sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Post cricoid space&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Posterior pharyngeal wall&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Base of tongue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pyriform Sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40886201701675971/40886201701675971.m3u8&quot;}, {&quot;text&quot;: &quot;Primary tumor of post cricoid space involving more than one subsite is included in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;T1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;T2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;T4&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. T2&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73997371701675989/73997371701675989.m3u8&quot;}, {&quot;text&quot;: &quot;Partial Laryngopharyngectomy may be considered for:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;T1â€“T2 pyriform sinus cancer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;T1â€“T2 posterior cricopharyngeal wall cancer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Postcricoid primaries&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cervical esophageal involvement&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. T1â€“T2 pyriform sinus cancer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44441581701676016/44441581701676016.m3u8&quot;}, {&quot;text&quot;: &quot;Space lying between cricopharyngeal and esophagus muscle is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Killianâ€™s Triangle&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Killian-Jamieson Space&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Laimer-Haeckermann Space&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Killian-Jamieson Space&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10267391701676062/10267391701676062.m3u8&quot;}, {&quot;text&quot;: &quot;Recurrent acute tonsillitis is ;&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Documented 9 infections in 1 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Documented 7 infections in 1 year&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Documented 5 infections in 1 year&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Documented 3 infections in 1 year&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Documented 7 infections in 1 year&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45176441701676085/45176441701676085.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 28 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test23" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Otosclerosis&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Otosclerosis&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                9 Questions | 36 Total Marks | 19 min Duration | ~126.67 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 45 years old female with family history of hearing loss from her motherâ€™s side developed hearing problem during pregnancy. Impaired hearing is bilateral, slowly progressive, with bilateral tinnitus. Pure tone audiometry shows apparent bone conduction hearing loss at 2000 Hz. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meniereâ€™s Disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Otitis media with effusion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sigmoid sinus thrombosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Otosclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3656301700557534/3656301700557534.m3u8&quot;}, {&quot;text&quot;: &quot;A 31 year old female patient complaints of bilateral impairment of hearing for the past 5 years. On examination, tympanic membrane is normal and audiogram shows a bilateral conductive deafness. Impedance audiometry show hypomobile tympanogram. All constitute part of treatment, except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hearing aid.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stapedectomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sodium Fluoride.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Gentamicin&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Gentamicin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66510631700557552/66510631700557552.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not an indication for stapedectomy :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Conductive deafness due to fixation of stapes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Air bone gap of atleast 40 dB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presence of Carhart&#x27;s notch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Presence of active otosclerotic foci&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Presence of active otosclerotic foci&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70967001700557576/70967001700557576.m3u8&quot;}, {&quot;text&quot;: &quot;A lady has B/L hearing loss since 4 years which worsened during pregnancy. Type of impedance audiometry graph will be :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ad&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;As&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;C&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. As&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61490921700557601/61490921700557601.m3u8&quot;}, {&quot;text&quot;: &quot;Robinson prosthesis is related with:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meniereâ€™s&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Glomus tumors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Traumatic perforation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Otosclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7626051700557614/7626051700557614.m3u8&quot;}, {&quot;text&quot;: &quot;Gelleâ€™s test is for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;NIHL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sensorineural deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Otosclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41798731700557625/41798731700557625.m3u8&quot;}, {&quot;text&quot;: &quot;Carhartâ€™s notch in audiometery is seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ocular discontinuity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Haemotympanum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Otomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Otosclerosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Otosclerosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74501771700557636/74501771700557636.m3u8&quot;}, {&quot;text&quot;: &quot;The single most important prognostic factor for eventual recovery of facial nerve function is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Presence of voluntary movement&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Less than a 2.0 mA difference on nerve excitability testing, relative to the unparalyzed side&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Greater than a 2.0 mA difference on nerve excitability testing, relative to the unparalyzed side&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;An intact stapedius reflex on topognostic testing&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Presence of voluntary movement&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34910761700557647/34910761700557647.m3u8&quot;}, {&quot;text&quot;: &quot;All the following are true about Ramsay Hunt syndrome except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It has viral etiology&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Involves VII nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Involves VIII nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Results of spontaneous recovery are excellent&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Results of spontaneous recovery are excellent&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64252651700557657/64252651700557657.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 19 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test24" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Pharyngeal Spaces And Their Infections&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Pharyngeal Spaces And Their Infections&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                10 Questions | 40 Total Marks | 20 min Duration | ~120.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Most common source of infection of masticator space is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1st molar&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2nd molar&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3rd molar&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2nd premolar&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 3rd molar&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2751241700747179/2751241700747179.m3u8&quot;}, {&quot;text&quot;: &quot;Infection of post-styloid compartment of parapharyngeal space spares :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CN IX&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CN X&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CN XI&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CN VII&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. CN VII&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60040511700747203/60040511700747203.m3u8&quot;}, {&quot;text&quot;: &quot;Swelling between tonsillar area and superior constrictor muscle is knows as&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Quinsy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dental abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parapharyngeal abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retropharyngeal abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Quinsy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16463641700747225/16463641700747225.m3u8&quot;}, {&quot;text&quot;: &quot;A post dental extraction patient presents with swelling in posterior one third of the sternocliedomastoid, the tonsil is pushed medially. Most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retopharyngeal ascess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parapharyngeal abscess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ludwig angina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vincent angina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Parapharyngeal abscess&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23403831700747239/23403831700747239.m3u8&quot;}, {&quot;text&quot;: &quot;Most common cause of acute retropharyngeal abscess in children is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenoids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trauma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T.B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Quinsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Adenoids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75106241700747251/75106241700747251.m3u8&quot;}, {&quot;text&quot;: &quot;50 yrs old male presented with odynophagia, â€œhot potatoâ€ voice and stridor. On examination diffuse swelling over the posterior pharyngeal wall was seen. X-ray revealed increased retropharyngeal space.Most suspected diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retropharyngeal abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Prevertebral abscess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parapharyngeal abscess.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ludwigâ€™s Angina&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Prevertebral abscess&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66285691700747266/66285691700747266.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about Ludwigâ€™s angina except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trismus is a feature&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tracheostomy may be required&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Submandibular space infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Staphylococcus aureus is the common organism&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Staphylococcus aureus is the common organism&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3009011700747280/3009011700747280.m3u8&quot;}, {&quot;text&quot;: &quot;Quinsy is collection of pus in the peritonsillar space b/t capsule of tonsil and :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superior constrictor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Middle constrictor.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inferior constrictor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Stylohyoid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Superior constrictor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7741261700747296/7741261700747296.m3u8&quot;}, {&quot;text&quot;: &quot;Space of the neck most often involved with head and neck infections is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Submaxillary space&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Submental space&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parapharyngeal space.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Retropharyngeal space.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Parapharyngeal space.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55324301700747310/55324301700747310.m3u8&quot;}, {&quot;text&quot;: &quot;A 2 year old child presents to emergency with fever and respiratory distress. He has drooling of saliva and her mother told he has been refusing feeds since yesterday. Xray soft tissue neck lateral view is shown in picture. What is the possible diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Prevertebral abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute Retropharyngeal abscess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parapharyngeal abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Peritonsillar abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Acute Retropharyngeal abscess&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/2798558q10entimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8527811700747322/8527811700747322.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 20 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test25" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Rhino Sinusitis And Complications&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Rhino Sinusitis And Complications&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                24 Questions | 104 Total Marks | 34 min Duration | ~85.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Most common organism associated with acute sinusitis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rhinovirus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;S. pneumoniae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;S. aureus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aspergillosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Rhinovirus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50946691700814807/50946691700814807.m3u8&quot;}, {&quot;text&quot;: &quot;Chronic sinusitis is defined as when the signs and symptoms last for more than&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;3 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;12 weeks&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 12 weeks&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29250161700814820/29250161700814820.m3u8&quot;}, {&quot;text&quot;: &quot;Pediatric Sinusitis usually involves:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary sinus and anterior ethmoids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus and posterior ethmoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinus and anterior ethmoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal sinus and posterior ethmoids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Maxillary sinus and anterior ethmoids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70815601700814868/70815601700814868.m3u8&quot;}, {&quot;text&quot;: &quot;70 yrs old patient suffering from chronic sinusitis since last 4 yrs complains of headache, diplopia and proptosis:Study the given slide and choose most inappropriate statement ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Displaces the eyeball downward and laterally&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cystic tender swelling&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Egg shell crackling can be elicited&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Treatment is frontoethmoidectomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cystic tender swelling&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202023-11-23%20at%205_51_31%20PM.jpeg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28956471700814986/28956471700814986.m3u8&quot;}, {&quot;text&quot;: &quot;Chronic sinusitis in children is usually confined to :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Ethmoid sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78700311700815014/78700311700815014.m3u8&quot;}, {&quot;text&quot;: &quot;Most common presentation of chronic sinusitis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nasal obstruction or blockage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Purulent nasal discharge&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hyposmia or anosmia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Headache&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Purulent nasal discharge&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18758311700815057/18758311700815057.m3u8&quot;}, {&quot;text&quot;: &quot;Investigation of choice for Acute sinusitis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;(CT) Scan&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;X-ray(Waterâ€™View)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;MRI&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ultrasonography&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. (CT) Scan&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61766971700815070/61766971700815070.m3u8&quot;}, {&quot;text&quot;: &quot;Patients suffering from cystic fibrosis and sinusitis have higher risk for developing :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudomonal infections&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Methicillin resistant S.aureus infections&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Both&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/897571700815082/897571700815082.m3u8&quot;}, {&quot;text&quot;: &quot;Rhinocerebral disease is caused by :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Methicillin resistant S.aureus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mucor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Mucor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64558681700815095/64558681700815095.m3u8&quot;}, {&quot;text&quot;: &quot;Sinus most commonly involved in mucoceles is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Frontal sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;All are true regarding mucocele of frontal sinus except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Displaces the eyeball downward and laterally&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cystic tender swelling&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Egg shell crackling can be elicited&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Treatment is frontoethmoidectomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cystic tender swelling&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Traid of â€œKartagenerâ€™s Syndromeâ€ includes all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chronic rhinitis/sinusitis/otitis media&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bronchiectasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Situs inversus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Azoospermia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Azoospermia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43565231700815332/43565231700815332.m3u8&quot;}, {&quot;text&quot;: &quot;A young female with a long standing history of sinusitis presents with frequent fever along with personality changes and headaches of recent onset. Fundus examination revealed papilledema. The most likely diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal lobe abscess&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meningitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Encephalitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal bone osteomyelitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Frontal lobe abscess&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63230911700815415/63230911700815415.m3u8&quot;}, {&quot;text&quot;: &quot;Sinocutaneous Fistula: usually begins as a :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ethmoidal osteomyelitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Maxillary osteomyelitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal osteomyelitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoidal osteomyelitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Frontal osteomyelitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19641311700815433/19641311700815433.m3u8&quot;}, {&quot;text&quot;: &quot;Earliest stage of orbital complication is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Orbital Cellulitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Subperiosteal Abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Preseptal Cellulitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Orbital Abscess&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Preseptal Cellulitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8187851700815453/8187851700815453.m3u8&quot;}, {&quot;text&quot;: &quot;Most common complication of endoscopic sinus surgery :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Synechia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retrobulbar Hematoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Diplopia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seromas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Synechia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10472661700815464/10472661700815464.m3u8&quot;}, {&quot;text&quot;: &quot;Retrobulbar Hematoma as a complication of FESS occur from retration injury of the :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anterior ethmoid artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Posterior ethmoid artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sphenopalantine artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lingual artery&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Anterior ethmoid artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48383491700815478/48383491700815478.m3u8&quot;}, {&quot;text&quot;: &quot;Symptoms of sinusitis are all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blood stained rhinorrhea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Facial edema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nasal blockage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diplopia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Diplopia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Sphenoid sinusitis pain is referred most commonly to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Occiput&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vertex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Temporal region&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Occiput&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34223941700815491/34223941700815491.m3u8&quot;}, {&quot;text&quot;: &quot;24 years old ramesh presents with pain over the bridge of the nose. It was aggravated by movements of eyeballs.Examination revealed oedema of both eyelids and swelling of the middle turbinate. Involvement of which of the following para-nasal sinus is suspected.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Maxillary Sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ethmoid Sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ethmoid Sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38633951700815504/38633951700815504.m3u8&quot;}, {&quot;text&quot;: &quot;Pain in vertex is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ethmoid sinusitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sphenoid sinusitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Frontal sinusitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Maxillary sinusitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sphenoid sinusitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Incidence of mucocele is lowest in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Frontal sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sphenoid sinus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Maxillary sinus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ethmoid sinus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sphenoid sinus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66085581700815543/66085581700815543.m3u8&quot;}, {&quot;text&quot;: &quot;Most severe complication of maxillary sinus lavage and insufflation-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Facial nerve injury&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Air embolism&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epistaxis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Coagulopathy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Air embolism&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48426751700815567/48426751700815567.m3u8&quot;}, {&quot;text&quot;: &quot;A 45 year old lady presented with complaints of nasal congestion , stuffiness ,discharge and anosmia . CT scan of paranasal sinus was done as shown below what is the diagnosis :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ethmoidal polyp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antrochonal polyp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Allergic fungal sinusitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nasoethmoidal carcinoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Allergic fungal sinusitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/image-20200630152156-1.jpeg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30253031700815582/30253031700815582.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 34 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test26" class="iframe-container" style="display:none;">
    
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Stridor Voice Disorders Tracheostomy And Miscellaneous&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
     pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
     fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
     (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
     spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;
&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;

&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Stridor Voice Disorders Tracheostomy And Miscellaneous&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                19 Questions | 76 Total Marks | 29 min Duration | ~91.58 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;
      
&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;&lt;!-- JavaScript Logic --&gt;
&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Functions of videostroboscopy includes all except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Examine vocal fold mucosa for general health&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vocal fold anatomical defects&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vocal fold biomechanical disturbances&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Evaluate the location, extent, or compression of the stenosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Evaluate the location, extent, or compression of the stenosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56956391701440453/56956391701440453.m3u8&quot;}, {&quot;text&quot;: &quot;Upper airway obstruction at glottic region presents as all of the following except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Biphasic stridor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inspiratory stridor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hoarseness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Feeding problems&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Feeding problems&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32756231701440469/32756231701440469.m3u8&quot;}, {&quot;text&quot;: &quot;Most common vascular anomaly to cause stridor is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pulmonary Artery Sling&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retro-Esophageal Right Subclavian Artery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right Aortic Arch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Double Aortic Arch&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Double Aortic Arch&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16648411701440643/16648411701440643.m3u8&quot;}, {&quot;text&quot;: &quot;Most common vascular anomaly to compress aerodigestive tract is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pulmonary Artery Sling&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Retro-Esophageal Right Subclavian Artery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Right Aortic Arch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Double Aortic Arch&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Retro-Esophageal Right Subclavian Artery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30560971701441007/30560971701441007.m3u8&quot;}, {&quot;text&quot;: &quot;Nocturnal stridor and respiratory distress with normal head and neck exam favours the diagnosis of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute Laryngotracheobronchitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acute Supraglottitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acute Spasmodic Laryngitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute Epiglottitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Acute Spasmodic Laryngitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66898841701440687/66898841701440687.m3u8&quot;}, {&quot;text&quot;: &quot;A patient is suffering from bilateral abductor spasmodic dysphonia. What type of voice is expected in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Breathy voice&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Strangulated voice&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hot potato voice&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aphonia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Breathy voice&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44536901701440712/44536901701440712.m3u8&quot;}, {&quot;text&quot;: &quot;Androphonia can be corrected by doing:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type l Thyroplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Type 2 Thyroplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Type 3 Thyroplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type 4 Thyroplasty&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Type 4 Thyroplasty&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16210311701440726/16210311701440726.m3u8&quot;}, {&quot;text&quot;: &quot;A tracheostomized patient, with portex tracheostomy tube, in the ward, developed sudden complete blockage of the tube. What will be the best next step for the management?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate removal of the tracheostomy tube&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Suction of tube with sodium bicarbonate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Suction of tube with saline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Jet ventilation&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Immediate removal of the tracheostomy tube&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54946391701440752/54946391701440752.m3u8&quot;}, {&quot;text&quot;: &quot;Dead space is reduced in tracheotomy:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;15%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;30-50%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;10%&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;20%&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 30-50%&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27619511701440765/27619511701440765.m3u8&quot;}, {&quot;text&quot;: &quot;Microlaryngoscopy is usually done with an objective lens with focal length of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;200 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;400 mm&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;100 mm&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;300 mm&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 400 mm&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67669871701440778/67669871701440778.m3u8&quot;}, {&quot;text&quot;: &quot;Patient of presbylaryngis can present with all of the following symptoms except :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hoarse-breathy voice&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lower pitch&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Voice tremors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Voice fatigue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lower pitch&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55775951701440790/55775951701440790.m3u8&quot;}, {&quot;text&quot;: &quot;Gutzmannâ€™s pressure test is related with:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Puberphonia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phonasthenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Conversion Disorders&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plica Ventricularis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Puberphonia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61645381701440803/61645381701440803.m3u8&quot;}, {&quot;text&quot;: &quot;Faulty use of false vocal folds leads to:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Puberphonia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phonasthenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Conversion Disorders&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plica Ventricularis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Plica Ventricularis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19010741701440813/19010741701440813.m3u8&quot;}, {&quot;text&quot;: &quot;Tracheostomy was done in a old male child diagnosed as case of congenital subglottis stenosis. As a ENT surgeon you advice the parents of child for regular endoscope every:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;3 months&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;6 months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 3 months&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25097021701440824/25097021701440824.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about tracheostomy tube except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Consists of two metallic tubes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tubes are made up of silver alloy and titanium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Metal tubes are ideally changed every 3 days&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cuffed tubes are used for IPPV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Metal tubes are ideally changed every 3 days&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66085481701440844/66085481701440844.m3u8&quot;}, {&quot;text&quot;: &quot;Elliptical space between the cords is seen in cases of weakness of :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thyroarytenoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Interarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both thyroarytenoid and interarytenoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Thyroarytenoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62622561701440865/62622561701440865.m3u8&quot;}, {&quot;text&quot;: &quot;A construction worker met with an accident and presented to the trauma centre when a heavy concrete block fell over his face. He was found to have severe maxillofacial and laryngeal injury. He was not able to open his mouth and, on examination, he is found to have multiple fractures and obstruction in patent airway, the following procedure was done for him. Which of the following options correct define the procedure?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Submental endotracheal intubation.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Emerency tracheostomy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cricothyroidotomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subcutaneous tracheostomy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cricothyroidotomy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/image(1045).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54297761701440887/54297761701440887.m3u8&quot;}, {&quot;text&quot;: &quot;In which of the following case high-level tracheostomy is preferred?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Foreign body obstruction in trachea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;A patient of vocal cord palsy scheduled for thyroplasty&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;A patient of caner larynx scheduled for laryngectomy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;A child with acute epiglottitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. A patient of caner larynx scheduled for laryngectomy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27799801701440914/27799801701440914.m3u8&quot;}, {&quot;text&quot;: &quot;Inspiratory stridor is seen in which of the following lesions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Supra glottic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sub glottic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tracheal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bronchial&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Supra glottic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21423001701440930/21423001701440930.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@dams_new_robot&lt;/p&gt;&quot;,
                    bot: &quot;@dams_new_robot&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 29 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
                // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }

        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        // Show result for a single question
                // Show result for a single question
        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById(&#x27;results-content&#x27;);
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border p-4 rounded-lg ${isCorrect ? &#x27;bg-green-50&#x27; : userAnswer ? &#x27;bg-red-50&#x27; : &#x27;bg-gray-50&#x27;}&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || &#x27;No question text&#x27;}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || &#x27;Invalid option&#x27;}` : &#x27;Unanswered&#x27;}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || &#x27;Unknown&#x27;}&lt;/p&gt;
                        &lt;div class=&quot;mt-2&quot;&gt;${q.explanation || &#x27;No explanation available&#x27;}&lt;/div&gt;
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join(&#x27;&#x27;) : &#x27;&#x27;}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, &#x27;${q.video}&#x27;, &#x27;video-${index}&#x27;)&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;&#x27;}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-blue-500 text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, &#x27;${q.audio}&#x27;, &#x27;audio-${index}&#x27;)&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : &#x27;&#x27;}
                    &lt;/div&gt;
                `;
                document.getElementById(&#x27;correct-count&#x27;).textContent = correct;
                document.getElementById(&#x27;wrong-count&#x27;).textContent = wrong;
                document.getElementById(&#x27;unanswered-count&#x27;).textContent = unanswered;
                document.getElementById(&#x27;marked-count&#x27;).textContent = marked;
                document.getElementById(&#x27;result-question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;prev-result&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-result&#x27;).disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }

        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

</body>
</html>
