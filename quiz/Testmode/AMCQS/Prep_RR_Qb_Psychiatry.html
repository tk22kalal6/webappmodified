<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prep RR Qb Psychiatry - Combined Tests</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
</style>
  <style>
  body {
    font-family: Arial, sans-serif;
    padding: 0;
    margin: 0;
  }

  button {
    margin: 5px;
    padding: 10px 15px;
    background: #ffffff;
    border: 1px solid #2d3748;
    border-radius: 4px;
    cursor: pointer;
    color: #000000;
    position: relative;
    top: 5px;
    font-size: 14px;
    transition: background 0.2s ease, color 0.2s ease, transform 0.1s ease;
  }

  button:hover {
    background: #f3f4f6;
    color: #000000;
    transform: translateY(-1px);
  }

  body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        .iframe-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    
    /* Mobile optimization */
    

  /* Dropdown styling */
  .dropdown-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1100;
  }

  .dropdown-toggle {
    background: #2c5281;
    color: white;
    border: none;
    font-size: 14px;
    padding: 10px 18px;
    border-radius: 6px;
    font-weight: bold;
    letter-spacing: 0.5px;
  }

  .dropdown-toggle:hover {
    background: #24466c;
  }

  .dropdown-menu {
  display: none;
  position: absolute;
  right: 0;              /* keep aligned to right edge of toggle */
  margin-top: 6px;
  background: white;
  border: 1px solid #cbd5e0;
  border-radius: 8px;
  max-height: 350px;
  overflow-y: auto;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  min-width: 250px;
  max-width: 90vw;       /* prevent it from going outside screen */
  word-wrap: break-word; /* wrap long names */
  white-space: normal;   /* allow text to wrap */
  animation: fadeIn 0.2s ease-in-out;
}

.dropdown-menu button {
  display: block;
  width: 100%;
  text-align: left;
  margin: 0;
  padding: 10px 15px;
  border-radius: 0;
  background: transparent;
  color: #2d3748;
  border: none;
  border-bottom: 1px solid #edf2f7;
  font-size: 13px;
  white-space: normal;   /* allow wrapping inside button */
  word-break: break-word;
}


  img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    display: block;
    margin: 10px auto;
  }

  body > section:last-child {
    margin-bottom: 0 !important;
  }
  
</style>
  <script>
  function showTest(id) {
    document.querySelectorAll('.iframe-container').forEach(div => div.style.display = 'none');
    document.getElementById(id).style.display = 'block';
    document.getElementById('dropdownMenu').style.display = 'none';
    window.scrollTo(0, 0);
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  document.addEventListener('click', function (event) {
    const toggle = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');
    if (!toggle.contains(event.target) && !menu.contains(event.target)) {
      menu.style.display = 'none';
    }
  });
</script>
<script src="../../../access-control.js"></script>
  <script src="../../../block.js"></script>
  <script src="../../../error-handler/link-checker.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5920367457745298"
     crossorigin="anonymous"></script>
</head>
<body>
<script>
      // Initialize access control for protected page
      if (!accessControl.initProtectedPage()) {
        throw new Error('Access denied - redirecting to index.html');
      }
    </script>
  <button onclick="history.back()" style="position: absolute; top: 20px; left: 20px; background: transparent; color: white; border: none; padding: 10px; cursor: pointer; z-index: 1001; font-size: 20px;">
  <i class="fas fa-arrow-left"></i>
</button>

<div class="dropdown-wrapper">
  <button class="dropdown-toggle" id="dropdownToggle" onclick="toggleDropdown()">â˜° INDEX</button>
  <div class="dropdown-menu" id="dropdownMenu">
<button onclick="showTest('test1')">Basics_of_Psychiatry_</button>
<button onclick="showTest('test2')">Child_psychiatry_</button>
<button onclick="showTest('test3')">Mood_disorders_</button>
<button onclick="showTest('test4')">Obsessive_Compulsive_Related_Disorders</button>
<button onclick="showTest('test5')">Schizophrenia_and_other_Psychotic_Disorders</button>
<button onclick="showTest('test6')">Sleep_Wake_Eating_disorders</button>
<button onclick="showTest('test7')">Somatic_Symptom_and_Related_Disorders</button>
<button onclick="showTest('test8')">Substance_use_and_Addictive_Disorders</button>
</div>
  </div>
  
<div id="test1" class="iframe-container" style="display:block;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Basics Of Psychiatry &lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Basics Of Psychiatry &lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                13 Questions | 13 Total Marks | 23 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 40-year-old female has come to a psychiatrist for low mood. This is her first visit. The psychiatrist decides to evaluate her mental function by mental status examination. Which among the following are components of this 1) Speech 2) Mood and affect 3) Thought content 4) Judgment 5) Abstract reasoning 6) Motor activity&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1,2,3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2,4,5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1,2,3,4,5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1,2,3,4,5,6&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 1,2,3,4,5,6&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/mi4WON1TqtH1uZzRuJk71734179023.png&quot;], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;General description:&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Appearance and behavior&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Motor activity&lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;strong&gt;(Statement-6)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Speech&lt;/strong&gt;&lt;strong&gt; (Statement-1)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Emotional state:&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Mood:&lt;/strong&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d2a2319d681692777199792417b5e2\&quot;&gt;subjective&lt;/span&gt; experience of patientâ€™s internal and sustained emotional state&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Affect: &lt;/strong&gt;expression of mood (that appears to the clinician) &lt;strong&gt; (Statement-2)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Thinking:&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Thought content &lt;/strong&gt;&lt;strong&gt; (Statement-3)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Thought process&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Perceptual disturbances&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Cognition (higher mental function):&lt;/strong&gt; most commonly evaluated by &lt;strong&gt;Mini &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;fb5ed430931692777192bbdec08a0b\&quot;&gt;Mental Status Examination&lt;/span&gt; (MMSE)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Orientation&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Registration&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Attention &amp;amp; calculation&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Memory (immediate, recent &amp;amp; long term)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Abstract reasoning &lt;/strong&gt;&lt;strong&gt; (Statement-5)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Insight &amp;amp; Judgement &lt;/strong&gt;&lt;strong&gt; (Statement-4)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/5gSBKEzMIQ1qKznEsqwT1736167062.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;On psychiatric evaluation, a 30-year-old female when asked about what she did that morning. Said â€œ I went to a supermarket, the supermarket&#x27;s logo was in yellow color, which reminded me of the sun. I like the sun a lot more than the moon. I donâ€™t understand how the astronauts are able to go to the moon with such pathetic costumesâ€¦..â€ went on to talk about it for a long period in a rapid pressurized manner. What term best describes the patientâ€™s presentation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Clang association&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Circumstantiality&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Loosening of association&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Flight of ideas&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Flight of ideas&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/qGyI65UNtXGn8lmeCAMv1737360943.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Correctly match the following statements with True(T)/ False(F) 1) Continuity is disrupted in tangentiality 2) Goal is not reached in circumstantiality 3) Perseveration is associated with organic mental disorder 4) Continuity is preserved in perseveration 5) Thought blocking is associated with schizophrenia&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1-F,2-T,3-F,4-T,5-F&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1-T,2-F,3-T,4-F.5-T&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1-F,2-F,3-T,4-F,5-T&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1-T,2-F,3-T,4-T,5-T&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 1-F,2-F,3-T,4-F,5-T&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Continuity maintained with increased speed:&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Flight of ideas: &lt;/strong&gt;rapid flow of ideas from one to another, &lt;strong&gt;connected&lt;/strong&gt; and partially understandable&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Prolixity:&lt;/strong&gt; Milder &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a1b06f401f1692777203a53393ba98\&quot;&gt;form&lt;/span&gt; of flight of ideas&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Clang association:&lt;/strong&gt; sentences with &lt;strong&gt;rhyming&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Continuity maintained with decreased speed: &lt;/strong&gt;&lt;strong&gt;(Statement-1)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Thought slowing/retardation:&lt;/strong&gt; Decrease in speed of thought, seen in depression&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Circumstantiality:&lt;/strong&gt; Overinclusion of trivial and unnecessary details, but ultimately &lt;strong&gt;reaches the answer. &lt;/strong&gt;&lt;strong&gt;(Statement-2)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Tangentiality:&lt;/strong&gt; Flow of irrelevant thoughts that deviates from the main topic and &lt;strong&gt;never reaches the answer.&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Continuity disrupted: &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Perseveration: &lt;/strong&gt;&lt;strong&gt;(Statement-4)&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Same thought persists beyond the point of relevance.&lt;/li&gt;\n&lt;li&gt;Pathological &lt;strong&gt;repetition of the same response to different stimuli.&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Seen in &lt;strong&gt;organic mental disorder&lt;/strong&gt; &lt;strong&gt;(Statement-3)&lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;and schizophrenia.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Thought blocking: &lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Sudden arrest of thought and then the person resumes with an entirely new thought.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Seen in schizophrenia. &lt;/strong&gt;&lt;strong&gt;(Statement-5)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/BePU4lwkBcGdg0EXQeQ21737361405.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A psychiatrist asks a patient, \&quot;Have you been feeling anxious lately?\&quot; The patient responds, \&quot;Iâ€™ve been going on walks in the park and enjoying the weather.\&quot; What speech pattern is this an example of?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Circumstantiality&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tangentiality&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neologism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Loosening of association&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tangentiality&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/WW8TIL35ekEeZx6HPCxy1737616145.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following statements on obsession is false?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Persistent thought&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Causes great anxiety or guilt&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Often repugnant to the individual&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Individual is unaware that the thought is irrelevant&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Individual is unaware that the thought is irrelevant&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/YvrNtipd5b6jMG0aQIWj1736167827.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following best describes the concept of thought alienation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The individual recognizes that their obsessive thoughts are their own but finds them difficult to control&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;The individual experiences their thoughts as being controlled or influenced by an external force, with thoughts being inserted, withdrawn, or broadcasted to others&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;The individual has intrusive thoughts that are consistent with their self-image and desires&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;The individual experiences sudden lapses in memory, forgetting their thoughts and actions entirely&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. The individual experiences their thoughts as being controlled or influenced by an external force, with thoughts being inserted, withdrawn, or broadcasted to others&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/AnhqAxFZ68Vz5mdXNPxx1746018505.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Match the following: 1. Illusion a. Hearing voices that are perceived as coming from other people when no one is speaking 2. Hallucination b. Hearing voices inside oneâ€™s head but recognizing them as not being from external sources. 3. Pseudo-hallucination c. Mistaking a shadow for an attacker on a dark road.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1c,2a,3b&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1a,2b,3c&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1c,2b,3a&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1b,2c,3a&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1c,2a,3b&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:703px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;Â &lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Illusion&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Hallucination&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Pseudo-hallucination&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Definition&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;A false perception combining a real stimulus with a mental image&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;A false perception without a real external stimulus, experienced as coming from outside the self&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;A vivid &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e452f5418916927771928fb17de50b\&quot;&gt;mental image&lt;/span&gt; perceived inside the mind, recognized as unreal but still involuntary&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Stimulus&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Requires an actual external stimulus&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;No external stimulus&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;No external stimulus&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Insight&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The individual may or may not realize the misinterpretation&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Often lacks insight&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The individual recognizes the experience as unreal&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Associated Conditions&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Not necessarily pathological; can occur in normal individuals or in conditions like delirium&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Usually indicates a serious mental illness, such as &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d844b672a616927771988fee71197b\&quot;&gt;schizophrenia&lt;/span&gt; or psychosis&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Can occur in mental illness&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mistaking a shadow for an attacker on a dark road&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Hearing voices that are perceived as coming from other people when no one is speaking&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Hearing voices inside oneâ€™s head but recognizing them as not being from external sources&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/4gNSHulZOLvPuzD8JJou1737696434.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A man hears a voice commanding him to lock all the doors in his house immediately, warning that he is in danger. The voice is persistent and direct, addressing him personally, saying, \&quot;You must lock the doors now, or something terrible will happen.\&quot; Despite no visible threat, the man feels compelled to follow the voice&#x27;s instructions. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;First-person auditory hallucination&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Second-person auditory hallucination&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Third-person auditory hallucination&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fourth-person auditory hallucination&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Second-person auditory hallucination&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/CdnzhtImGcg9TIf9HyfI1737697236.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following statements best describes formication?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Feeling of small insects crawling on or under their skin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pricking sensation on the skin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Feeling of limbs being moved&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;A feeling of floating&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Feeling of small insects crawling on or under their skin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/ZVoxm116mzZhdpJQ6Fn71737698030.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is an example of a delusion, not a hallucination?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hearing voices telling you to harm yourself&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Believing that you are being followed by secret agents without any evidence&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Seeing people who are not present&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Smelling smoke when there is none&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Believing that you are being followed by secret agents without any evidence&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Aspect&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Delusions&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Hallucinations&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Definition&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Fixed, false beliefs that are resistant to reasoning or contrary evidence.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;False &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;408bcde7f01692777198acadb8e1c6\&quot;&gt;sensory&lt;/span&gt; perceptions without external stimuli.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Nature&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Cognitive in nature; involves thought processes.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Sensory in nature; involves the senses (sight, sound, touch, etc.)&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Examples&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Believing one is being persecuted (delusion of persecution) or is famous (grandeur).&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Hearing voices, seeing things that are not present, or feeling sensations on the skin.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Perception of Reality&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Individuals may be convinced of their beliefs despite clear evidence against them.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Individuals experience sensations as real, even though they are not.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Associated Conditions&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Commonly seen in schizophrenia, delusional disorder.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Common in schizophrenia, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;23702653681692777196e5c0fc63cd\&quot;&gt;psychotic&lt;/span&gt; disorders, neurological conditions.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/mqPZtTsI8LhB1vTE8bAU1736168327.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which test is commonly done to assess concentration in a person?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Digit Span Test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Digit forward test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Serial 7s Subtraction Test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;24-Hour recall method&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Serial 7s Subtraction Test&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Concentration&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Orientation&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Attention&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Cognitive ability to focus one&#x27;s mental efforts on a specific task, stimulus, or activity for an extended period while ignoring irrelevant information or distractions.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Awareness of oneself in relation to time, place, and person.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Cognitive process of selectively concentrating on specific aspects of the environment while ignoring others.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;It involves:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Sustained mental focus&lt;/li&gt;\n&lt;li&gt;Efficient information processing&lt;/li&gt;\n&lt;li&gt;Resisting cognitive fatigue&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Components&lt;/strong&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Temporal Orientation: Understanding the time.&lt;/li&gt;\n&lt;li&gt;Spatial Orientation: Awareness of oneâ€™s position in relation to the environment.&lt;/li&gt;\n&lt;li&gt;Personal Orientation: Recognition of oneâ€™s identity.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;It involves&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Focusing on relevant stimuli&lt;/li&gt;\n&lt;li&gt;Sustaining concentration over time&lt;/li&gt;\n&lt;li&gt;Dividing focus between multiple tasks&lt;/li&gt;\n&lt;li&gt;Shifting focus when needed&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Assessment method:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Serial 7s &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;408be3f8d81692777199619278702d\&quot;&gt;Subtraction&lt;/span&gt; Method:&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Procedure&lt;/strong&gt;:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;The subject starts with a number (typically 100).&lt;/li&gt;\n&lt;li&gt;They subtract 7 repeatedly, stating each result aloud.&lt;/li&gt;\n&lt;li&gt;This continues for a set number of subtractions or a specific time period.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Example sequence: &lt;/strong&gt;100, 93, 86, 79, 72, 65.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Assessment&lt;/strong&gt;: Often evaluated through direct questioning and observation.&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Questioning like:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;What is your name?&lt;/li&gt;\n&lt;li&gt;Who am I?&lt;/li&gt;\n&lt;li&gt;What place is this?&lt;/li&gt;\n&lt;li&gt;Where is it located?&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Assessment Methods:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Continuous Performance Test (CPT)&lt;/li&gt;\n&lt;li&gt;Trail Making Test&lt;/li&gt;\n&lt;li&gt;Stroop Color and Word Test&lt;/li&gt;\n&lt;li&gt;Digit Span Test- &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;02e6b5c95316927771867eba7818b1\&quot;&gt;Digit&lt;/span&gt; forward&lt;strong&gt;(option B)&lt;/strong&gt; and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;02e6b5c95316927771867eba7818b1\&quot;&gt;Digit&lt;/span&gt; backward test.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/24YNdvu1mYSuEkwBbrSG1736168484.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which method is often used in clinical settings to evaluate recent memory?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;24-Hour Recall Method&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Serial 7s Subtraction Method&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mini-Mental State Examination (MMSE)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Digit Span Test&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 24-Hour Recall Method&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Immediate memory/ Short-term memory&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Recent Memory&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Remote Memory&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The ability to hold and manipulate information temporarily while performing cognitive tasks.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The ability to recall information or events that have occurred recently, typically within the last few days or weeks.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The ability to recall information or events from the distant past, often years or decades ago.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Seconds &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Minutes, hours to days&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Months, Years to a lifetime&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Eg- Solving a math problem in your head, remembering a phone number long enough to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d9a87c19871692777186bdbb44bdca\&quot;&gt;dial&lt;/span&gt; it.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Eg- Recalling a conversation from earlier today or remembering what you ate for breakfast.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Eg-Remembering childhood experiences or significant historical events.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Test for concentration and attention to assess immediate memory.&lt;/p&gt;\n&lt;p&gt;Digit Span Test, n-back task, and mental arithmetic tasks.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;24-Hour Recall Method, Rey &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;f17057f75016927771829e70074368\&quot;&gt;Auditory&lt;/span&gt; Verbal Learning Test (RAVLT).&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Autobiographical memory questioning,asking personal information.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/CJZflOGBLapKqYjHMlq01736168704.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following tasks is most commonly used to assess abstract thinking abilities?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Raven&#x27;s Progressive Matrices&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Digit Span Test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Serial 7s Subtraction Test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;24-Hour Recall Method&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Raven&#x27;s Progressive Matrices&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Abstract Thinking&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Intelligence&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;The ability to understand concepts that are not tied to concrete objects or experiences; involves reasoning about ideas, principles, and relationships.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Broader construct that encompasses various cognitive abilities, including reasoning, problem-solving, learning, and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;c623a72bdd16927771808d60122016\&quot;&gt;adaptation&lt;/span&gt; to new situations.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Components:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Pattern recognition&lt;/li&gt;\n&lt;li&gt;Problem-solving skills&lt;/li&gt;\n&lt;li&gt;Conceptualization&lt;/li&gt;\n&lt;li&gt;Logical reasoning&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Components:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Logical reasoning&lt;/li&gt;\n&lt;li&gt;Verbal comprehension&lt;/li&gt;\n&lt;li&gt;Quantitative reasoning&lt;/li&gt;\n&lt;li&gt;Spatial visualization&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Assessment Methods:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Raven&#x27;s Progressive Matrices&lt;/li&gt;\n&lt;li&gt;Proverb testing&lt;/li&gt;\n&lt;li&gt;Similarity testing&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Assessment Methods:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Wechsler Adult Intelligence Scale (WAIS)&lt;/li&gt;\n&lt;li&gt;Stanford-Binet Intelligence Scales&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;&lt;strong&gt;: &lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;When asked the meaning of the proverb, \&quot;A &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;07878e8260169277719971eb6eb629\&quot;&gt;stitch&lt;/span&gt; in time saves nine,\&quot; a person explains that it means solving a small problem early can prevent it from becoming a bigger issue. This shows an ability to grasp the underlying concept rather than just the literal meaning.&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Example&lt;/strong&gt;:&lt;/p&gt;\n&lt;p&gt;Navigating daily life challenges by adapting, learning, and making decisions also reflects intelligence.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/S40ORK6FnhsiMGq3mAOP1737704145.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 23 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test2" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Child Psychiatry &lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Child Psychiatry &lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                6 Questions | 6 Total Marks | 16 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which of the following is a known contributing factor to the development of ADHD?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dysfunction of the serotonin system&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Familial genetic links, with a heritability of about 75%&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Increased activity in the prefrontal cortex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Increased activity of norepinephrine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Familial genetic links, with a heritability of about 75%&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:NaN\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;4\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;h3&gt;&lt;strong&gt;Aetiology of ADHD &lt;/strong&gt;&lt;/h3&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Genetic Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option B)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurochemical Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurophysiological and Neuroanatomical Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Developmental Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Psychosocial Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;ADHD has a strong genetic link, with a &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;60232907421692777188f399bdf554\&quot;&gt;heritability&lt;/span&gt; of about 75%.&lt;/li&gt;\n&lt;li&gt;Children with ADHD are more likely to have parents or siblings with the condition, indicating a &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5dda3cc2ab1692777202b3b3c65bea\&quot;&gt;familial&lt;/span&gt; pattern.&lt;/li&gt;\n&lt;li&gt;DAT1 gene and DRD4 gene, are known to be associated with ADHD.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;ADHD is &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;8d0fca798b1692777191b6cd41880f\&quot;&gt;linked&lt;/span&gt; to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9194a239ed1692777186bfe41c0e87\&quot;&gt;dopamine&lt;/span&gt; dysfunction.&lt;/li&gt;\n&lt;li&gt;The &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;cc6a94a20d1692777193cea8b08adc\&quot;&gt;noradrenergic&lt;/span&gt; system, which influences attention and alertness, is also believed to play a role.&lt;/li&gt;\n&lt;li&gt;ADHD medications typically increase levels of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9194a239ed1692777186bfe41c0e87\&quot;&gt;dopamine&lt;/span&gt; and norepinephrine.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;EEG usually shows &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ccb50023dc1692777200804b8475ca\&quot;&gt;theta&lt;/span&gt; and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;806eb8418c16927771822855b56695\&quot;&gt;beta&lt;/span&gt; waves in the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;35aa36279d16927772031c7ce8d6e5\&quot;&gt;frontal&lt;/span&gt; brain- indicating &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;65520d2c6316927771905f771be9fe\&quot;&gt;inattention&lt;/span&gt; and mood swings respectively.&lt;/li&gt;\n&lt;li&gt;Decreased activity in brain areas like the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;25bc983c6716927771967f68667610\&quot;&gt;prefrontal&lt;/span&gt; cortex, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;1ba6a9cfe11692777181950edd7a6d\&quot;&gt;anterior&lt;/span&gt; cingulate, and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;923af580cf16927771829606bce2a7\&quot;&gt;basal&lt;/span&gt; ganglia. &lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Certain &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d554413593169277719693b8e38638\&quot;&gt;prenatal&lt;/span&gt; and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a0d3680eab1692777195d6ab932b14\&quot;&gt;perinatal&lt;/span&gt; factors, such as &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;84f13673191692777196762b18e036\&quot;&gt;premature&lt;/span&gt; birth, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a191a950d7169277719148e72a75e2\&quot;&gt;maternal&lt;/span&gt; infections during pregnancy, and low birth weight, may increase the risk of ADHD.&lt;/li&gt;\n&lt;li&gt;Severe abuse, neglect, or maltreatment can worsen or &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;efaf9e0192169277719278711f7f74\&quot;&gt;mimic&lt;/span&gt; ADHD symptoms.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/7SuHzyemQnUkcttgPn5w1736990733.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is NOT a common behavioural symptom associated with Autism Spectrum Disorder?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Repetitive use of toys&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Early development of a social smile&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Delays in language development&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Strong attachment to inanimate object&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Early development of a social smile&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:614px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Symptom Category&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Examples&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Social Communication and Interaction Deficits &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Lack of social smile, poor eye contact &lt;strong&gt;(Option B)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Atypical &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ccd357daaf16927771825777ea6a0d\&quot;&gt;attachment&lt;/span&gt; behaviour&lt;/li&gt;\n&lt;li&gt;Difficulty with non-verbal communication&lt;/li&gt;\n&lt;li&gt;Challenges in forming and maintaining relationships&lt;/li&gt;\n&lt;li&gt;Awkward or inappropriate social behaviour&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Restricted and Repetitive Behaviour Patterns &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Limited exploratory play&lt;/li&gt;\n&lt;li&gt;Repetitive toy use &lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Rigid, monotonous activities&lt;/li&gt;\n&lt;li&gt;Strong &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ccd357daaf16927771825777ea6a0d\&quot;&gt;attachment&lt;/span&gt; to objects &lt;strong&gt;(Option D)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Self-stimulatory or self-injurious behaviours&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Language Development Disturbances &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Delays in language development &lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Minimal or absent babbling&lt;/li&gt;\n&lt;li&gt;Echolalia (repeating words or phrases)&lt;/li&gt;\n&lt;li&gt;Pronoun reversals&lt;/li&gt;\n&lt;li&gt;Peculiar voice quality and rhythm&lt;/li&gt;\n&lt;li&gt;Hyperlexia (early reading without comprehension)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Intellectual Disability &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Approximately 30% of children with ASD have intellectual disabilities&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Irritability &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Aggression, self-injurious behaviours, severe temper tantrums&lt;/p&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;p&gt;Sudden, unexplained mood swings&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Atypical Response to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;408bcde7f01692777198acadb8e1c6\&quot;&gt;Sensory&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7d7e9fdf401692777199f2038941b6\&quot;&gt;Stimuli&lt;/span&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Over- or under-responsiveness to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;408bcde7f01692777198acadb8e1c6\&quot;&gt;sensory&lt;/span&gt; input such as sound or pain&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Hyperactivity and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;65520d2c6316927771905f771be9fe\&quot;&gt;Inattention&lt;/span&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Common in young children with ASD&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Precocious Skills &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Exceptional abilities in specific areas such as rote memory, calculation, or music&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/zAomdYITlt275DX1v5xv1736994524.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following statements regarding treatments for Autism Spectrum Disorder (ASD) is correct?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Early Start Denver Model (ESDM) primarily focuses on role-play activity for children with ASD.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Social Skills Training involves only individual therapy sessions where children practice social skills face-to-face with a therapist.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Treatment and Education of Autistic and Communication-Related Handicapped Children (TEACCH) employs structured teaching methods to support learning in children with ASD.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pivotal Response Training emphasizes the use of pharmacological interventions to enhance communication skills in children with ASD.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Treatment and Education of Autistic and Communication-Related Handicapped Children (TEACCH) employs structured teaching methods to support learning in children with ASD.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:574px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Model&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Description&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;UCLA/LOVAAS-Based Model&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Uses applied behaviour analysis (ABA) through one-on-one sessions &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;fefa53d9f216927772037e31a651d7\&quot;&gt;focusing&lt;/span&gt; on specific skills.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Early Start Denver Model (ESDM) &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Emphasises intervention in natural settings, involving parents and educators in daily routinesÂ &lt;strong&gt;(Option A)&lt;/strong&gt;.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Parent Training Approaches&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Pivotal Response Training: Teaches parents to facilitate social and communication skills through daily activitiesÂ &lt;strong&gt;(Option D)&lt;/strong&gt;.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/BqbnHzWEIPHh6fprG6qE1737008016.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 15 year old boy has been assessed for cognitive abilities, and his mental age is determined to be 9 years. What is the IQ based on the provided information?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;60&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;75&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;90&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;100&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 60&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/PdSfnk2pFFrs7F7CzaNF1737011935.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 9 year old girl has repetitive shoulder-shrugging and grunting sounds that occur daily. These actions are involuntary but she can suppress them for short periods. Which of the following best describes her tics?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Simple Motor and Simple Vocal Tics&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Complex Motor and Simple Vocal Tics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Simple Motor and Complex Vocal Tics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Complex Motor and Complex Vocal Tics&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Simple Motor and Simple Vocal Tics&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:585px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Motor Tics&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Involuntary movements&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Simple Motor Tics&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Rapid contractions of specific muscle groups (e.g., eye-blinking, head-jerking, shoulder-shrugging).&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Complex Motor Tics &lt;/strong&gt;&lt;strong&gt;(Options B and D)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;More purposeful movements (e.g., grooming behaviours, jumping, touching objects).&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Vocal Tics&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Involuntary Vocalizations&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Simple Vocal Tics&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Basic sounds (e.g., throat-clearing, grunting, sniffing), &lt;strong&gt;echopraxia&lt;/strong&gt; (imitation of observed behaviour), and &lt;strong&gt;copropraxia&lt;/strong&gt; (display of obscene gestures).&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Complex Vocal Tics &lt;/strong&gt;&lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Elaborate phrases or behaviours (e.g., &lt;strong&gt;coprolalia&lt;/strong&gt; - &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42b110efe11692777190ea5720c867\&quot;&gt;involuntary&lt;/span&gt; use of obscene words; &lt;strong&gt;palilalia&lt;/strong&gt; - repeating oneâ€™s own words; &lt;strong&gt;echolalia&lt;/strong&gt; - repeating the last heard words from others).&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/X4j9NTIsKBTDVmXR4aYx1737015421.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 10 year old girl is brought to the clinic with concerns about her frequent eye-blinking, shoulder-shrugging and vocalizations that started at age 5. Her symptoms have worsened over the past year, leading to social difficulties and bullying at school. What is the most appropriate initial treatment approach for this child?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cognitive Behavioral Therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psychoeducation for Family and School&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Typical Antipsychotics like Haloperidol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Noradrenergic Agents like Clonidine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Psychoeducation for Family and School&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:605px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Treatment&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Psychoeducation&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Educating families and schools to reduce stress and avoid misinterpretation of tics.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Behavioural Therapy&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Habit &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;82343f61171692777197b4a08bc719\&quot;&gt;Reversal&lt;/span&gt; Training (HRT): Most effective and currently the first-line behavioural treatment for &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;6e2ff3631a1692777200ffbd16b141\&quot;&gt;tic&lt;/span&gt; disorders&lt;/li&gt;\n&lt;li&gt;Exposure and Response Prevention (ERP): Prolonged &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;6e2ff3631a1692777200ffbd16b141\&quot;&gt;tic&lt;/span&gt; suppression.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Pharmacotherapy&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Atypical Antipsychotics&lt;/strong&gt;: &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;c9d09909371692777197e094854db9\&quot;&gt;Risperidone&lt;/span&gt; (most studied), &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;2293e85bcf1692777182bd1ae571d2\&quot;&gt;Aripiprazole&lt;/span&gt; (fewer side effects).&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Typical Antipsychotics&lt;/strong&gt;: Haloperidol, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;88497750e6169277719577dcd8d99c\&quot;&gt;Pimozide&lt;/span&gt; (higher risk of side effects).&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Noradrenergic Agents&lt;/strong&gt;: Clonidine, Guanfacine (modest efficacy, useful with ADHD).&lt;/li&gt;\n&lt;li&gt;Other: Tetrabenazine, Topiramate, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9c0c2a50801692777200aa05a4e57a\&quot;&gt;THC&lt;/span&gt; (understudy)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Supportive Approaches&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Relaxation training, biofeedback, SSRIs for OCD.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/dODb1pJGw7eP3g3tIXPD1737016134.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 16 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test3" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Mood Disorders &lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Mood Disorders &lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                9 Questions | 9 Total Marks | 19 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Match the following genes involved in the development of depression with their normal functions. Genes Encoded for A) SLC6A4 i) Serotonin receptor B) DRD4 ii) Dopamine transporter C) HTR1A iii) Serotonin transporter D) SLC6A3 iv) Dopamine receptor&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;a-ii, b-iv, c-i, d-iii&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;a-iii, b-iv , c-i, d-ii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;a-ii, b-i, c-iv , d-iii&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;a-i, b-ii, c-iii, d-iv&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. a-iii, b-iv , c-i, d-ii&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:684px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Genetic Influence&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;About one-third of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;fef4b623a116927771914da45458df\&quot;&gt;major depression&lt;/span&gt; risk is attributed to genetic factors.&lt;/li&gt;\n&lt;li&gt;The gene &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b989cb3b0d1692777187dd7965b4d3\&quot;&gt;encoding&lt;/span&gt; of &lt;strong&gt;serotonin receptor&lt;/strong&gt;: &lt;strong&gt;HTR1A&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;The gene for &lt;strong&gt;serotonin transporter&lt;/strong&gt;: &lt;strong&gt;5HTTP&lt;/strong&gt;/&lt;strong&gt;SLC6A4&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;The gene for &lt;strong&gt;dopamine receptor&lt;/strong&gt;: &lt;strong&gt;DRD4 &lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;The gene for &lt;strong&gt;dopamine transporter&lt;/strong&gt;: &lt;strong&gt;SLC6A3&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Family History&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Risk increases 2.5â€“3 times if a first-degree relative has depression.&lt;/li&gt;\n&lt;li&gt;Life events can raise risk from 5 to 16 times shortly after occurrence.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurobiological Mechanisms&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Studies show that individuals with the short &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;88c5dcbf0a1692777181e199712f81\&quot;&gt;allele&lt;/span&gt; of 5-HTTLPR (serotonin &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;850b296dd316927772005b651f6e87\&quot;&gt;transporter&lt;/span&gt; gene) exhibit &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5a3b591e581692777181a270cc1ca1\&quot;&gt;amygdala&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;05d473885c1692777189fe284131d7\&quot;&gt;hyperreactivity&lt;/span&gt; to emotional threats&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/SraKbRpaD8xj6SgH6S3Z1737187245.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is not a component of the â€œBeckâ€™s cognitive triadâ€?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Negative self-perception&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Perception of the environment as hostile&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Expectations of suffering and failure in the future&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Introjection of lost significant object&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Introjection of lost significant object&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/pNGQD0vDQB1lfiJOT79i1737187543.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 16-year-old male presents to the clinic with concerns about persistent bedwetting (nocturnal enuresis). His history reveals that this issue has led to depression and social withdrawal. After ruling out any organic causes, the physician decides to start pharmacological therapy. What is the most appropriate class of drug to manage both his depression and bedwetting?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Selective Serotonin Reuptake Inhibitors (SSRIs)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tricyclic Antidepressants (TCAs)&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Monoamine Oxidase Inhibitors (MAOIs)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Benzodiazepines&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tricyclic Antidepressants (TCAs)&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:702px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Primary Use&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Depression&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Other Uses&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Anxiety disorders, chronic pain, insomnia, OCD, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d51601f2c41692777193ddfa55d163\&quot;&gt;nocturnal&lt;/span&gt; enuresis&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Mechanism of Action&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Inhibits &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42c441fad11692777197258f322307\&quot;&gt;reuptake&lt;/span&gt; of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;06eba971ce169277719884f8c62937\&quot;&gt;serotonin&lt;/span&gt; (5-HT) and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;155371e9941692777193b48666ce0a\&quot;&gt;norepinephrine&lt;/span&gt; (NE) by &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9dc12b322016927771830dff673eeb\&quot;&gt;blocking&lt;/span&gt; transporters (SERT and NET)&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Receptor Antagonism&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Muscarinic receptors: &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9b4dbbb3321692777181e6fe172b88\&quot;&gt;Anticholinergic&lt;/span&gt; effects (dry mouth, blurred vision, constipation)&lt;/p&gt;\n&lt;p&gt;H1 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b5d4ddbfe71692777189a12acd5502\&quot;&gt;histamine&lt;/span&gt; receptors: Sedation, weight gain&lt;/p&gt;\n&lt;p&gt;Alpha-1 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;0132a02ec31692777180a840765aff\&quot;&gt;adrenergic&lt;/span&gt; receptors: Postural hypotension&lt;/p&gt;\n&lt;p&gt;Alpha-2 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;0132a02ec31692777180a840765aff\&quot;&gt;adrenergic&lt;/span&gt; receptors: NE feedback modification&lt;/p&gt;\n&lt;p&gt;Voltage-sensitive sodium channels: Cardiotoxicity&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Tricyclic Antidepressants&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Clomipramine: Most serotonin-selective, used in OCD&lt;/li&gt;\n&lt;li&gt;Amitriptyline: Depression, neuropathic pain&lt;/li&gt;\n&lt;li&gt;Doxepin: Anxiety, insomnia&lt;/li&gt;\n&lt;li&gt;Imipramine: Formerly used for &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d51601f2c41692777193ddfa55d163\&quot;&gt;nocturnal&lt;/span&gt; enuresis&lt;/li&gt;\n&lt;li&gt;Desipramine: Most norepinephrine-selective&lt;/li&gt;\n&lt;li&gt;Nortriptyline: Depression, chronic pain, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a5603ff98316927771865d7ae41f16\&quot;&gt;diabetic&lt;/span&gt; neuropathy&lt;/li&gt;\n&lt;li&gt;Viloxazine: Bicyclic antidepressant&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Tetracyclic Antidepressants&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Maprotiline&lt;/li&gt;\n&lt;li&gt;Amoxapine: Also blocks D2 receptors, and may cause EPS&lt;/li&gt;\n&lt;li&gt;Mianserin&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td rowspan=\&quot;5\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Side Effects&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td rowspan=\&quot;5\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Anticholinergic: &lt;/strong&gt;Dry mouth, constipation, blurred vision, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;0b72f5e96b16927772018dec8a87e2\&quot;&gt;urinary&lt;/span&gt; retention, delirium&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Cardiac Side Effects: &lt;/strong&gt;Tachycardia, flattened T waves, prolonged QT interval, ST depression, arrhythmias, cardiotoxicity&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Autonomic Side Effects: &lt;/strong&gt;Postural &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9402185d4b1692777189cb62891ff1\&quot;&gt;hypotension&lt;/span&gt; (alpha-1 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9e4959f6f316927771978bb152d440\&quot;&gt;receptor&lt;/span&gt; blockade), risk of falls in elderly&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Neurological Side Effects: &lt;/strong&gt;Tremors, seizures, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e2952dfc311692777187fa773bcc9f\&quot;&gt;extrapyramidal&lt;/span&gt; symptoms (EPS) from amoxapine.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Endocrine Side Effects: &lt;/strong&gt;Galactorrhea, gynecomastia&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Other Side Effects: &lt;/strong&gt;Sedation, weight gain (H1 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b5d4ddbfe71692777189a12acd5502\&quot;&gt;histamine&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9e4959f6f316927771978bb152d440\&quot;&gt;receptor&lt;/span&gt; antagonism)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/I2nLIVSIAqbDk35F8XSB1737206123.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 28-year-old woman has had multiple episodes of feeling euphoric, highly energetic, and needing little sleep lasting 3-4 days. However, her symptoms never impair her work or social functioning. She has also had episodes of prolonged low mood and anhedonia lasting several weeks. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bipolar I Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bipolar II Disorder&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cyclothymic Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Major Depressive Disorder&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bipolar II Disorder&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/34cXZSJe4TGD6VK0TLBY1740818684.png&quot;], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:640px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Bipolar I Disorder&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Bipolar II Disorder&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Characterized by at least&lt;strong&gt; 1 episode of mania&lt;/strong&gt; and&lt;strong&gt; 1 episode of depression&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Characterized by at least &lt;strong&gt;1 episode of hypomania&lt;/strong&gt; and&lt;strong&gt; 1 episode of depression&lt;/strong&gt;&lt;strong&gt; (Option B)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;M=F&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;F&amp;gt;M&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mean age of onset is 30yrs&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mean age of onset is slightly higher&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:763px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Epidemiology&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Annual &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;17cd3771bb1692777190950c142dbe\&quot;&gt;incidence&lt;/span&gt; is&lt;strong&gt; less than 1%&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Equal &lt;/strong&gt;prevalence of&lt;strong&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;df4ae006fe1692777183604169e9b2\&quot;&gt;Bipolar&lt;/span&gt; I &lt;/strong&gt;disorder in &lt;strong&gt;men &lt;/strong&gt;and&lt;strong&gt; women&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Manic&lt;/strong&gt; episodes are more common in&lt;strong&gt; men&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Depressive&lt;/strong&gt; episodes are more common in &lt;strong&gt;women&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Women &lt;/strong&gt;are more &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;607476ab371692777196d0cb2f13bc\&quot;&gt;prone&lt;/span&gt; to&lt;strong&gt; mixed episodes&lt;/strong&gt; and &lt;strong&gt;rapid cycling&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Age of Onset:&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Onset ranges from 5 to 50 years, with a &lt;strong&gt;mean age of 30&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Prevalence in adolescents rises from&lt;strong&gt; 2%&lt;/strong&gt; at ages &lt;strong&gt;13-14&lt;/strong&gt; to&lt;strong&gt; 4%&lt;/strong&gt; by age&lt;strong&gt; 18&lt;/strong&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Socioeconomic Factors:&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Higher &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;17cd3771bb1692777190950c142dbe\&quot;&gt;incidence&lt;/span&gt; in divorced or single individuals.&lt;/li&gt;\n&lt;li&gt;More common in &lt;strong&gt;upper socioeconomic groups &lt;/strong&gt;and non-college graduates.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Genetics&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Family history increases the risk for mood disorders.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;1st-degree &lt;/strong&gt;relatives have a&lt;strong&gt; 10-fold risk&lt;/strong&gt; of developing &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;df4ae006fe1692777183604169e9b2\&quot;&gt;bipolar&lt;/span&gt; disorder.&lt;/li&gt;\n&lt;li&gt;Genetic &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ea564f2f5e1692777194df1391fd69\&quot;&gt;overlap&lt;/span&gt; with&lt;strong&gt; schizophrenia&lt;/strong&gt;, especially on chromosomes&lt;strong&gt; 18q and 22q.&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Brain Imaging&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Increased&lt;strong&gt; hyperintensities&lt;/strong&gt; in&lt;strong&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;c4960c2ad8169277719913d61ad2a9\&quot;&gt;subcortical&lt;/span&gt; areas&lt;/strong&gt; (basal ganglia, thalamus) in &lt;strong&gt;bipolar I disorder&lt;/strong&gt;.&lt;/li&gt;\n&lt;li&gt;Imaging studies show increased &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9194a239ed1692777186bfe41c0e87\&quot;&gt;dopamine&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;850b296dd316927772005b651f6e87\&quot;&gt;transporter&lt;/span&gt; levels.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Functional imaging&lt;/strong&gt; shows &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;458e050fdc16927771809854c9fd53\&quot;&gt;abnormal&lt;/span&gt; brain activation, with &lt;strong&gt;hyperactivity in &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;35aa36279d16927772031c7ce8d6e5\&quot;&gt;frontal&lt;/span&gt; &lt;/strong&gt;areas and&lt;strong&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ca81bcfb13169277718979f6d805c7\&quot;&gt;hypoactivity&lt;/span&gt; in the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5a3b591e581692777181a270cc1ca1\&quot;&gt;amygdala&lt;/span&gt; &lt;/strong&gt;and &lt;strong&gt;basal ganglia&lt;/strong&gt;.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/bY8lK3fdf4GxCvmBhcJi1737222147.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 32-year-old woman with a history of bipolar disorder (BD) is planning to conceive. She has been stable on her current medication but is concerned about the risks to her future child. Which of the following is the safest drug for managing BD during pregnancy?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lithium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Valproate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lamotrigine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Carbamazepine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lamotrigine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:660px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Medication &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Potential Fetal/Newborn risk&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Clinical Recommendation&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Mood Stabilizers&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Lithium &lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Low risk of Ebsteinâ€™s anomaly: 1 in 1000 with first-trimester exposure&lt;/li&gt;\n&lt;li&gt;No evidence of behavioral or cognitive problems in children exposed to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; till 5 years of age&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Fetal echocardiography&lt;/li&gt;\n&lt;li&gt;Frequent &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;1ffaec13de169277719828374cfda0\&quot;&gt;serum&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; monitor in view of fluid shifts over pregnancy&lt;/li&gt;\n&lt;li&gt;Should be well &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;341e757ca9169277718922ba058b1d\&quot;&gt;hydrated&lt;/span&gt; to reduce chances of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; toxicity&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Valproic acid &lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option B)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Increased rate of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;488a4efe7d16927771840c9e29f164\&quot;&gt;congenital&lt;/span&gt; malformations (approximate 10%), including &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b00388be25169277719369b3ab059f\&quot;&gt;neural&lt;/span&gt; tube defects&lt;/li&gt;\n&lt;li&gt;Linked to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;c5255750631692777193621e13317d\&quot;&gt;neurodevelopmental&lt;/span&gt; disorders in children with in-utero exposure&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Must be avoided in favor of safer agents&lt;/li&gt;\n&lt;li&gt;Prior to conception, women with BD preferably to be shifted to another safer &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a87d6eeedb16927771967434e19075\&quot;&gt;prophylactic&lt;/span&gt; agent&lt;/li&gt;\n&lt;li&gt;High-dose &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;778971b8f5169277720391773cc8fa\&quot;&gt;folic acid&lt;/span&gt; supplementation (4 mg/day) advised prior to conception&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Carbamazepine&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option D)&lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Congenital malformations: Around 3%â€“6%&lt;/li&gt;\n&lt;li&gt;Neural tube defect, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7aa38569251692777184021705e8de\&quot;&gt;cleft&lt;/span&gt; palate, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5089296e801692777202c49d61e9f4\&quot;&gt;fingernail&lt;/span&gt; hypoplasia&lt;/li&gt;\n&lt;li&gt;Risk of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;41e858bf2816927771836d46c619b9\&quot;&gt;bleeding&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a6116aa50e1692777186cfd59c5257\&quot;&gt;diathesis&lt;/span&gt; in neonates due to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;71c2092f15169277720243eb1590b0\&quot;&gt;Vitamin K&lt;/span&gt; deficiency&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;If possible, use in pregnancy should be avoided&lt;/li&gt;\n&lt;li&gt;High-dose &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;778971b8f5169277720391773cc8fa\&quot;&gt;folic acid&lt;/span&gt; supplementation (4 mg/day) advised prior to conception&lt;/li&gt;\n&lt;li&gt;Oral &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;71c2092f15169277720243eb1590b0\&quot;&gt;Vitamin K&lt;/span&gt; (20mg/day) supplementation in the last month of pregnancy in women taking carbamazepine&lt;/li&gt;\n&lt;li&gt;Parenteral &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;71c2092f15169277720243eb1590b0\&quot;&gt;Vitamin K&lt;/span&gt; (1mg IM) supplementation for newborn, shortly after birth.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Lamotrigine &lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Risk of major &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;488a4efe7d16927771840c9e29f164\&quot;&gt;congenital&lt;/span&gt; malformations (2%â€“3%)&lt;/li&gt;\n&lt;li&gt;No significant &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;89ebd3b21316927771937ac84d6dae\&quot;&gt;neurobehavioral&lt;/span&gt; sequelae&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Preferred &lt;strong&gt;safer agent to use in pregnancy&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Dose may be increased due to enhanced &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;3a3fb1b8a816927771840e6a344cc0\&quot;&gt;clearance&lt;/span&gt; rates across pregnancy stages&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Other Drugs for &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;df4ae006fe1692777183604169e9b2\&quot;&gt;Bipolar&lt;/span&gt; Disorder Safe in Pregnancy&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;3\&quot; rowspan=\&quot;4\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;First Generation Antipsychotics (FGA): &lt;/strong&gt;Haloperidol, Trifluoperazine&lt;/li&gt;\n&lt;/ul&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Second Generation Antipsychotics (SGA): &lt;/strong&gt;Olanzapine, quetiapine, aripiprazole&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Selective &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;06eba971ce169277719884f8c62937\&quot;&gt;Serotonin&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42c441fad11692777197258f322307\&quot;&gt;Reuptake&lt;/span&gt; Inhibitors (SSRI):&lt;/strong&gt; Fluoxetine, escitalopram, sertraline, fluvoxamine&lt;strong&gt; &lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/ei19Qec4slVmJyxXPoGr1737270042.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 28-year-old woman presents with significant mood swings, irritability, and a lack of interest in her usual activities in the week before her period. She also mentions difficulty in falling asleep, breast tenderness and easy fatigability. These symptoms improve shortly after her period begins and minimal in the week post menses. What condition is she most likely experiencing?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dysthymia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cyclothymia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Premenstrual Syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Premenstrual Dysphoric Disorder&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Premenstrual Dysphoric Disorder&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:679px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Definition&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Characterized by debilitating mood and behavioral change in the week preceding &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;af76284ec71692777192c7c84b5dad\&quot;&gt;menstruation&lt;/span&gt; (luteal phase) that interferes with normal functioning.&lt;/li&gt;\n&lt;li&gt;Disappears within a few days of the onset of menses.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Diagnosis&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;At least 5&lt;/strong&gt; of the following symptoms must be present:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Affective &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;20c04228f61692777191baea410922\&quot;&gt;lability&lt;/span&gt; (e.g., mood swings)&lt;/li&gt;\n&lt;li&gt;Irritability or anger or increased interpersonal conflicts&lt;/li&gt;\n&lt;li&gt;Depressed mood, feeling of hopelessness, or self-deprecating thoughts&lt;/li&gt;\n&lt;li&gt;Anxiety, tension and/or feeling of being keyed up or on edge&lt;/li&gt;\n&lt;li&gt;Decreased interest in usual activities (e.g., work, school)&lt;/li&gt;\n&lt;li&gt;Difficulty in concentration&lt;/li&gt;\n&lt;li&gt;Lethargy, easy fatigability, or marked lack of energy&lt;/li&gt;\n&lt;li&gt;Change in appetite; overeating; specific food cravings&lt;/li&gt;\n&lt;li&gt;Hypersomnia or insomnia&lt;/li&gt;\n&lt;li&gt;Sense of being overwhelmed or out of control&lt;/li&gt;\n&lt;li&gt;Physical Symptoms:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Breast &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;169e1c9eb416927772006ea5a02252\&quot;&gt;tenderness&lt;/span&gt; or swelling&lt;/li&gt;\n&lt;li&gt;Joint or muscle pain&lt;/li&gt;\n&lt;li&gt;Sensation of bloating&lt;/li&gt;\n&lt;li&gt;Weight gain&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Diagnosis: &lt;/strong&gt;Confirmed if these symptoms present for at least 2 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;509310d4411692777199f2ffdb7769\&quot;&gt;symptomatic&lt;/span&gt; cycles.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Differential Diagnosis&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Premenstrual Syndrome (PMS)&lt;/strong&gt;&lt;strong&gt;Â (Option C)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Dysmenorrhea&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Bipolar disorder, major depressive disorder, and dysthymia&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Treatment&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;SSRI: &lt;/strong&gt;Citalopram, escitalopram, fluoxetine, paroxetine and sertraline&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Benzodiazepines: &lt;/strong&gt;Alprazolam&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;PMS&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;PMDD&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Severity of symptoms&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mild to moderate&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Severe&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mood symptoms&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Persistent, but not dominant&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Severe emotional &amp;amp; mood symptoms dominate&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Functional impairment&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Minimal to mid; daily life remains manageable&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Significant; affects work, social, and personal life&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;DSM-5 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;552e9ef8811692777186997018b858\&quot;&gt;diagnostic&lt;/span&gt; criteria&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;No specific criteria&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Requires at least 5 symptoms&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/MMwmWsaPnISQMwbJzWbZ1737272683.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient with major depressive disorder is advised with lithium therapy. Which of the following statements is false about lithium?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;The commonly used form is lithium carbonate (Liâ‚‚COâ‚ƒ)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lithium modulates levels of neurotransmitters and neuropeptides.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lithium is a drug only used for the treatment of psychiatric conditions&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lithium is rapidly and completely absorbed on oral administration&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lithium is a drug only used for the treatment of psychiatric conditions&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:NaN\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Psychiatric uses &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Nonpsychiatric uses&lt;/strong&gt;&lt;strong&gt;*&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Well-established (FDA approved): &lt;/strong&gt;Bipolar disorder&lt;/p&gt;\n\t\t\tÂ \n\n\t\t\t&lt;p&gt;&lt;strong&gt;Evidence benefit in particular groups:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Schizophrenia&lt;/li&gt;\n&lt;li&gt;Aggression (episodic), &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;dd9858c0bf1692777187ed886e9735\&quot;&gt;explosive&lt;/span&gt; behavior, and self-mutilation&lt;/li&gt;\n&lt;li&gt;Conduct disorder in children &amp;amp; adolescents&lt;/li&gt;\n&lt;li&gt;Cognitive disorders&lt;/li&gt;\n&lt;li&gt;Intellectual disability&lt;/li&gt;\n&lt;li&gt;Aggressive prisoners&lt;/li&gt;\n&lt;/ul&gt;\n\t\t\tÂ \n\n\t\t\t&lt;p&gt;&lt;strong&gt;Anecdotal, controversial, unresolved, or doubtful: &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Alcohol and substance-related disorders&lt;/li&gt;\n&lt;li&gt;PTSD&lt;/li&gt;\n&lt;li&gt;OCD&lt;/li&gt;\n&lt;li&gt;ADHD&lt;/li&gt;\n&lt;li&gt;Phobias&lt;/li&gt;\n&lt;li&gt;Eating disorders&lt;/li&gt;\n&lt;li&gt;Cocaine abuse&lt;/li&gt;\n&lt;li&gt;Sexual disorders\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Transvestism&lt;/li&gt;\n&lt;li&gt;Exhibitionism&lt;/li&gt;\n&lt;li&gt;Pathologic hypersexuality&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Personality disorders&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurologic&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Epilepsy&lt;/li&gt;\n&lt;li&gt;Headache&lt;/li&gt;\n&lt;li&gt;Huntington disease&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Hematologic&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Aplastic anemia&lt;/li&gt;\n&lt;li&gt;Cancer- chemotherapy-induced/ radiotherapy-induced&lt;/li&gt;\n&lt;li&gt;Felty syndrome&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Endocrine &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Thyroid cancer&lt;/li&gt;\n&lt;/ul&gt;\n\t\t\tÂ \n\n\t\t\t&lt;p&gt;&lt;strong&gt;Cardiovascular &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Antiarrhythmic agent&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Dermatologic &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Genital herpes&lt;/li&gt;\n&lt;li&gt;Eczematoid &amp;amp; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5d5241c3cf1692777198a1ba71f8d4\&quot;&gt;seborrheic&lt;/span&gt; dermatitis&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Gastrointestinal &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Cyclic vomiting&lt;/li&gt;\n&lt;li&gt;Gastric ulcers&lt;/li&gt;\n&lt;li&gt;Pancreatic cholera&lt;/li&gt;\n&lt;li&gt;Ulcerative colitis&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Respiratory &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Asthma&lt;/li&gt;\n&lt;li&gt;Cystic fibrosis&lt;br/&gt;\n\t\t\t\tÂ &lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;strong&gt;Other&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Bovine &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;1ce806f0111692777198eedf1b5824\&quot;&gt;spastic&lt;/span&gt; paresis&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;Â &lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;*(Do not have FDA approved labeling)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/o2wxYDg9USK2NhuBU5O21737275188.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient with mood disorder is on treatment with lithium. She is suffering from pain in her hand after a sprain. Which of the following NSAIDs can be advised to this patient in this situation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Naproxen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Indomethacin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ibuprofen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aspirin&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Aspirin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:672px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Side effects of LIthium&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurologic &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Benign, nontoxic: Dysphoria, Lack of spontaneity, &lt;strong&gt;Slowed reaction time&lt;/strong&gt;, Memory difficulties&lt;/li&gt;\n&lt;li&gt;Toxic: &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;28606fa66a169277718407469e7e7c\&quot;&gt;Coarse&lt;/span&gt; tremor, Dysarthria, Ataxia, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;8b19cd5e161692777193ad958e52e0\&quot;&gt;Neuromuscular&lt;/span&gt; irritability, Seizures, Coma, Death&lt;/li&gt;\n&lt;li&gt;Miscellaneous: &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;255674f3271692777195c172d86daf\&quot;&gt;Peripheral&lt;/span&gt; neuropathy, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;1bbae82f1f16927771824f797639fa\&quot;&gt;Benign&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;cd42e0ddad1692777190d18c595ec5\&quot;&gt;intracranial&lt;/span&gt; hypertension, &lt;strong&gt;Myasthenia gravis-like syndrome, Lower &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;5710e3461816927771987151d61aef\&quot;&gt;seizure&lt;/span&gt; threshold&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Endocrine &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Thyroid: &lt;strong&gt;Goiter,&lt;/strong&gt; &lt;strong&gt;hypothyroidism&lt;/strong&gt;, exophthalmos, hyperthyroidism&lt;/li&gt;\n&lt;li&gt;Parathyroid: &lt;strong&gt;Hyperparathyroidism&lt;/strong&gt;, adenoma&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Cardiovascular &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Benign T-wave changes&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Sinus &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b10ce4acbf169277719323ffd12306\&quot;&gt;node&lt;/span&gt; function&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Renal &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Concentrating defect, Morphologic changes, &lt;strong&gt;Polyuria &lt;/strong&gt;&lt;strong&gt;(nephrogenic diabetes insipidus)&lt;/strong&gt;, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;10c83adb331692777197f775bec1aa\&quot;&gt;Reduced&lt;/span&gt; GFR, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7063996c3816927771930f70c92eb4\&quot;&gt;Nephrotic&lt;/span&gt; syndrome, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b9356afdba16927771979d068c6587\&quot;&gt;Renal&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;98d387b7bd1692777201278b27be72\&quot;&gt;tubular&lt;/span&gt; acidosis&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Dermatologic &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Acne, Hair loss, Psoriasis, Rash&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Gastrointestinal &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Loss of appetite, Nausea, Vomiting, Diarrhea&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;Â \n\t\t\t&lt;p&gt;&lt;strong&gt;Miscellaneous &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Altered carbohydrate metabolism&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Weight gain&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Fluid &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b668aed705169277719744b6db8f8e\&quot;&gt;retention&lt;/span&gt; &lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Drug interactions&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; rowspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Generally safe and effective.&lt;/li&gt;\n&lt;li&gt;Higher doses of dopamine-releasing agents (DRAs) may increase:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Lithium-induced neurologic side effects.&lt;/li&gt;\n&lt;li&gt;Neuroleptic &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e2952dfc311692777187fa773bcc9f\&quot;&gt;extrapyramidal&lt;/span&gt; symptoms.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Rare cases of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b37b211cbc169277718725f07b5473\&quot;&gt;encephalopathy&lt;/span&gt; were reported.&lt;/li&gt;\n&lt;/ul&gt;\n\t\t\tÂ \n\n\t\t\t&lt;p&gt;&lt;strong&gt;Interactions with Other Medications: &lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Carbamazepine, Lamotrigine, Valproate, Clonazepam: &lt;strong&gt;ï¿ª&lt;/strong&gt;Li concentrations.&lt;/li&gt;\n&lt;li&gt;Diuretics:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Thiazide and Potassium-Sparing Diuretics: &lt;strong&gt;ï¿ª&lt;/strong&gt;Li concentrations.&lt;/li&gt;\n&lt;li&gt;Osmotic and Loop Diuretics, Carbonic &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;0a72e82d651692777181ef79d77e61\&quot;&gt;Anhydrase&lt;/span&gt; Inhibitors, Xanthines: &lt;strong&gt;ï¿¬&lt;/strong&gt;Li concentrations.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;ACE Inhibitors: &lt;strong&gt;ï¿ª&lt;/strong&gt;Li concentrations.&lt;/li&gt;\n&lt;li&gt;Angiotensin II &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9e4959f6f316927771978bb152d440\&quot;&gt;Receptor&lt;/span&gt; Inhibitors (e.g., Losartan, Irbesartan): Do not affect &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; concentrations.&lt;/li&gt;\n&lt;li&gt;NSAIDs:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Many (e.g.,&lt;strong&gt; Indomethacin, Ibuprofen, Naproxen&lt;/strong&gt;) can &lt;strong&gt;ï¿ªLi concentrations&lt;/strong&gt; (decrease &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; clearance). &lt;strong&gt;(Option A, B &amp;amp; C)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Aspirin &lt;/strong&gt;and Sulindac: &lt;strong&gt;Do not affect &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; concentrations.&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Quetiapine (Seroquel): May cause &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;beeeac6882169277719829db4504e9\&quot;&gt;somnolence&lt;/span&gt; but is generally well tolerated.&lt;/li&gt;\n&lt;li&gt;Ziprasidone (Geodon): May modestly increase the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;17cd3771bb1692777190950c142dbe\&quot;&gt;incidence&lt;/span&gt; of tremors.&lt;/li&gt;\n&lt;li&gt;Calcium Channel Inhibitors: Avoid coadministration due to the risk of fatal neurotoxicity.&lt;/li&gt;\n&lt;li&gt;Electroconvulsive Therapy (ECT): &lt;strong&gt;Discontinue &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;42659effea16927771919c6224e529\&quot;&gt;lithium&lt;/span&gt; 2 days before &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;f999d172b91692777186778c4e5593\&quot;&gt;ECT&lt;/span&gt; to reduce &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;74ef5626ab16927771855274381e00\&quot;&gt;delirium&lt;/span&gt; risk.&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/3q3H3IZKXMvJoAKxpFuV1737275826.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following statements is true regarding lithium-induced tremors?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;D2 blockers may worsen lithium tremor.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Coarse tremor is typical of early lithium use.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fine tremor from lithium is most noticeable during rest.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;High-dose steroids are commonly used to treat lithium tremors.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. D2 blockers may worsen lithium tremor.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/3VbLF5mOX69Of5YMglg81737359722.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 19 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test4" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Obsessive Compulsive Related Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Obsessive Compulsive Related Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 5 Total Marks | 15 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 23-year-old female presents with complaints of sudden episodes of intense fear and discomfort. She reports palpitations, shortness of breath, chest tightness, and tremors during these episodes. They occur unpredictably and last for 20â€“30 minutes. She has been free of symptoms between attacks. Her mother had a similar condition in her teens. Vitals are within normal limits, and ECG is unremarkable. Which of the following medications can help her during the acute attacks?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sertraline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Venlafaxine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Clonazepam&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mirtazapine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Clonazepam&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:566px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Panic attacks&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Unexpected i.e., not restricted to any particular situation.&lt;/li&gt;\n&lt;li&gt;Usually last for 20 to 30 minutes, rarely they may last more than one hour.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Cardiopulmonary&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Feeling short of breath&lt;/li&gt;\n&lt;li&gt;Palpitations&lt;/li&gt;\n&lt;li&gt;Chest discomfort&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Gastrointestinal&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Nausea&lt;/li&gt;\n&lt;li&gt;GI discomfort&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Skin and systemic&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Sweating&lt;/li&gt;\n&lt;li&gt;Chills&lt;/li&gt;\n&lt;li&gt;Feeling flushed&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurologic&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Tremors&lt;/li&gt;\n&lt;li&gt;Dizziness&lt;/li&gt;\n&lt;li&gt;Numbness and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b7020a23961692777200b1237ae429\&quot;&gt;tingling&lt;/span&gt; sensation&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Psychiatric&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;Â &lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Derealization&lt;/li&gt;\n&lt;li&gt;Depersonalization&lt;/li&gt;\n&lt;li&gt;Fear of losing control&lt;/li&gt;\n&lt;li&gt;Fear of dying&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/Dq4FQzkpPZbgKi8zQ78B1736578989.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 19-year-old college student reports a persistent, irrational fear of blood. She states that seeing blood, even in movies, makes her feel faint and nauseous. This has caused her to avoid medical procedures and prevented her from volunteering for first aid training, which is required for her degree. Her symptoms have been present since childhood. Which of the following would be the most effective initial treatment for this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Behavioral therapy with exposure therapy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Serotonin-Norepinephrine Reuptake Inhibitor (SNRI)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Short term benzodiazepines&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Antipsychotic medication&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Behavioral therapy with exposure therapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:280px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Common phobias&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Acrophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Fear of height&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Ailurophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Cats&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Cynophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Dogs&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Claustrophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Closed spaces&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Mysophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Dirt and Germs&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Hydrophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Water&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Thanatophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Death&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Nyctophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Dark&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Xenophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Strangers&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Pyrophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Fire&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Hemophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Blood&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Arachnophobia&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Spiders&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/JhO7yeF0BiP3lpSwDss91736670308.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;In Psychiatry rotations you are asked by the consultant to take a history of a 19-year-old college student who is referred to a mental health professional due to severe anxiety related to social interactions. What is a characteristic feature that can help you distinguish social anxiety disorder from other anxiety disorders?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Persistent worry about future events leading to avoidance behavior.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intense fear of being embarrassed or judged in social situations.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Experiencing panic attacks in multiple, unpredictable situations.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Marked psychosocial distress and/or impairment in functioning.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Intense fear of being embarrassed or judged in social situations.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/D1ntTWtQpT26IsdaF53T1736821976.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 24-year-old woman presents with concerns about her facial appearance. She believes her nose is too large, although others reassure her it looks normal. She spends hours every day checking her appearance in the mirror and often compares herself to others. She has recently started avoiding social gatherings due to feeling self-conscious and is considering plastic surgery. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Social Anxiety Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Body Dysmorphic Disorder&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Delusional Dysmorphophobia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Generalized Anxiety Disorder&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Body Dysmorphic Disorder&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;References:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;&lt;li&gt;â†³ Definition Preoccupation with 1 or more perceived defects or flaws in physical appearance&lt;/li&gt;&lt;li&gt;â†³ Definition&lt;/li&gt;&lt;li&gt;â†³ Definition&lt;/li&gt;&lt;li&gt;â†³ Definition&lt;/li&gt;&lt;li&gt;â†³ Preoccupation with 1 or more perceived defects or flaws in physical appearance&lt;/li&gt;&lt;li&gt;â†³ Preoccupation with 1 or more perceived defects or flaws in physical appearance&lt;/li&gt;&lt;li&gt;â†³ Features Compare themselves with others Checking the mirror frequently/ avoiding it all together Trying to hide perceived flaws Ideas or delusions of reference Social avoidance May seek plastic surgery Differential diagnosis- Delusional dysmorphophobia: fixed belief without insight that they are â€œdisfiguredâ€ (Option C ruled out)&lt;/li&gt;&lt;li&gt;â†³ Features&lt;/li&gt;&lt;li&gt;â†³ Features&lt;/li&gt;&lt;li&gt;â†³ Features&lt;/li&gt;&lt;li&gt;â†³ Compare themselves with others Checking the mirror frequently/ avoiding it all together Trying to hide perceived flaws Ideas or delusions of reference Social avoidance May seek plastic surgery Differential diagnosis- Delusional dysmorphophobia: fixed belief without insight that they are â€œdisfiguredâ€ (Option C ruled out)&lt;/li&gt;&lt;li&gt;â†³ Compare themselves with others Checking the mirror frequently/ avoiding it all together Trying to hide perceived flaws Ideas or delusions of reference Social avoidance May seek plastic surgery Differential diagnosis- Delusional dysmorphophobia: fixed belief without insight that they are â€œdisfiguredâ€ (Option C ruled out)&lt;/li&gt;&lt;li&gt;â†³ Compare themselves with others&lt;/li&gt;&lt;li&gt;â†³ Checking the mirror frequently/ avoiding it all together&lt;/li&gt;&lt;li&gt;â†³ Trying to hide perceived flaws&lt;/li&gt;&lt;li&gt;â†³ Ideas or delusions of reference&lt;/li&gt;&lt;li&gt;â†³ Social avoidance&lt;/li&gt;&lt;li&gt;â†³ May seek plastic surgery&lt;/li&gt;&lt;li&gt;â†³ Differential diagnosis- Delusional dysmorphophobia: fixed belief without insight that they are â€œdisfiguredâ€ (Option C ruled out)&lt;/li&gt;&lt;li&gt;â†³ (Option C ruled out)&lt;/li&gt;&lt;li&gt;â†³ Treatment SSRI CBT&lt;/li&gt;&lt;li&gt;â†³ Treatment&lt;/li&gt;&lt;li&gt;â†³ Treatment&lt;/li&gt;&lt;li&gt;â†³ Treatment&lt;/li&gt;&lt;li&gt;â†³ SSRI CBT&lt;/li&gt;&lt;li&gt;â†³ SSRI CBT&lt;/li&gt;&lt;li&gt;â†³ SSRI&lt;/li&gt;&lt;li&gt;â†³ CBT&lt;/li&gt;&lt;li&gt;â†³ Social Anxiety Disorder (Option A): This involves intense fear of social situations due to fear of negative evaluation but without the specific focus on perceived physical flaws.&lt;/li&gt;&lt;li&gt;â†³ Social Anxiety Disorder (Option A):&lt;/li&gt;&lt;li&gt;â†³ Generalized Anxiety Disorder (GAD) (Option D): GAD involves excessive worry about various aspects of life, but it is not focused on physical appearance or perceived flaws.&lt;/li&gt;&lt;li&gt;â†³ Generalized Anxiety Disorder (GAD) (Option D):&lt;/li&gt;&lt;/ul&gt;\n&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Definition&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Preoccupation with 1 or more perceived defects or flaws in physical appearance&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Compare themselves with others&lt;/li&gt;\n&lt;li&gt;Checking the mirror frequently/ avoiding it all together&lt;/li&gt;\n&lt;li&gt;Trying to hide perceived flaws&lt;/li&gt;\n&lt;li&gt;Ideas or delusions of reference&lt;/li&gt;\n&lt;li&gt;Social avoidance&lt;/li&gt;\n&lt;li&gt;May seek plastic surgery&lt;/li&gt;\n&lt;li&gt;Differential diagnosis- Delusional dysmorphophobia: fixed belief without insight that they are â€œdisfiguredâ€ &lt;strong&gt;(Option C ruled out)&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Treatment&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;SSRI&lt;/li&gt;\n&lt;li&gt;CBT&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/9HQ1HjdQgEzyYDVm2zrt1736860542.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following is not a symptom of Post-Traumatic Stress Disorder (PTSD)?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Flashbacks and nightmares&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Avoidance of reminders related to the trauma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Intense feelings of guilt and fear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Increased sleepiness&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Increased sleepiness&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/2sGwjrSkvv6gJsrSjA4A1736864106.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test5" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Schizophrenia And Other Psychotic Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Schizophrenia And Other Psychotic Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                6 Questions | 6 Total Marks | 16 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;According to Eugen Bleuler, which of the following symptoms are diagnostic criteria for schizophrenia? Affect disturbances Association disturbances Autism Ambivalence&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1,2,3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2,3,4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1,2,4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1, 2, 3, 4&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 1, 2, 3, 4&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/gasrs0RAyDfElnEq8bi41736166392.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 34-year-old woman is experiencing significant delusions of persecution and often fears that her food is being tampered with. She has auditory hallucinations urging her to remain vigilant and distrustful. While her cognitive abilities seem intact, her emotional reactions are inappropriate. What diagnosis should be considered?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Catatonic Schizophrenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Van Gogh syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;PfRopf Schizophrenia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Paranoid Schizophrenia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Paranoid Schizophrenia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/1c0pN4kBYCKCCKV8gxaD1732112151.png&quot;], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:640px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Type of Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Characteristics&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Paranoid &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d844b672a616927771988fee71197b\&quot;&gt;Schizophrenia&lt;/span&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Characterised by&lt;strong&gt; delusions &lt;/strong&gt;and &lt;strong&gt; hallucinations.&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Individuals may have a fixed belief that others are out to harm them, often leading to mistrust and vigilance.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Cognitive functions usually remain intac&lt;/strong&gt;t, while emotional responses may be inappropriate.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Catatonic &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d844b672a616927771988fee71197b\&quot;&gt;Schizophrenia&lt;/span&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Characterised by &lt;strong&gt;three&lt;/strong&gt;&lt;strong&gt; or more &lt;/strong&gt;of the following symptoms:&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Motor &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d9d99d2177169277718940abaf77fb\&quot;&gt;immobility&lt;/span&gt; ( stupor)&lt;/li&gt;\n&lt;li&gt;Excessive,odd movement (stereotypies, or mannerisms)&lt;/li&gt;\n&lt;li&gt;Waxy flexibility (bending like a &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9eae373ada1692777202074bbc0222\&quot;&gt;wax&lt;/span&gt; candle)&lt;/li&gt;\n&lt;li&gt;Extreme &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e06f61f915169277719362150d287c\&quot;&gt;negativism&lt;/span&gt; (resisting instructions or maintaining rigidity)&lt;/li&gt;\n&lt;li&gt;Unusual postures (bizarre posturing, catalepsy)&lt;/li&gt;\n&lt;li&gt;Echolalia or &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;12f7ccacb21692777186ad7bbad4a3\&quot;&gt;echopraxia&lt;/span&gt; (Mimicking speech or movements)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Disorganised (Hebephrenic) Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Involves disorganised speech and behavior.&lt;/li&gt;\n&lt;li&gt;Inappropriate emotional responses and poor functioning.&lt;/li&gt;\n&lt;li&gt;Typically associated with a poorer prognosis.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Residual Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;History of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;d844b672a616927771988fee71197b\&quot;&gt;schizophrenia&lt;/span&gt; with delusions and hallucinations (in the past 1 year) with lingering negative symptoms but minimal or no positive symptoms at present.&lt;/li&gt;\n&lt;li&gt;No prominent delusions or hallucinations&lt;/li&gt;\n&lt;li&gt;Individuals may exhibit social withdrawal and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;10c83adb331692777197f775bec1aa\&quot;&gt;reduced&lt;/span&gt; emotional expression.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Simple Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Involves prominent negative symptoms&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Undifferentiated Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Diagnosis for patients who do not fit into other categories presenting a mix of symptoms.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/hWMEGd555JJRa5pdAGPz1737783419.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 22-year-old male is evaluated for his first episode of psychosis. As part of the assessment, the clinician reviews various potential risk factors. Which of the following is not considered a risk factor for developing schizophrenia?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Childhood trauma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Born in Winter&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Urban upbringing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Male gender&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Male gender&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:551px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Positive factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Negative factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Acute onset&lt;/li&gt;\n&lt;li&gt;Female sex&lt;/li&gt;\n&lt;li&gt;Living in a developed country&lt;/li&gt;\n&lt;li&gt;Presence of mood symptoms&lt;/li&gt;\n&lt;li&gt;Family history of mood disorder&lt;/li&gt;\n&lt;li&gt;Married&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Insidious onset&lt;/li&gt;\n&lt;li&gt;Childhood or adolescent onset&lt;/li&gt;\n&lt;li&gt;Poor &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b6e0c8d77d1692777196eea691ba41\&quot;&gt;premorbid&lt;/span&gt; functioning&lt;/li&gt;\n&lt;li&gt;Cognitive impairment&lt;/li&gt;\n&lt;li&gt;Absence of mood symptoms&lt;/li&gt;\n&lt;li&gt;Negative symptoms&lt;/li&gt;\n&lt;li&gt;Family History of schizophrenia&lt;/li&gt;\n&lt;li&gt;Single/ separated/ divorced&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/eHHvAcgcQWP1L6Eo4EC11737784708.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 52-year-old obese male with type 2 diabetes presents with schizophrenia, primarily showing negative symptoms like social withdrawal and lack of motivation. Which antipsychotic medication is the most appropriate choice for his treatment?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aripiprazole&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Olanzapine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Haloperidol&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chlorpromazine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Aripiprazole&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;High risk of weight gain&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Moderate risk of weight gain&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Low risk of weight gain&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Clozapine&lt;/p&gt;\n&lt;p&gt;Olanzapine&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Chlorpromazine&lt;/p&gt;\n&lt;p&gt;Iloperidone&lt;/p&gt;\n&lt;p&gt;Sertindole&lt;/p&gt;\n&lt;p&gt;Quetiapine&lt;/p&gt;\n&lt;p&gt;Risperidone&lt;/p&gt;\n&lt;p&gt;Paliperidone&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Amisulpride&lt;/p&gt;\n&lt;p&gt;Asenapine&lt;/p&gt;\n&lt;p&gt;Brexpiprazole&lt;/p&gt;\n&lt;p&gt;Aripiprazole&lt;/p&gt;\n&lt;p&gt;Cariprazine&lt;/p&gt;\n&lt;p&gt;Haloperidol&lt;/p&gt;\n&lt;p&gt;Lumateperone&lt;/p&gt;\n&lt;p&gt;Lurasidone&lt;/p&gt;\n&lt;p&gt;Sulpiride&lt;/p&gt;\n&lt;p&gt;Trifluoperazine&lt;/p&gt;\n&lt;p&gt;Ziprasidone&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/dZ2NFYp1RY467zdD8pvi1737790409.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 32-year-old male with schizophrenia has been non-adherent to oral antipsychotic medication, resulting in multiple relapses. The psychiatrist decides to switch him to a long-acting injectable antipsychotic to improve adherence. Which of the following medications is preferred?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Clozapine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chlorpromazine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Zotepine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Risperidone&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Risperidone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Characteristic&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;1st Generation (Typical) LAIs&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;2nd Generation (Atypical) LAIs&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Examples&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Fluphenazine&lt;/li&gt;\n&lt;li&gt;Haloperidol&lt;/li&gt;\n&lt;li&gt;Flupenthixol&lt;/li&gt;\n&lt;li&gt;Zuclopenthixol&lt;/li&gt;\n&lt;li&gt;Pipotiazine&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Risperidone &lt;strong&gt;(Option D)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Paliperidone&lt;/li&gt;\n&lt;li&gt;Aripiprazole&lt;/li&gt;\n&lt;li&gt;Olanzapine&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Formulation&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Oil-based&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Aqueous-based&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Absorption rate&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Slower&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Quicker&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Test dose requirement&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Often required&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Not required&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Special note&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;All drugs are esterified forms of the parent compound except Risperidone, which is &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e26ba9a1d41692777187d0ad03a8c1\&quot;&gt;encapsulated&lt;/span&gt; in &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;54a162202216927771966d1ee34a74\&quot;&gt;polymer&lt;/span&gt; microspheres.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/eoEf7FaqoytHbgK5SlnV1737804168.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An 8-year-old boy has been exhibiting significant behavioural changes over the past six months, including increased withdrawal, loss of interest in activities, declining academic performance, self-talk, and occasional reports of visual hallucinations. Which factor is most likely associated with a better prognosis in this case?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Insidious in onset&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Prominence of negative symptoms&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Presence of precipitating factors&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Absence of mood symptoms&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Presence of precipitating factors&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:655px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Factors &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Good Prognosis&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Poor &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e580b4033e169277719609af594c16\&quot;&gt;Prognosis&lt;/span&gt; &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Onset &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Acute (within two weeks) or Abrupt (within two days)&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Insidious&lt;/strong&gt; &lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Age of onset&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Late&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Early&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Subtypes &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Catatonic schizophrenia&lt;/li&gt;\n&lt;li&gt;Paranoid schizophrenia&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Simple (Worst) schizophrenia&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Hebephrenic schizophrenia&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Gender &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Female&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Male&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Prominent symptoms &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Positive symptoms&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Negative symptoms &lt;/strong&gt;&lt;strong&gt;(Option B)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Mood symptoms&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Present&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Absent&lt;/strong&gt; &lt;strong&gt;(Option D)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Family history &lt;/strong&gt;&lt;strong&gt;of Schizophrenia&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Absent&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Present&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Marital status&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Married&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Unmarried or divorced&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Social support&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Good&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Poor&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Premorbid personality disorder&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Absent&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Present&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Career &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Employed&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Unemployed&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Precipitating factors or Stressors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Present&lt;/strong&gt; &lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Absent&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Substance abuse&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Absent&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Present&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Compliance to medication&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Compliant&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;Non-compliant&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/Srd7nRB3ac8xbA7OmWRI1737804805.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 16 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test6" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Sleep Wake Eating Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Sleep Wake Eating Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                2 Questions | 2 Total Marks | 12 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Which of the following EEG wave patterns is typically associated with specific states of consciousness or neurological activity in humans, and what does it correctly indicate?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alpha waves (8-12 Hz) - Indicate deep sleep and unconsciousness.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Theta waves (4-7 Hz) - Often seen in drowsiness and can indicate potential seizures.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Beta waves (13-30 Hz) - Commonly associated with relaxed wakefulness and mental activity.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Delta waves (0.5-4 Hz) - Associated with REM sleep and alertness.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Theta waves (4-7 Hz) - Often seen in drowsiness and can indicate potential seizures.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/7Rx6qooMll2CVFrWubcl1732094381.png&quot;], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Delta Wave &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Seen in slow wave &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7fdc13a6a116927771865b3a13263e\&quot;&gt;deep sleep&lt;/span&gt; or &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;f7d3133242169277718518c059ad55\&quot;&gt;delta&lt;/span&gt; sleep.&lt;strong&gt; (Option D)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Also seen in infants.&lt;/li&gt;\n&lt;li&gt;Frequency: 0.5-3 Hz.&lt;/li&gt;\n&lt;li&gt;Amplitude or the micro voltage- High, â‰¥75 V.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Theta waves &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;The transition from &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;882ef330fb16927772022093f7518f\&quot;&gt;wakefulness&lt;/span&gt; to sleep.&lt;/li&gt;\n&lt;li&gt;1st wave that is encountered in sleep.&lt;/li&gt;\n&lt;li&gt;Also seen in children.&lt;/li&gt;\n&lt;li&gt;Frequency: 4-7 Hz.&lt;/li&gt;\n&lt;li&gt;Low-voltage waves.&lt;/li&gt;\n&lt;li&gt;Prominently seen in the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;637ea4d17516927772003be2b2aae4\&quot;&gt;temporal&lt;/span&gt; and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;51df38de3d1692777194ced4c4bab5\&quot;&gt;parietal&lt;/span&gt; regions.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Alpha Waves &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Seen at rest - When the person is awake but the eyes are closed.Â &lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Frequency: 8-13Hz.&lt;/li&gt;\n&lt;li&gt;Low-voltage waves.&lt;/li&gt;\n&lt;li&gt;Seen in &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;77dc7a0ab81692777194dba7ab78ab\&quot;&gt;occipital&lt;/span&gt; and parieto-occipital areas.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Beta Wave &lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Seen in a fully awake person (eyes open).Â &lt;strong&gt;(Option C)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Frequency: Higher, 14-30 Hz.&lt;/li&gt;\n&lt;li&gt;Low-voltage waves.&lt;/li&gt;\n&lt;li&gt;Present in the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;35aa36279d16927772031c7ce8d6e5\&quot;&gt;frontal&lt;/span&gt; and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;51df38de3d1692777194ced4c4bab5\&quot;&gt;parietal&lt;/span&gt; areas.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Gamma wave&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;High-frequency brain activity.&lt;/li&gt;\n&lt;li&gt;Frequencies between 30-100 Hz.&lt;/li&gt;\n&lt;li&gt;Prominent during &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7bdd34850816927771973c86f95b79\&quot;&gt;REM&lt;/span&gt; sleep.&lt;/li&gt;\n&lt;li&gt;Contribute to the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b1357efd5116927771859dfba380e7\&quot;&gt;consolidation&lt;/span&gt; of memories and processing of information.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/pXf0mmPJaerymJ3nnZPZ1737901438.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 45-year-old man presents with difficulty falling asleep and frequent awakenings for the past six months. He reports feeling fatigued during the day but denies any history of substance use, psychiatric illness, or significant stressors. His physical examination and laboratory tests are unremarkable. He has tried over-the-counter sleep aids with little effect. Which of the following is the next best step in the management of this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cognitive Behavioral Therapy for Insomnia (CBT-I)&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Melatonin supplements&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Benzodiazepines&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Antihistamines&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cognitive Behavioral Therapy for Insomnia (CBT-I)&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/r0FRPujzp7mTJLAzBefJ1737914432.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 12 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test7" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Somatic Symptom And Related Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Somatic Symptom And Related Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 5 Total Marks | 15 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 32 y/o woman named Sarah goes missing after a traumatic breakup. Two weeks later, she is found in a different city, identifying herself as \&quot;Lily\&quot; and claiming she has always lived there. She cannot recall any details of her past or her true identity. What is the most likely diagnosis for Sarah?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dissociative Amnesia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Possession Trance Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Depersonalization Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dissociative Fugue&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Dissociative Fugue&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/7zZ0SmQsoBARn3KcGpXm1737814428.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 40 y/o woman visits a cultural healer, stating that she sometimes feels overwhelmed by a spirit that speaks through her. During these episodes, she adopts a distinct persona, telling her family to respect certain traditions as if she were that spirit. After the episodes, she cannot recall what transpired and feels distressed about her lack of control. Based on this description, what is the most likely diagnosis for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dissociative Trance Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Possession Trance Disorder&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Derealization disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Multiple personality disorder&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Possession Trance Disorder&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/T1YN0gaIjXJKh3uTnHHG1737815208.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 28-year-old woman reports feeling as if sheâ€™s living in a dream, with her surroundings appearing foggy and unreal. She recognizes that everything is real but feels detached from her surroundings, and people seem distant or cartoon-like. These episodes last from a few minutes to several hours and have been occurring for months, causing significant anxiety and interfering with her daily activities. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Depersonalization Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Derealization Disorder&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dissociative Identity Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dissociative Fugue&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Derealization Disorder&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:560px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Depersonalisation&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p style=\&quot;text-align: center;\&quot;&gt;&lt;strong&gt;Derealization&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;A feeling of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;2b005085881692777186cf95c3ad51\&quot;&gt;detachment&lt;/span&gt; from the self&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;A feeling of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;2b005085881692777186cf95c3ad51\&quot;&gt;detachment&lt;/span&gt; from the world&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;The person may feel like they are watching themselves from outside the body. &lt;strong&gt;(Option A ruled out)&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\&quot;&gt;\n&lt;p&gt;The person feels as if the world is unreal.&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/arBTOofHmORhVNxxSimR1737819599.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 28 y/o woman visits a therapist. She describes experiencing morning sickness, breast enlargement, and noticeable abdominal distension. Despite multiple home pregnancy tests that have returned negative results, she insists that she feels the baby moving. What is the most likely diagnosis for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pseudologia fantastica&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pseudocyesis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nihilism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lilliputian hallucination&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pseudocyesis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/JJgeFysGW3hOFRgXltiU1737824687.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 35 y/o male is disoriented and gives bizarre answers, responding \&quot;5\&quot; to \&quot;What is 2 + 2?\&quot; His wife notes significant work-related stress, and he reports hallucinations. There is no history of substance abuse or brain injury, and his neurological exam is normal.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Korsakoff syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dissociative Identity Disorder&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ganser syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Schizophrenia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Ganser syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/xlYd0VcJh6t5IHM8cz6N1737825255.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test8" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Substance Use And Addictive Disorders&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Substance Use And Addictive Disorders&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 5 Total Marks | 15 min Duration | ~60 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question ðŸ§­
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result ðŸ§­&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 28-year-old male presents with a long-standing history of cocaine abuse. Which of the following best explains the etiology and maintenance of his substance use disorder?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Genetic polymorphisms affecting dopamine production&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Alexithymia leading to self-medication with cocaine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Conditioned learning and neuroplasticity in the brain-reward circuitry&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Modulation of the GABA system resulting in tolerance&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Conditioned learning and neuroplasticity in the brain-reward circuitry&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td rowspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Biological Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Genetic Predisposition&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Studies of twins, adoptees, and siblings indicate a strong genetic component, particularly in alcohol use disorders.&lt;/li&gt;\n&lt;li&gt;Genetic factors may influence &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e28fd027b416927771932bc23ba0a5\&quot;&gt;neurotransmitter&lt;/span&gt; systems, affecting an individual&#x27;s response to substances.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neurochemical Changes&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;SUDs involve alterations in brain &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e28fd027b416927771932bc23ba0a5\&quot;&gt;neurotransmitter&lt;/span&gt; systems, particularly:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Dopaminergic system: Critical in the brain&#x27;s reward circuitry&lt;/li&gt;\n&lt;li&gt;Opioid system: Involved in pain &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;6c0c4e41b31692777192be0fbfce62\&quot;&gt;modulation&lt;/span&gt; and reward&lt;/li&gt;\n&lt;li&gt;GABA system: Implicated in anxiety reduction and sedation&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;The &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9ccb2fd2f31692777201e231bfda74\&quot;&gt;ventral&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;72891a28811692777200adab7f11f2\&quot;&gt;tegmental&lt;/span&gt; area (VTA) and its projections to the &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;ff628904401692777193c8a9f9159e\&quot;&gt;nucleus&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e5c72f9dcb1692777180b7bae38525\&quot;&gt;accumbens&lt;/span&gt; are key in the brain-reward circuitry.&lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Neuroplasticity&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Repeated substance use leads to adaptive changes in the brain, affecting:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Neurotransmitter release&lt;/li&gt;\n&lt;li&gt;Receptor function&lt;/li&gt;\n&lt;li&gt;Second-messenger systems&lt;/li&gt;\n&lt;li&gt;Gene regulation&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td rowspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Psycho-&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;logical Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Learning and Conditioning&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Operant conditioning: Substance use is reinforced by its consequences (e.g., euphoria, relief from negative states).&lt;/li&gt;\n&lt;li&gt;Classical conditioning: Environmental cues associated with substance use can trigger craving or withdrawal symptoms.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Cognitive Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Beliefs about substance effects&lt;/li&gt;\n&lt;li&gt;Expectations of drug-related outcomes&lt;/li&gt;\n&lt;li&gt;Impaired decision-making processes&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Mental Health&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Pre-existing mental health issues may contribute to substance use as a &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a1b06f401f1692777203a53393ba98\&quot;&gt;form&lt;/span&gt; of self-medication.&lt;/li&gt;\n&lt;li&gt;Some individuals may have difficulty recognizing or expressing emotions &lt;strong&gt;(alexithymia)&lt;/strong&gt;, potentially leading to substance use.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td rowspan=\&quot;3\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Environmental/&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;Social Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Social&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Peer pressure and social norms&lt;/li&gt;\n&lt;li&gt;Family dynamics and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;9801899a201692777192ec0e7f056b\&quot;&gt;modeling&lt;/span&gt; of substance use behavior&lt;/li&gt;\n&lt;li&gt;Cultural attitudes towards substance use&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Availability and Accessibility&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Ease of obtaining substances&lt;/li&gt;\n&lt;li&gt;Exposure to drug-using environments&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Stress and Life Events&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Chronic stress or &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;18034e0517169277720002aaa66d36\&quot;&gt;traumatic&lt;/span&gt; experiences may increase &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;807e7281f1169277720228d2b0b559\&quot;&gt;vulnerability&lt;/span&gt; to substance use.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Interplay of Factors&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;Â &lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Initial use may be influenced by environmental factors (e.g., availability, peer pressure).&lt;/li&gt;\n&lt;li&gt;Continued use is affected by individual biology and psychology (e.g., how drug effects are perceived, and the development of tolerance).&lt;/li&gt;\n&lt;li&gt;Progression to &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;01be542e8e16927771861e861ab536\&quot;&gt;dependence&lt;/span&gt; involves neuroadaptive changes, learning processes, and environmental reinforcement.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/7hvR0bkLw2rCG4OXmxh01737097110.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 35-year-old man is brought to the emergency department after heavy alcohol consumption. His blood alcohol concentration (BAC) was recorded at two different times: once when it was rising to 100 mg/dL and later when it was falling to the same level. The physician noted that the patient appeared more intoxicated during the rising phase of BAC compared to the falling phase, even though the BAC was identical at both points. Which of the following best explains this phenomenon?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alcohol-Mellanby effect&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Reverse tolerance&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acute tolerance&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Delirium tremens&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Alcohol-Mellanby effect&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/UV3R9T4i59of6rOXzk1X1734276305.jpg&quot;], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/FMO6pnN9g6GhbgBXfsnm1737098674.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 30-year-old male is found unresponsive on the floor of his apartment by a friend. Upon arrival, emergency medical personnel observe the following: the patient has a weak pulse, slow and shallow respirations, and pinpoint pupils. His skin is cold and clammy, and there are needle track marks on his arms. His blood pressure is significantly low. What is the most appropriate initial treatment for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Administer intravenous naloxone at a rapid rate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ensure an adequate airway and mechanically ventilate the patient&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Give intravenous fluids to manage hypotension&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Perform a CT scan to rule out intracranial hemorrhage&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Ensure an adequate airway and mechanically ventilate the patient&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://image.prepladder.com/content/XU4RkwFjuhxdge7RMuMs1734284951.png&quot;], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Opioid Toxicity&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Clinical features&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Treatment&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Clinical Triad &lt;/strong&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;p&gt;&lt;img alt=\&quot;\&quot; data-author=\&quot;NA\&quot; data-hash=\&quot;\&quot; data-license=\&quot;NA\&quot; data-source=\&quot;NA\&quot; data-tags=\&quot;\&quot; height=\&quot;168\&quot; src=\&quot;https://image.prepladder.com/content/XU4RkwFjuhxdge7RMuMs1734284951.png\&quot; width=\&quot;210\&quot;/&gt;&lt;/p&gt;\n\t\t\tÂ \n\n\t\t\t&lt;ul&gt;\n&lt;li&gt;Opioid &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;3f4eecb1c6169277719459c801fb19\&quot;&gt;overdose&lt;/span&gt; often leads to &lt;strong&gt;respiratory arrest.&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Symptoms include marked unresponsiveness, coma, slow respiration, hypothermia, hypotension, and bradycardia&lt;/li&gt;\n&lt;li&gt;Inspect for needle tracks in arms, legs, ankles, groin, and &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;51b29c48291692777186b488ac8cd9\&quot;&gt;dorsal&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;75ddd4cc7016927772012e0acd424d\&quot;&gt;vein&lt;/span&gt; of the penis.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;Ensure an adequate airway; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;a246c8382816927771821a267ea486\&quot;&gt;aspirate&lt;/span&gt; secretions if needed.&lt;/li&gt;\n&lt;li&gt;Use &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b45075a0e1169277719252465ca5ba\&quot;&gt;mechanical ventilation&lt;/span&gt; until naloxone is given.&lt;/li&gt;\n&lt;li&gt;Drug of Choice: &lt;strong&gt;Intravenous Naloxone&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Opioid Antagonist which is a short acting.&lt;/li&gt;\n&lt;li&gt;Given at a &lt;strong&gt;slow rate of 0.8 mg/70 kg &lt;/strong&gt;of body weight. &lt;strong&gt;(Option A)&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Signs of improvement\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Increase &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;cfad80a0f716927771979aae100f95\&quot;&gt;respiratory&lt;/span&gt; rate&lt;/li&gt;\n&lt;li&gt;Pupillary Dilation&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;If there is no response after the initial dose, repeat naloxone every few minutes.&lt;/li&gt;\n&lt;li&gt;If no response after 4-5 mg, consider nonopioid substances as factors.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/XxZMiNwUgOwnVsrhS6vb1737122154.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 35-year-old male with opioid use disorder presents with severe muscle aches, diarrhea, abdominal cramps, restlessness, and chills after stopping heroin \&quot;cold turkey.\&quot; He has piloerection, dilated pupils, tachycardia, and mild hypertension. He refuses opioid for managing the withdrawals. What is the most appropriate initial pharmacological treatment for his opioid withdrawal symptoms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Methadone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Buprenorphine + Naloxone combination therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Clonidine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Naloxone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Clonidine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table cellspacing=\&quot;0\&quot; style=\&quot;border-collapse:collapse; width:624px\&quot;&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Treatment of &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;Opioid&lt;/span&gt; Withdrawal&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Detoxification&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p style=\&quot;text-align:center\&quot;&gt;&lt;strong&gt;Maintenance&lt;/strong&gt;&lt;/p&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Opioid Agents&lt;/strong&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Methadone:&lt;/strong&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;Opioid&lt;/span&gt; Agonist.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Buprenorphine&lt;/strong&gt;:Partial &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;Opioid&lt;/span&gt; Agonist.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;td rowspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Opioid Substitution Therapy (OST):&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Methadone&lt;/strong&gt;: Full &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; agonist\n\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Improves treatment &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;b668aed705169277719744b6db8f8e\&quot;&gt;retention&lt;/span&gt; and reduces criminal behavior.&lt;/li&gt;\n&lt;li&gt;80â€“120 mg/day.&lt;/li&gt;\n&lt;li&gt;Side effects: constipation, sweating, sexual dysfunction.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Buprenorphine&lt;/strong&gt;:\n\t\t\t\t&lt;ul&gt;\n&lt;li&gt;Partial &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;7d8d28cda71692777180c89a3c86ce\&quot;&gt;agonist&lt;/span&gt; with a ceiling effect (limits &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;3f4eecb1c6169277719459c801fb19\&quot;&gt;overdose&lt;/span&gt; risk).&lt;/li&gt;\n&lt;li&gt;Combined with &lt;strong&gt;naloxone &lt;/strong&gt;to prevent abuse.&lt;/li&gt;\n&lt;li&gt;Taken sublingually (tablet/film).&lt;/li&gt;\n&lt;li&gt;Side effects: constipation, nausea, drowsiness.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n\t\t\tÂ \n\n\t\t\t&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Opioid Antagonists (Naloxone, Naltrexone):&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Naloxone&lt;/strong&gt;: Reverses &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;3f4eecb1c6169277719459c801fb19\&quot;&gt;overdose&lt;/span&gt; (emergency use).&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Naltrexone&lt;/strong&gt;: Blocks &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; effects to prevent euphoria, reduces &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; cravings. Available in oral and long-acting &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;c3d7276c3e1692777190b4b6762dd0\&quot;&gt;injectable&lt;/span&gt; forms.&lt;/li&gt;\n&lt;li&gt;Does not cause &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;01be542e8e16927771861e861ab536\&quot;&gt;dependence&lt;/span&gt; or withdrawal but requires patient adherence.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td rowspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Opioid addicted patient but unwilling to be treated with opioids: &lt;/strong&gt;&lt;strong&gt;Symptomatic agents&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;&lt;strong&gt;Clonidine&lt;/strong&gt;\n&lt;ul&gt;\n&lt;li&gt;Alpha-2 &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;0132a02ec31692777180a840765aff\&quot;&gt;Adrenergic&lt;/span&gt; Agonist.&lt;/li&gt;\n&lt;li&gt;Reduces &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;bd1c98736616927771820954b0a744\&quot;&gt;autonomic&lt;/span&gt; withdrawal symptoms- Sweating, Restlessness, &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;bb6d2476421692777200c2af1ac0c8\&quot;&gt;Tremor&lt;/span&gt; or Rhinorrhea.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/li&gt;\n&lt;li&gt;Anxiety: &lt;strong&gt;Benzodiazepines&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Insomnia: &lt;strong&gt;Zolpidem&lt;/strong&gt;&lt;/li&gt;\n&lt;li&gt;Musculoskeletal Pain: NSAIDs (&lt;strong&gt;Ibuprofen&lt;/strong&gt;)&lt;/li&gt;\n&lt;li&gt;GI Symptoms: Antiemetic Diarrhea (&lt;strong&gt;Loperamide&lt;/strong&gt;)&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Pregnant Women with &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;Opioid&lt;/span&gt; Use Disorder:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Illicit &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; use during pregnancy increases risks for both mother and baby&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Methadone or buprenorphine&lt;/strong&gt; maintenance reduces risks, though &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;77493a5b781692777193df12530299\&quot;&gt;neonatal&lt;/span&gt; &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;e22dbf6c52169277719441ac94a69e\&quot;&gt;opioid&lt;/span&gt; withdrawal may still occur.&lt;/li&gt;\n&lt;li&gt;Associated risks- &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;77493a5b781692777193df12530299\&quot;&gt;Neonatal&lt;/span&gt; infections (HIV), &lt;span class=\&quot;customMeta\&quot; data-dictid=\&quot;84f13673191692777196762b18e036\&quot;&gt;premature&lt;/span&gt; labor, low birth weight, and sudden infant death syndrome (SIDS).&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n&lt;td colspan=\&quot;2\&quot; style=\&quot;border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\&quot;&gt;\n&lt;p&gt;&lt;strong&gt;Psychotherapy Modalities/ Non- Pharmacological Treatment:&lt;/strong&gt;&lt;/p&gt;\n&lt;ul&gt;\n&lt;li&gt;Effective treatments: Individual therapy, CBT, family therapy, support groups (NA), and social skills training.&lt;/li&gt;\n&lt;li&gt;Social skills training is key for patients with poor social skills.&lt;/li&gt;\n&lt;li&gt;Residential programs for people with substance use disorders.&lt;/li&gt;\n&lt;li&gt;Education on HIV transmission and safe sex is essential.&lt;/li&gt;\n&lt;li&gt;Needle-exchange programs, where available, help reduce unsafe needle sharing and associated infections.&lt;/li&gt;\n&lt;li&gt;&lt;strong&gt;Narcotics Anonymous (NA):&lt;/strong&gt; A 12-step self-help group for abstinent drug addicts.&lt;/li&gt;\n&lt;/ul&gt;\n&lt;/td&gt;\n&lt;/tr&gt;\n&lt;/tbody&gt;\n\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/OBIRFNcp04VGBVFDf3vS1746019612.mp3&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 32-year-old male, with a history of frequent cocaine use for the past 6 years, presents with intense fatigue, excessive sleep, increased appetite, and feelings of anhedonia. He states that he stopped using cocaine abruptly 3 days ago. On further questioning, he reports that over the past few months, his cocaine use had escalated to daily use. He also mentions experiencing intense cravings for cocaine and irritability but denies hallucinations or delusions. On physical examination, the patient is lethargic, and his vital signs are stable. Which of the following is the most appropriate management strategy for this patient at this stage?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Immediate initiation of dopamine agonist therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Long-term use of antipsychotic medications&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Supportive care and monitoring&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Administration of benzodiazepines to prevent withdrawal seizures&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Supportive care and monitoring&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;\n\n&lt;p style=&#x27;font-size: 10px; color: #808080; font-style: italic;&#x27;&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/DlCDl9VYyG0lIFP8uDLJ1737178698.mp3&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

</body>
</html>
