<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dermatology - Combined Tests</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
</style>
  <style>
  body {
    font-family: Arial, sans-serif;
    padding: 0;
    margin: 0;
  }

  button {
    margin: 5px;
    padding: 10px 15px;
    background: #ffffff;
    border: 1px solid #2d3748;
    border-radius: 4px;
    cursor: pointer;
    color: #000000;
    position: relative;
    top: 5px;
    font-size: 14px;
    transition: background 0.2s ease, color 0.2s ease, transform 0.1s ease;
  }

  button:hover {
    background: #f3f4f6;
    color: #000000;
    transform: translateY(-1px);
  }

  body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        .iframe-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow: auto;
            -webkit-overflow-scrolling: touch;
        }
        .iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }
    
    /* Mobile optimization */
    

  /* Dropdown styling */
  .dropdown-wrapper {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1100;
  }

  .dropdown-toggle {
    background: #2c5281;
    color: white;
    border: none;
    font-size: 14px;
    padding: 10px 18px;
    border-radius: 6px;
    font-weight: bold;
    letter-spacing: 0.5px;
  }

  .dropdown-toggle:hover {
    background: #24466c;
  }

  .dropdown-menu {
  display: none;
  position: absolute;
  right: 0;              /* keep aligned to right edge of toggle */
  margin-top: 6px;
  background: white;
  border: 1px solid #cbd5e0;
  border-radius: 8px;
  max-height: 350px;
  overflow-y: auto;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
  min-width: 250px;
  max-width: 90vw;       /* prevent it from going outside screen */
  word-wrap: break-word; /* wrap long names */
  white-space: normal;   /* allow text to wrap */
  animation: fadeIn 0.2s ease-in-out;
}

.dropdown-menu button {
  display: block;
  width: 100%;
  text-align: left;
  margin: 0;
  padding: 10px 15px;
  border-radius: 0;
  background: transparent;
  color: #2d3748;
  border: none;
  border-bottom: 1px solid #edf2f7;
  font-size: 13px;
  white-space: normal;   /* allow wrapping inside button */
  word-break: break-word;
}


  img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    display: block;
    margin: 10px auto;
  }

  body > section:last-child {
    margin-bottom: 0 !important;
  }
  
</style>
  <script>
  function showTest(id) {
    document.querySelectorAll('.iframe-container').forEach(div => div.style.display = 'none');
    document.getElementById(id).style.display = 'block';
    document.getElementById('dropdownMenu').style.display = 'none';
    window.scrollTo(0, 0);
  }

  function toggleDropdown() {
    const menu = document.getElementById('dropdownMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  document.addEventListener('click', function (event) {
    const toggle = document.getElementById('dropdownToggle');
    const menu = document.getElementById('dropdownMenu');
    if (!toggle.contains(event.target) && !menu.contains(event.target)) {
      menu.style.display = 'none';
    }
  });
</script>
<script src="../../../access-control.js"></script>
  <script src="../../../block.js"></script>
  <script src="../../../error-handler/link-checker.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5920367457745298"
     crossorigin="anonymous"></script>
</head>
<body>
<script>
      // Initialize access control for protected page
      if (!accessControl.initProtectedPage()) {
        throw new Error('Access denied - redirecting to index.html');
      }
    </script>
  <button onclick="history.back()" style="position: absolute; top: 20px; left: 20px; background: transparent; color: white; border: none; padding: 10px; cursor: pointer; z-index: 1001; font-size: 20px;">
  <i class="fas fa-arrow-left"></i>
</button>

<div class="dropdown-wrapper">
  <button class="dropdown-toggle" id="dropdownToggle" onclick="toggleDropdown()">☰ INDEX</button>
  <div class="dropdown-menu" id="dropdownMenu">
<button onclick="showTest('test1')">Adnexal_Diseases</button>
<button onclick="showTest('test2')">Alopecia</button>
<button onclick="showTest('test3')">Bacterial_Infections</button>
<button onclick="showTest('test4')">Blistering_Diseases</button>
<button onclick="showTest('test5')">Cancers</button>
<button onclick="showTest('test6')">Dermatology_Image_Based_Qs</button>
<button onclick="showTest('test7')">Drug_Reactions</button>
<button onclick="showTest('test8')">Eczema</button>
<button onclick="showTest('test9')">Fungal_Infections</button>
<button onclick="showTest('test10')">General_Dermatology</button>
<button onclick="showTest('test11')">Histopathology</button>
<button onclick="showTest('test12')">Leprosy</button>
<button onclick="showTest('test13')">Mast_Cell_Diseases</button>
<button onclick="showTest('test14')">Miscellaneous</button>
<button onclick="showTest('test15')">Nail_Diseases</button>
<button onclick="showTest('test16')">Parasitic_Diseases</button>
<button onclick="showTest('test17')">Pigmentation_Diseases</button>
<button onclick="showTest('test18')">PsoriasisLichen_Planus</button>
<button onclick="showTest('test19')">STD</button>
<button onclick="showTest('test20')">Viral_Infections</button>
</div>
  </div>
  
<div id="test1" class="iframe-container" style="display:block;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Adnexal Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Adnexal Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                11 Questions | 44 Total Marks | 21 min Duration | ~114.55 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Not associated with rosacea?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Photosensitivity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Blepharitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Flushing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Comedones&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Comedones&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61382051698764234/61382051698764234.m3u8&quot;}, {&quot;text&quot;: &quot;Causative factor of acne includes all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Increased serum IgE&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Follicular duct cornification&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Increased Propionibacterium acnes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Insulin growth factor-1&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Increased serum IgE&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32984001698764246/32984001698764246.m3u8&quot;}, {&quot;text&quot;: &quot;A teenage girl with moderate acne also has irregular menses. Drug of choice would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oral isotretinoin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oral acitretin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oral Minocycline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral contraceptive pill&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Oral contraceptive pill&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10178171698764256/10178171698764256.m3u8&quot;}, {&quot;text&quot;: &quot;Rhinophyma Potato nose is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;nasal septal deformity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sweat gland involvement&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mucous gland involvement&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sebaceous gland involvement and fibrosis.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sebaceous gland involvement and fibrosis.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27350611698764268/27350611698764268.m3u8&quot;}, {&quot;text&quot;: &quot;In Fox Fordyce disease, true is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Asymptomatic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous lesions are common&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Common in areola &amp;amp; axillae&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sebaceous disorder&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Common in areola &amp; axillae&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25397041698764279/25397041698764279.m3u8&quot;}, {&quot;text&quot;: &quot;A 40-year-old woman presents with a 2-year-old h/o erythematous papulopustular lesions of convexities of the face. There in a background of erythema &amp;amp; telangiectasia. The most likely diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acne vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rosacea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;SLE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Polymorphic light eruption&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Rosacea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1523481698764290/1523481698764290.m3u8&quot;}, {&quot;text&quot;: &quot;Not used in acne&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Benzoyl peroxide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Isotretinoin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Adapalene&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Testosterone&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Testosterone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66067041698764300/66067041698764300.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of nodulocystic acne on face is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythromycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tetracycline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Isotretinoin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Steroids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Isotretinoin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44674551698764314/44674551698764314.m3u8&quot;}, {&quot;text&quot;: &quot;Crystalline miliaria is due to obstruction to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sebaceous glands&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sweat ducts&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hair follicles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Accessory sweat glands&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sweat ducts&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33807291698764324/33807291698764324.m3u8&quot;}, {&quot;text&quot;: &quot;A 17 year old with acne has been taking a drug for last two years. She now has blue-black pigmentation of nails. The likely medication causing this would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tetracycline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Minocycline&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Doxycycline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Azithromycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Minocycline&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39581341698764335/39581341698764335.m3u8&quot;}, {&quot;text&quot;: &quot;Following is true for Hidradenitis suppurativa, EXCEPT:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Also known as apocrine miliaria&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chronic discharging sinuses in apocrine areas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Can be treated with retinoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Comedones are seen&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Also known as apocrine miliaria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41286741698764350/41286741698764350.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the lesion?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acne comedone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Papules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pustules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nodules&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Acne comedone&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1015).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3752341705058303/3752341705058303.m3u8&quot;}, {&quot;text&quot;: &quot;Patient is on treatment with 13-cis retinoic acid. Which of the following is one of the side effect of the drug?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Teratogenic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Neural tube defect&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Follicular hyperkeratosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Photo onycholysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Teratogenic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68614271705058463/68614271705058463.m3u8&quot;}, {&quot;text&quot;: &quot;A female patient presented with acne that is not resolving on oral isotretinoin and antibiotics therapy. Which of the following is the next best investigation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Look for dietary triggers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Evaluate for hyperandrogenism&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Check for antibiotic resistance&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Look for drug triggers&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Evaluate for hyperandrogenism&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 21 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test2" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Alopecia&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Alopecia&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                10 Questions | 24 Total Marks | 20 min Duration | ~120.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;18-year-old male has nail pitting and patchy hair loss. What else is expected?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Auspitz sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Orentreich sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Friar-tuck appearance&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Exclamation mark hair&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Exclamation mark hair&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61124161698752404/61124161698752404.m3u8&quot;}, {&quot;text&quot;: &quot;An 8 year old child presents with localized non scarring alopecia over scalp with itching and scales. The diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tine barbae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tinea capitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Tinea capitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15738971698752415/15738971698752415.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following are causes of cicatrizing alopecia except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Discoid lupus erythematosus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Alopecia areata&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69772901698752426/69772901698752426.m3u8&quot;}, {&quot;text&quot;: &quot;A female patient presents with diffuse alopecia to you. She had suffered from typhoid fever 3 months back. Most probable diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Androgenetic alopecia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Telogen effluvium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anagen effluvium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Telogen effluvium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68828241698752465/68828241698752465.m3u8&quot;}, {&quot;text&quot;: &quot;Hutchinson’s syphilitic triad includes all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Associated with congenital syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Notched incisor teeth&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nerve deafness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Associated with CVS anomalies&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Associated with CVS anomalies&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7046041698752485/7046041698752485.m3u8&quot;}, {&quot;text&quot;: &quot;Early eruption of secondary syphilis are all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intensely pruritic&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Papular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Symmetrical&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pleomorphic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Intensely pruritic&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22129741698752898/22129741698752898.m3u8&quot;}, {&quot;text&quot;: &quot;A 32 year old female presented with heavy hairloss since few months. She gives history of suffering with COVID 19 eight month back. What is the likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Telogen effluvium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Female pattern hair loss&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichotillomania&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Telogen effluvium&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(988).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29682351698649065/29682351698649065.m3u8&quot;}, {&quot;text&quot;: &quot;What could be the diagnosis for this Image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Telogen effluvium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichotillomania&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anagen effluvium&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Alopecia areata&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1025).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/52(93).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3051061705058544/3051061705058544.m3u8&quot;}, {&quot;text&quot;: &quot;Causes of Non-scarring Alopecia are all except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Telogen effluvium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Anagen effluvium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Frontal fibrosing Alopecia&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Frontal fibrosing Alopecia&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46777261704712787/46777261704712787.m3u8&quot;}, {&quot;text&quot;: &quot;In which of the following, we have non scarring alopecia a) Alopecia areata b) Frontal fibrosing alopecia C) Androgenic alopecia d) Telogen effluvium&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A-C-D&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;A-B-C-D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;A-B-D&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;A-D&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. A-C-D&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 20 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test3" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Bacterial Infections&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Bacterial Infections&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                23 Questions | 80 Total Marks | 33 min Duration | ~86.09 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Botryomycosis is a:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Superficial fungal infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bacterial infection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Deep fungal infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Viral infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bacterial infection&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1240751698747941/1240751698747941.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice for Actinomycotic mycetoma is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sulfonamides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Welsh regimen&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythromycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tetracycline&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Welsh regimen&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77473961698747951/77473961698747951.m3u8&quot;}, {&quot;text&quot;: &quot;Most common type of cutaneous T.B. is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scrofuloderma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T.B. verrucosa cutis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema induratum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lupus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61831451698747962/61831451698747962.m3u8&quot;}, {&quot;text&quot;: &quot;Tuberculosis of skin is called as&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lupus pernio&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lupus profundus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lupus erythematosus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lupus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13015551698747983/13015551698747983.m3u8&quot;}, {&quot;text&quot;: &quot;Forms of skin tuberculosis include all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scrofuloderma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema induratum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema annulare centrifugum&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Erythema annulare centrifugum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50433101698748036/50433101698748036.m3u8&quot;}, {&quot;text&quot;: &quot;Apply-jelly nodules are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;DLE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lupus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60218051698748048/60218051698748048.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following tuberculids is micropapular.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen scrofulosorum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Miliary tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Papulonecrotic type&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lichen scrofulosorum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54201431698748073/54201431698748073.m3u8&quot;}, {&quot;text&quot;: &quot;A 12-year-old boy had a gradually progressive plaque on a buttock for the last 3 years. The plaque has scarring in the center. The most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea corporis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granuloma annulare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Borderline leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lupus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39349881698748086/39349881698748086.m3u8&quot;}, {&quot;text&quot;: &quot;A young boy presented with lesion over his right buttock which had peripheral extension and central scarring. The investigation of choice would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tzanck smear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;KOH preparation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Biopsy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sabouraud dextrose agar&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Biopsy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24250091698748109/24250091698748109.m3u8&quot;}, {&quot;text&quot;: &quot;Tuberculosis verrucosa cutis is a form of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tuberculid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Primary tuberculosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Post primary tuberculosis with good resistance&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Post primary tuberculosis with poor resistance&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Post primary tuberculosis with good resistance&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31970861698748121/31970861698748121.m3u8&quot;}, {&quot;text&quot;: &quot;An anatomist has a single warty lesion on his hand. Which of the following could be most likely lesion&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Verruca vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberculosis verrucosa cutis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycetoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus hypertrophicus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tuberculosis verrucosa cutis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/605161698748133/605161698748133.m3u8&quot;}, {&quot;text&quot;: &quot;Skin hazards of swimming is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Verrucae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pyoderma gangrenosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;M.marinum infection&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;M.ulcerans infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. M.marinum infection&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52677061698748145/52677061698748145.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following are bacterial infections of skin&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pyoderma gangrenosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Piedra&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Botryomycosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Impetigo herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Botryomycosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17097311698748156/17097311698748156.m3u8&quot;}, {&quot;text&quot;: &quot;The causative organism of erythrasma is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Corynebacterium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Streptococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Corynebacterium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52984081698748167/52984081698748167.m3u8&quot;}, {&quot;text&quot;: &quot;Pemphigus neonatorum is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous impetigo&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epidermolysis Bullosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bullous impetigo&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27823371698748178/27823371698748178.m3u8&quot;}, {&quot;text&quot;: &quot;Cutaneous Tuberculosis arising from all exogenous sources, EXCEPT :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Warty TB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tuberculous chancre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen scrofulosorum&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lichen scrofulosorum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46307591698748190/46307591698748190.m3u8&quot;}, {&quot;text&quot;: &quot;A pathologist developed a deep seated dull red verrucous nodule which enlarged gradually on index finger. His diagnosis is likely to be :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Verruca Vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberculosis Verrucosa Cutis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypertrophic Lichen Planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oriental Sore&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tuberculosis Verrucosa Cutis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4772291744970957/4772291744970957.m3u8&quot;}, {&quot;text&quot;: &quot;A 7 yr old boy presents with appearance of multiple vesicles which enlarged to form flaccid bullae which had purulent contents. When they ruptured they left behind brown crusting. The most likely cause of the disease is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Auto antibodies against desmosomal components&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Auto antibodies against hemidesmosomal components&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Linear deposition of IgA at the dermoepidermal junction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Infection by Staphylococccus aureus.&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Infection by Staphylococccus aureus.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20256551698748203/20256551698748203.m3u8&quot;}, {&quot;text&quot;: &quot;Honey colored ‘crusts are characteristic of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nummular eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Impetigo&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cutaneous diphtheria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Impetigo&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31039961698748216/31039961698748216.m3u8&quot;}, {&quot;text&quot;: &quot;A 35 yr old male presented with a very painful ulcer with violaceous margins and undermined edges for 2 months on lower leg. He also reports a bowel problem. The likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tubercular chancre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pyoderma gangrenosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scrofuloderma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vasculitic ulcer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pyoderma gangrenosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66223621698748232/66223621698748232.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with finger with paronychia &amp;amp; extensive linear wheal like pattern on upper limb. Antibiotic for treatment?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Amoxiclav&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Norfloxacin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Amikacin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Metronidazole&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Amoxiclav&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(995).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(470).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29383641698651640/29383641698651640.m3u8&quot;}, {&quot;text&quot;: &quot;A young patient presents with fever with rash as shown. The diagnosis would be?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dengue hemorrhagic fever&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meningococcemia&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leptospirosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scrub typhus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Meningococcemia&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/33(146).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39206491704712509/39206491704712509.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the image given below:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scrub Typhus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rocky mountain spotted fever&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rickettsia rickettsii&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rickettsia conorii&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Scrub Typhus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/52(94).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17738791704712714/17738791704712714.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 33 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test4" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Blistering Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Blistering Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                45 Questions | 144 Total Marks | 55 min Duration | ~73.33 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Tzanck smear is positive in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Warts&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Burns&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24749451698649593/24749451698649593.m3u8&quot;}, {&quot;text&quot;: &quot;Immunofluorescence test is negative in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa dystrophica&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cicatricial pemphigoid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Epidermolysis bullosa dystrophica&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40100991698649614/40100991698649614.m3u8&quot;}, {&quot;text&quot;: &quot;Dyskeratosis is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Darier’s disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Darier’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69243831698649633/69243831698649633.m3u8&quot;}, {&quot;text&quot;: &quot;Bullous pemphigoid is most commonly associated with&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Desmoglein – 3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Desmoglein – 1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;BP -2 Antigen&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;BP-1 Antigen&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. BP -2 Antigen&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33856811698649656/33856811698649656.m3u8&quot;}, {&quot;text&quot;: &quot;Desmosomes are important in pathogenesis of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Urticaria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37916041698649669/37916041698649669.m3u8&quot;}, {&quot;text&quot;: &quot;Darier’s disease is characterized by all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Darier’s sign in + ve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dyskeratosis is seen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Abnormality in the Ca-ATPase&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nail shows longitudinal alternate &amp;amp; red bands with V shaped notching&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Darier’s sign in + ve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68577101698649697/68577101698649697.m3u8&quot;}, {&quot;text&quot;: &quot;A 85 yr old woman with nikolskiy sign negative, blisters on thigh &amp;amp; trunk, lesions come a red base. What is the cause?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20257911698649745/20257911698649745.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old male had multiple blisters over the trunk &amp;amp; extremities. Direct immunofluorescence studies showed linear lgG deposits along the basement membrane. Which of the following is the most likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bullous pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63185601698649774/63185601698649774.m3u8&quot;}, {&quot;text&quot;: &quot;A patient has flaccid bullous lesions with oral mucosal lesions. The finding in immunofluorescence is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fish net IgG in epidermis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Linear IgG in DEJ&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Granular IgA in dermal papillae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Linear IgA in reticular dermis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fish net IgG in epidermis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34866241698649788/34866241698649788.m3u8&quot;}, {&quot;text&quot;: &quot;Mucosa is never involved in which of the following disorders&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa acquisita&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxic epidermal necrolysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pemphigus foliaceous&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44815071698649802/44815071698649802.m3u8&quot;}, {&quot;text&quot;: &quot;Tense bullous lesions are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus vegetans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Bullous pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15108621698649816/15108621698649816.m3u8&quot;}, {&quot;text&quot;: &quot;All are associated with pemphigus except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Thymoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CLL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Non-Hodgkin’s lymphoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atrophic gastritis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Atrophic gastritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6150781698649851/6150781698649851.m3u8&quot;}, {&quot;text&quot;: &quot;Bullous skin lesions with ‘intraepidermal split’ is feature of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcal scalded skin syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;All&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. All&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2068471698649872/2068471698649872.m3u8&quot;}, {&quot;text&quot;: &quot;Blister formation in burn case is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intraepidermal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Subepidermal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subdermal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subfascial&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Subepidermal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33828061698650047/33828061698650047.m3u8&quot;}, {&quot;text&quot;: &quot;Tombstone appearance seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Linear IgA disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67939581698650060/67939581698650060.m3u8&quot;}, {&quot;text&quot;: &quot;Antibody against BP 230 and BP 180 seen:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Linear IgA disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bullous pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47034751698650073/47034751698650073.m3u8&quot;}, {&quot;text&quot;: &quot;A 3 year old child has high fever along with perioral erosions and scaling. There are a few flaccid blisters on the neck folds and upper back. He has had a furuncle with pus a few days back. There are no mucosal lesions. His Nikolskiy is positive. The diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Staphylococcal scalded skin syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxic epidermal necrolysis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Staphylococcal scalded skin syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24835221698650138/24835221698650138.m3u8&quot;}, {&quot;text&quot;: &quot;Linear deposition of IgA at dermoepidermal junction on immunofluorescence is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes gestationis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IgA dermatosis of childhood&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. IgA dermatosis of childhood&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40088941698650574/40088941698650574.m3u8&quot;}, {&quot;text&quot;: &quot;A 60-year-old man presented with itchy tense blisters on urticarial skin. Antigen responsible is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;BP-2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dsg-1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dsg-3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Collagen-7&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. BP-2&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76713131698650760/76713131698650760.m3u8&quot;}, {&quot;text&quot;: &quot;The characteristic microscopic feature of bullous pemphigoid is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Subepidermal non acantholytic blister&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Subcorneal non acantholytic blister&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subcorneal acantholytic blister&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subepidermal acantholytic blister&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Subepidermal non acantholytic blister&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30589511698650776/30589511698650776.m3u8&quot;}, {&quot;text&quot;: &quot;True about pemphigus vulgaris A/E:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Subepidermal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Autoimmune disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tzanck smear shows acantholytic cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Antibody are formed against desmoglein&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Subepidermal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7218551698650820/7218551698650820.m3u8&quot;}, {&quot;text&quot;: &quot;Commonest site of herpes gestationis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Periumbilical region&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Flanks of abdomen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vulva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Infraorbital&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Periumbilical region&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78084341698650850/78084341698650850.m3u8&quot;}, {&quot;text&quot;: &quot;Bulla in staphylococcal scalded skin syndrome is located&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Subepidermal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intraepidermal&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mucosal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subcutaneous&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Intraepidermal&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24356761698650933/24356761698650933.m3u8&quot;}, {&quot;text&quot;: &quot;Drug of choice in dermatitis herpetiformis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Steroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phototherapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Dapsone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24045861698650945/24045861698650945.m3u8&quot;}, {&quot;text&quot;: &quot;Subepidermal splitting is not found in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Burns&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pemphigus foliaceous&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7731691698650996/7731691698650996.m3u8&quot;}, {&quot;text&quot;: &quot;In congenital dystrophic variety of epidermolysis bullosa, mutation is seen in the gene coding for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Laminin 4&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Collagen type 7&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alpha 6 integrin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratin 14&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Collagen type 7&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5952341698651011/5952341698651011.m3u8&quot;}, {&quot;text&quot;: &quot;Drug induced pemphigus is most commonly caused by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Penicillamine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Phenytoin sodium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Carbamazepine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Penicillin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Penicillamine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55241591698651022/55241591698651022.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice for Pemphigus&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Corticosteroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Antibiotics&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;No treatment&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Anticonvulsants&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Corticosteroids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74609321698651035/74609321698651035.m3u8&quot;}, {&quot;text&quot;: &quot;Immunofluorescence detection of antibodies maps to the roof of the blister in salt split skin in which of the following disorders:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous lupus erythematosus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa acquisita&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus erythematosus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Bullous pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73408021698651051/73408021698651051.m3u8&quot;}, {&quot;text&quot;: &quot;The cleavage plane for Epidermolysis bullosa simplex is which of the following:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Subcorneal layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granular layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Basal layer&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lamina lucida&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Basal layer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29343951698651070/29343951698651070.m3u8&quot;}, {&quot;text&quot;: &quot;A 28 year old male presents with greasy, warty, hyperkeratotic papules over central chest and upper back. There are also nicks at the free margin of some of the nail plates. Skin biopsy reveals acantholysis with presence of dyskeratotic cells in stratum corneum as well as in stratum spinosum. The diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Truncal acne vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dyskeratosis congenita&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Darier’s disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Darier’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22173441698651083/22173441698651083.m3u8&quot;}, {&quot;text&quot;: &quot;In an 8 day old child with no history of consanguinity in the parents, the mother reports blisters and bleeding off of the skin at the site of handling and pressure. There was a similar history in the previous child which proved to be fatal. The diagnosis is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Congenital epidermolysis bullosa&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Letterer-Siwe Disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Congenital epidermolysis bullosa&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73375221698651100/73375221698651100.m3u8&quot;}, {&quot;text&quot;: &quot;Hailey-Hailey Disease is diagnosed by all, EXCEPT:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dilapidated brick wall appearance histologically.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intertriginous blisters&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Immunofluorescence&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Familial blistering.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Immunofluorescence&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62359341698651118/62359341698651118.m3u8&quot;}, {&quot;text&quot;: &quot;Nikolsky sign negative in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa acquisita&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;TEN&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Staphylococcal scalded skin syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Epidermolysis bullosa acquisita&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40370811698651148/40370811698651148.m3u8&quot;}, {&quot;text&quot;: &quot;A patient came with tense blisters on normal skin as well as over urticarial plaques. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Linear IgA disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bullous pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26493151698651161/26493151698651161.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 year old patient comes with flaccid bullae on the skin which is easy to rupture. Biopsy revealed suprabasal split. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus vegetans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema Multiforme&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(408).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36547681698651757/36547681698651757.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the phenomenon shown in the image:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Isomorphic phenomenon&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Reverse isomorphic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gottron’s papule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nikolsky sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Isomorphic phenomenon&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1001).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/21(235).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57409721698654675/57409721698654675.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with blisters. His histology is as shown. The diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycosis fungoides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(737).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14667611704712109/14667611704712109.m3u8&quot;}, {&quot;text&quot;: &quot;A young male with painful nodulocystic lesions over face and forehead. The best management would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oral Isotretinoin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Topical Clindamycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topical Adapalene&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral Doxycycline&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Oral Isotretinoin&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(680).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55793161704712151/55793161704712151.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with flaccid bullous lesions involving the oral cavity and the skin. He has lesion as shown in the below picture. Acantholytic cells are seen on Tzanck smear. What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/24(218).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20030811704712401/20030811704712401.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following treatment is not useful in middle aged female with the given picture?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Topical Flucinolone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Topical tazarotene&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Benzoyl peroxide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Topical antibiotic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Topical Flucinolone&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/35(147).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52640271704712536/52640271704712536.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old male came with tense bullae on urticarial base associated with severe itching as shown in image. After some time the roof of the bullae got settled. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IgA pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bullous pemphigoid&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/37(120).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50384041704712564/50384041704712564.m3u8&quot;}, {&quot;text&quot;: &quot;Statement 1- Histopathological examination of a patient with flaccid bulla and painful erosions showing suprabasal blister and inflammatory infiltrate in the blister cleft is seen in pemphigus vulgaris. Statement 2- Row of tombstones appearance is diagnostic of Pemphigus vulgaris.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Statement 1 is true and Statement 2 is false&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Statement 1 is false and Statement 2 is true&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Both the statements are true and 2 is the correct explanation of 1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Both the statements are true but 2 is not the correct explanation of 1&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Both the statements are true but 2 is not the correct explanation of 1&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient on Anti PD1 immunotherapy (Nivolumab) comes with pruritis, eczema, and urticarial rashes. Histopathological examination reveals subepidermal blister and direct immunofluorescence of the lesions showed Linear C3 and IgG on basement membrane. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous Pemphigoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus foliaceous&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Bullous Pemphigoid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Row of tomb stone appearance is seen in?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus Vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes Labialis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus Vulgaris&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1426).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 55 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test5" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Cancers&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Cancers&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                15 Questions | 48 Total Marks | 25 min Duration | ~100.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Treatment of choice for early mycosis fungoides is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CHOP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Electron beam therapy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;5 - FU cream&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;IV adriamycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Electron beam therapy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19097081698764468/19097081698764468.m3u8&quot;}, {&quot;text&quot;: &quot;A person has developed erythroderma which is pruritic, with generalized lymphadenopathy.Histopathologically, atypical T lymphocytes are seen. What is most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sezary syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glucagonoma syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycosis fungoides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sezary syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72568041698764479/72568041698764479.m3u8&quot;}, {&quot;text&quot;: &quot;Sezary syndrome presents with all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythroderma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lymphadenopathy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Atypical T lymphocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nodular and tumorous growth&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Nodular and tumorous growth&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42726631698764493/42726631698764493.m3u8&quot;}, {&quot;text&quot;: &quot;Which is not a cutaneous marker of malignancy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermatomyositis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acanthosis nigricans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Necrolytic migratory erythema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema chronicum migrans&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Erythema chronicum migrans&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35454791698764506/35454791698764506.m3u8&quot;}, {&quot;text&quot;: &quot;Central ulcer with waxy beaded edges is seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Paget’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bowen’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Basal cell Ca&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Squamous cell Ca&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Basal cell Ca&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21678161698764517/21678161698764517.m3u8&quot;}, {&quot;text&quot;: &quot;Which is NOT a risk factor for progressing to malignant melanoma&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Asymmetry of shape&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Irregular, scalloped or notched border&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Variegation of color&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diameter &amp;gt; 3 mm&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Diameter &gt; 3 mm&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35405321698764528/35405321698764528.m3u8&quot;}, {&quot;text&quot;: &quot;Which is INCORRECT of basal cell carcinoma&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;They appear as “translucent” or “pearly” papules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Moh’s microscopic surgery gives best results&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Relatively early nodal involvement&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Morpheiform or sclerosing BCC are more aggressive&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Relatively early nodal involvement&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52235521698764538/52235521698764538.m3u8&quot;}, {&quot;text&quot;: &quot;All of following are cutaneous markers of malignancy except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Necrolytic migratory erythema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Annular erythema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cutaneous Lichen planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acanthosis nigricans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Cutaneous Lichen planus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64598401698764550/64598401698764550.m3u8&quot;}, {&quot;text&quot;: &quot;Malignant transformation to melanoma is common in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermal nevus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Junctional nevus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Large Congenital nevus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Becker’s nevus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Large Congenital nevus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20602491698764564/20602491698764564.m3u8&quot;}, {&quot;text&quot;: &quot;Which oral condition is not premalignant?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oral submucous fibrosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythroplakia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leukoplakia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Aphthous ulcer&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Aphthous ulcer&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4872481698764576/4872481698764576.m3u8&quot;}, {&quot;text&quot;: &quot;What is true about squamous cell carcinoma?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;SCC is more common than BCC&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SCC occurs in sun exposed part of body only&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Most common in transplant recipients&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Has a pearly rolled edge&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Most common in transplant recipients&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36309361698764586/36309361698764586.m3u8&quot;}, {&quot;text&quot;: &quot;There is a 0.3 cm ulcerated nodule on nasolabial fold. Diagnosis is ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Squamous cell carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Kaposi Sarcoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Basal cell carcinoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(728).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35923311698650962/35923311698650962.m3u8&quot;}, {&quot;text&quot;: &quot;A 70 year old patient develop the following lesion over face since 2 years. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Squamous cell carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malignant melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;keratoacanthoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Basal cell carcinoma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1027).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/54(89).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2696411705058568/2696411705058568.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is associated with the clinical condition shown in the image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cataract&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Glaucoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malignant melanoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Malignant melanoma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(39).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3819631705058695/3819631705058695.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old patient presented with the following lesions, Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Squamous cell carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malignat melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bowen&#x27;s Disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Basal cell carcinoma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1423).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 25 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test6" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Dermatology Image Based Qs&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Dermatology Image Based Qs&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                52 Questions | 140 Total Marks | 62 min Duration | ~71.54 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Correlate between the two images and give your diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sturger Weber syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tuberous sclerosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neurofibromatosis-1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Von Hippel Lindau syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tuberous sclerosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/573946236.JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72557721698765633/72557721698765633.m3u8&quot;}, {&quot;text&quot;: &quot;The condition shown below occurs due to?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keloid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mucous gland hypertrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sweat gland hypertrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sebaceous gland hypertrophy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sebaceous gland hypertrophy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/250293538.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48178781698765644/48178781698765644.m3u8&quot;}, {&quot;text&quot;: &quot;The typical hair pattern shown in image is seen in?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Alopecia mucinosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Androgenic alopecia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Traumatic alopecia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Alopecia areata&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/239305940.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14283611698765654/14283611698765654.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 year old male presents with erythematous raised lesions in the body.Examination finding of his hand is also shown below.What is your diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/453604841.JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/438353041-.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49221711698765666/49221711698765666.m3u8&quot;}, {&quot;text&quot;: &quot;The nail finding shown below is associated with ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis Herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/20141242.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23226221698765675/23226221698765675.m3u8&quot;}, {&quot;text&quot;: &quot;A 24 year old male developed an annular skin lesion on the trunk.One week later,he developed many small such lesions on the trunk,as shown in image below.What is your diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Kaposi’s varicelliform eruption&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Quincke’s disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Pityriasis rosea&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/91166443.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46980831698765686/46980831698765686.m3u8&quot;}, {&quot;text&quot;: &quot;What sign is being demonstrated in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nikolsky sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Asboe Hansen sign&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Auspitz sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Koebner sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Asboe Hansen sign&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/57239844.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16102231698765697/16102231698765697.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 year old female presentswith well defined,irregular brown red plaques on both shins(Image shown below).What could be the possible underlying systemic disorder she may have?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Diabetes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hypertension&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypothyroidism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hyperthyroidism&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Diabetes&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/671836145.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7677371698765712/7677371698765712.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with which of the following dermatological conditions can have X-ray findings as shown below?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/685396746.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78728191698765722/78728191698765722.m3u8&quot;}, {&quot;text&quot;: &quot;The instrument shown below is used in the diagnosis of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis versicolor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tinea capitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;all of these&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. all of these&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/575128647.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72253751698765738/72253751698765738.m3u8&quot;}, {&quot;text&quot;: &quot;The findings in the image below is most likely to be associated with which nutritional dermatoses?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Beri-beri&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scurvy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pellagra&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Riboflavin deficiency&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Scurvy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/8922448.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78900401698765747/78900401698765747.m3u8&quot;}, {&quot;text&quot;: &quot;A 2 year old child presents with patches and crusted plaques in face,neck and extensor surfaces of the body.Additional finding is shown in the image.What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Atopic dermatitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/763077849.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6515881698765759/6515881698765759.m3u8&quot;}, {&quot;text&quot;: &quot;A 6 year old boy presented with recurrent scaly lesions on face as shown in image.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea versicolor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Indeterminate leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis alba&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pityriasis alba&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/579594751.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44230411698765770/44230411698765770.m3u8&quot;}, {&quot;text&quot;: &quot;The test demonstrated in the image is based on which type of hypersensitivity?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type 1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Type 2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Type 3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Type 4&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Type 4&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/200803152.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29399051698765780/29399051698765780.m3u8&quot;}, {&quot;text&quot;: &quot;Spot diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nummular dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contact dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Nummular dermatitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/608497453.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36035761698765791/36035761698765791.m3u8&quot;}, {&quot;text&quot;: &quot;The histopathology image shown below points to a diagnosis of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus foliaceus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/749138654.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71766801698765803/71766801698765803.m3u8&quot;}, {&quot;text&quot;: &quot;The histopathology image shown below is most consistent with a diagnosis of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Paraneoplastic pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/141536455.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69704711698765815/69704711698765815.m3u8&quot;}, {&quot;text&quot;: &quot;A 6 year old boy presents with lesions on dorsal aspect of hands and genitals as shown in image.What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen nitidus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lichen nitidus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/541957056.jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202023-06-10%20at%209_40_00%20PM.png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76746541698765828/76746541698765828.m3u8&quot;}, {&quot;text&quot;: &quot;A 35 year old male presents with intensly pruritic papulovesicular lesions in hus buttocks.Biopsy was taken and HPE slide is shown below.What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythema multiforme&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dermatitis herpetiformis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/64349257.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22285681698765840/22285681698765840.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 year old male developed sudden onset rapidly spreading lesions on hand as shown in image.What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Epidermolysis bullosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema multiforme&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Linear IgA disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Erythema multiforme&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/169866358.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37579391698765851/37579391698765851.m3u8&quot;}, {&quot;text&quot;: &quot;A 2 year old child with high fever developed toxic look,eruptions as shown in image along with fissuring and cracking of lips.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Henoch Schonlein Purpura&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythema infectiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Kawasaki disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Idiopathic thrombocytopenic purpura.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Kawasaki disease&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/381531959.JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22452351698765861/22452351698765861.m3u8&quot;}, {&quot;text&quot;: &quot;The patient is most likely to be suffering from which sexually transmitted disease?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gonorrhea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lymphogranuloma venereum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Donovanosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lymphogranuloma venereum&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/304282760.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66635571698765874/66635571698765874.m3u8&quot;}, {&quot;text&quot;: &quot;Which form of leprosy shows the pattern of lesion shown in image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Indeterminate leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Borderline borderline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Borderline tuberculoid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Borderline lepromatous&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Borderline tuberculoid&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/195289761.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9000791698765891/9000791698765891.m3u8&quot;}, {&quot;text&quot;: &quot;A 24 year old male who is a diagnosed case of tuberculosis develops lesions on trunk as shown below.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen scrofulosorum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Papulonecrotic tuberculid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema nodosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema induratum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lichen scrofulosorum&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/282573262.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64230061698765902/64230061698765902.m3u8&quot;}, {&quot;text&quot;: &quot;A 28 yea old rugby player comes to the OPD with skin lesion shown in image.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea corporis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cutaneous leishmaniasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema migrans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tinea corporis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/744323463.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71227001698765912/71227001698765912.m3u8&quot;}, {&quot;text&quot;: &quot;A 18 year old girl living in hostel complaints of itching in scalp.Section of hair shaft is shown in image.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea capitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pediculosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Seborrhoeic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planopilaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pediculosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/589566864.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6671341698765924/6671341698765924.m3u8&quot;}, {&quot;text&quot;: &quot;A 60 year old male presented with lesion in the face.Biopsy was taken and HPE slide is shown in image.What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Malignant melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermoid cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Squamous cell carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Basal cell carcinoma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/743617765.JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74131971698765935/74131971698765935.m3u8&quot;}, {&quot;text&quot;: &quot;The finding shown in image may be seen in?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Adenocarcinoma stomach&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Obesity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bloom’s syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;all of these&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. all of these&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/184488766.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31890941698765944/31890941698765944.m3u8&quot;}, {&quot;text&quot;: &quot;The KOH mount shown in image is characteristic of ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pityriasis versicolor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tinea corporis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tinea capitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pityriasis versicolor&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/719994067.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44022811698765955/44022811698765955.m3u8&quot;}, {&quot;text&quot;: &quot;A 55 year old male patient has been having skin lesions over elbow (shown in image) for the past 4 years.He has seen many dermatologists,but no diagnosis could not be made.His doctor now ordered for a biopsy and HPE slide image is shown below.What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Actinic keratosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Squamous cell carcinoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycosis fungoides&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratoacanthoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Mycosis fungoides&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/778277868.JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/203755768-.jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27893371698765967/27893371698765967.m3u8&quot;}, {&quot;text&quot;: &quot;A pregnant female presents with lesions in genitilia as shown in image.Which of the treatment modalities is not recommended?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cryosugery&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichloroacetic acid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Imiquimod&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Podophyllin&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Podophyllin&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/208427769.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28723181698765981/28723181698765981.m3u8&quot;}, {&quot;text&quot;: &quot;A 40 year old farmer presents with lesions on his forearm(shown in image).Colony of the organism on special stain is also shown below.What is the diagnosis ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chromoblastomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Paracoccidiodomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sporotrichosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/306968070.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47463731698765991/47463731698765991.m3u8&quot;}, {&quot;text&quot;: &quot;A 27-year-old sexually active man presents to the OPD with the following finding. He informs you that a few days ago, he developed an erythematous vesicular lesion at the same location within hours of taking a drug. What is the diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;SJS&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;TEN&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;FDE&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;EM&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. FDE&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(811).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 35-year old man with a history of high-risk sexual behavior presents with the following painless penile ulcer. It bleeds on touch and there are no enlarged lymph nodes. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Granuloma inguinale&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphogranuloma venereum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Granuloma inguinale&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(715).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 16-year-old boy presents with skin lesions over the dorsum of the hand as shown below. On examination, the lesions are firm papules with a rough horny surface. What is the most common causative agent of these lesions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Human Papilloma virus-16&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Human Papilloma virus-2&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Human Papilloma virus-10&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Human Papilloma virus-11&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Human Papilloma virus-2&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(635).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;What is the probable diagnosis of this condition affecting hair?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichorhexis nodosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichorexis invaginata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichothiodystrophy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Monilethrix&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Trichothiodystrophy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(581).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A child presents to you with itchy lesions on the scalp with hair loss as shown in the image below. What would be the next best step?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;KOH mount&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Slit skin mount&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gram staining&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Biopsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. KOH mount&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(560).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;As a first-year dermatology resident, you see a patient with the following skin lesion. Which of the following disorders is least likely to present in this form?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Reiter’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Secondary syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycosis fungoides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pemphigus vulgaris&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(446).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An 11-year-old child presented with a pruritic lesion as shown. Which of the following is the drug of choice for this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Terbinafine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Griseofulvin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Fluconazole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Selenium sulphide shampoo&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Griseofulvin&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(401).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;The arrow depicted in the image is an important histopathological feature of which of the following conditions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mycoses fungoides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(380).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 20-year-old girl who is a known case of atopic dermatitis presents with multiple, pruritic pustular lesions for 5 days. Which of the following organism is commonly responsible for her condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Streptococcus pyogenes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes simplex virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Staphylococcus aureus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatophytes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Staphylococcus aureus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(341).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 45-year-old obese male patient presents with these lesions over her neck. What is your diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acanthosis nigricans&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tinea cruris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Contact dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Acanthosis nigricans&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(311).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 30-year-old man presents with the following skin finding. Which of the following clinical tests will aid in diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grattage test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;KOH smear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Besnier’s sign&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Skin biopsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Grattage test&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(266).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;While examining a patient in the dermatology OPD, the senior resident elicits the following finding. What condition does this patient likely have?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Urticaria pigmentosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermographism&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cholinergic urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Urticarial vasculitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dermographism&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(255).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the finding associated with the condition shown in the image below.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Isomorphic phenomenon&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Meyerson phenomenon&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gottron’s papule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nikolsky’s sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Isomorphic phenomenon&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13(221).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Identify the condition shown in the image below.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Paget disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen sclerosus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Angioma of vulva&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14(201).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 30-year-old female presents with subtle, fine, reticulate lacy-white, papules on the vulva, and the following cutaneous finding. Choose the most appropriate treatment strategy.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Topical steroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Interferons&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;PUVA&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Topical steroids&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(214).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 40-year-old man presented to the dermatology OPD. He was diagnosed with pityriasis rubra pilaris. Which of the following features is least likely to be found in this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nail pitting will be minimal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Islands of sparing&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herald patch&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nutmeg grater papules&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Herald patch&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(184).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient presented to the dermatology OPD with the following finding. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis rubra pilaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(150).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following test shown below?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Wood’s lamp examination&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Diascopy test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Patch test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermascopy test&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Wood’s lamp examination&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(147).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;What is the best treatment for the image depicted below&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Azithromycin 1 g STAT&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fusidic acid cream twice daily for 10 days&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;T. Doxycycline 100mg BD for 3 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;T. Acyclovir 400mg TID for 5 days&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. T. Acyclovir 400mg TID for 5 days&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19(139).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient with female pattern hairloss, which classification system is used ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tanner staging&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hamilton-Norwood staging&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Batts staging&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ludwig staging&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Ludwig staging&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(144).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 62 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test7" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Drug Reactions&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Drug Reactions&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 20 Total Marks | 15 min Duration | ~180.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 3 month old male infant developed a furuncle. A few days later, he developed blisters, peeling of the skin; there were no mucosal lesions. The most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Toxic epidermal necrolysis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcal scalded skin syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Stevens Johnson syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Infantile pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Staphylococcal scalded skin syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27184731698751871/27184731698751871.m3u8&quot;}, {&quot;text&quot;: &quot;What is not true about Erythema multiforme&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Associated with Herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Involves distal parts of extremities&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;No vesicle&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Target lesions&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. No vesicle&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10870391698751883/10870391698751883.m3u8&quot;}, {&quot;text&quot;: &quot;A 60- year old patient presented with several bullous lesions for the last 3 days; each bulla was surrounded by an erythematous halo. There were multiple target lesions. Patient also had oral erosions. The most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chicken pox&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema multiforme&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Erythema multiforme&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18598171698751894/18598171698751894.m3u8&quot;}, {&quot;text&quot;: &quot;All are true about erythema multiforme except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Due to herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Due to sulphonamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lesion are symmetrical&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;EM minor has mucosal involvement&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. EM minor has mucosal involvement&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30731971698751903/30731971698751903.m3u8&quot;}, {&quot;text&quot;: &quot;A 23-year-old male complaints of recurrent lesions on glans penis. I t always occurred at the same site and healed with hyperpigmentation. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fixed drug eruption&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Candida balanoposthitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Behcet’s disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Fixed drug eruption&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48934391698751914/48934391698751914.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with rashes in &amp;gt;30 percentage skin with hemorrhagic crusting on lips. The cause would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Drugs&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malignancy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bacterial infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Drugs&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34601031704712080/34601031704712080.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test8" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Eczema&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Eczema&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                24 Questions | 64 Total Marks | 34 min Duration | ~85.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 1 year old child presents with erythematous itchy lesions over the cheeks &amp;amp; extensor of the extremities. Mother is a known case of asthma. Likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neurodermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Contact dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Atopic dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/10815111698751223/10815111698751223.m3u8&quot;}, {&quot;text&quot;: &quot;Dennie Morgan’s fold is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mastocytosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atopic Dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Contact allergic Dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic Dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Atopic Dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53764421698751244/53764421698751244.m3u8&quot;}, {&quot;text&quot;: &quot;White dermographism is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chronic Urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Angioedema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pressure dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Atopic dermatitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/showimage.jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2079981698751261/2079981698751261.m3u8&quot;}, {&quot;text&quot;: &quot;In India, Airborne contact dermatitis is most commonly due to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Parthenium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nickel&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cement&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Poison ivy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Parthenium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42718591698751277/42718591698751277.m3u8&quot;}, {&quot;text&quot;: &quot;Anterior subcapsular cataract is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mastocytosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Juvenile diabetes mellitus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Atopic dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50963361698751289/50963361698751289.m3u8&quot;}, {&quot;text&quot;: &quot;Atopic dermatitis is diagnosed by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Clinical examination&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Biopsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Patch test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Blood indices&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Clinical examination&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40744501698751300/40744501698751300.m3u8&quot;}, {&quot;text&quot;: &quot;A 38 year old man, clerk by profession presents to you with history of recurrent eruption of deep seated vesicles on bilateral hands and sides of fingers. The most probable diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pompholyx&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nummular eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Irritant contact dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Circumscribed neurodermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pompholyx&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21706781698751310/21706781698751310.m3u8&quot;}, {&quot;text&quot;: &quot;What is correct about allergic contact dermatitis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Requires a period of sensitization&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Detergent is the most common allergen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Can be induced in any person if applied in sufficient strength for a certain distribution&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Memory T cells are not involved in the pathogenesis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Requires a period of sensitization&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68750461698751322/68750461698751322.m3u8&quot;}, {&quot;text&quot;: &quot;A patch is applied for allergic contact eczema. The test is best read after&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;4 hours&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;4 days&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;4 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4 months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 4 days&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53099101698751337/53099101698751337.m3u8&quot;}, {&quot;text&quot;: &quot;Patch testing is done for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Irritant contact dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Allergic contact dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Allergic contact dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67122291698751349/67122291698751349.m3u8&quot;}, {&quot;text&quot;: &quot;Air- borne contact dermatitis can be diagnosed by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Skin biopsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Photopatch test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Prick test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Estimation of serum IgE levels&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Photopatch test&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51571391698751359/51571391698751359.m3u8&quot;}, {&quot;text&quot;: &quot;Patch test is done to document&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Type I hypersensitivity&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Delayed type hypersensitivity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Autoimmune disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Immune-complex deposition&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Delayed type hypersensitivity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1388801698751388/1388801698751388.m3u8&quot;}, {&quot;text&quot;: &quot;Contact dermatitis known as courge of India”&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Detergents&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parthenium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nickel&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ragweed&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Parthenium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Spongiosis is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acute eczema&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Acute eczema&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58990481698751404/58990481698751404.m3u8&quot;}, {&quot;text&quot;: &quot;8 year old male child with recurrent scaly hypopigmented macules on the face. Diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis alba&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tinea versicolor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pityriasis alba&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43309551698751415/43309551698751415.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is incorrectly matched?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Generalised anxiety disorder-excessive worries&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Generalised anxiety disorder-avoidance&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phobia-Fear of situations&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Panic attack-Fear of symptoms&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Generalised anxiety disorder-avoidance&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;One-year-old child presents with eczematous dermatitis over face (Image shown). His mother has the history of bronchial asthma. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Infantile eczematous dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Air borne contact dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Atopic dermatitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1006).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/24(215).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70955781698655242/70955781698655242.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the arthropod shown in image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pediculus humanus capitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sarcoptes scabiei var hominis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phthirus pubis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatobia hominis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sarcoptes scabiei var hominis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1011).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(735).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24869491698655521/24869491698655521.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the plant shown in the image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Parthenium&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ginkgo biloba&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Poison ivy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Parthenium&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1023).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/22(221).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9368401705058490/9368401705058490.m3u8&quot;}, {&quot;text&quot;: &quot;Patch test reading is done after how many days:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;48 hours and 72 hours&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;48 hours and 96 hours&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;72 hours and 96 hours&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;24 hours and 72 hours&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 48 hours and 96 hours&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66636651704712224/66636651704712224.m3u8&quot;}, {&quot;text&quot;: &quot;Topical steroids are most effective in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dermal atrophy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Eczematous dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bullous lesions due to HSV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rosacea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Eczematous dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19951771704712235/19951771704712235.m3u8&quot;}, {&quot;text&quot;: &quot;An adult presents with itchy hyperpigmented plaque with exudation on the flexure of the elbow and back of knee as shown. The diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Atopic dermatitis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(289).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19261891704712308/19261891704712308.m3u8&quot;}, {&quot;text&quot;: &quot;Which component of cement causes allergic contact dermatitis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cobalt&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nickel&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Iron&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chromium&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Chromium&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72818621704712495/72818621704712495.m3u8&quot;}, {&quot;text&quot;: &quot;A lady developed a skin reaction as shown in the image after using a hair dye. Which of the following chemicals is responsible for this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pollen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chromates&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Balsam of Peru&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;P-Phenylenediamine&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. P-Phenylenediamine&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(80).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 34 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test9" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Fungal Infections&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Fungal Infections&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                28 Questions | 88 Total Marks | 38 min Duration | ~81.43 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 7 year old school child is diagnosed as tinea capitis. Wood’s lamp examination demonstrates a bright green fluorescence. The most likely organism isolated on fungal culture is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichophyton tonsurans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichophyton rubrum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microsporum canis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichophyton schoenleinii&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Microsporum canis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23621761698750134/23621761698750134.m3u8&quot;}, {&quot;text&quot;: &quot;A 30 year old lady complained of an itchy erythematous, scaly rash on face with central clearing. She was prescribed some topical steroid by a local practitioner. Now, the itching and erythema have decreased somewhat. The most correct choice is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Increase the potency of steroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Confirm the diagnosis by skin biopsy.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Do a KOH examination of scrapings&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Prescribe treatment&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Do a KOH examination of scrapings&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48739391698750145/48739391698750145.m3u8&quot;}, {&quot;text&quot;: &quot;All are effective in treatment of pityriasis versicolor, EXCEPT:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Oral Ketoconazole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Oral Itraconazole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Oral Terbinafine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Oral Fluconazole&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Oral Terbinafine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66821561698750155/66821561698750155.m3u8&quot;}, {&quot;text&quot;: &quot;Hypopigmentation in pityriasis versicolor is due to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Azelaic acid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hydroquinone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pteridine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Penicillin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Azelaic acid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69638541698750167/69638541698750167.m3u8&quot;}, {&quot;text&quot;: &quot;A 15-year-old teenager has multiple, perifollicular hyperpigmented patches with scaling. Best test is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;KOH smear&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Split skin smear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Culture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Biopsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. KOH smear&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13607841698750182/13607841698750182.m3u8&quot;}, {&quot;text&quot;: &quot;Bullous tinea pedis is most likely caused by which organism?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichophyton mentagrophytes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichophyton violaceum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichophyton soudanese&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichophyton tonsurans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trichophyton mentagrophytes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48905531698750198/48905531698750198.m3u8&quot;}, {&quot;text&quot;: &quot;Favus is caused by which of the following organisms?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichophyton Schoenleinii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichophyton violaceum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichophyton soudanese&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichophyton tonsurans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trichophyton Schoenleinii&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30024431698750210/30024431698750210.m3u8&quot;}, {&quot;text&quot;: &quot;Athelete’s foot is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea pedis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Plantar wart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Plantar eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plantar psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tinea pedis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5633811698750223/5633811698750223.m3u8&quot;}, {&quot;text&quot;: &quot;A 24 year old man had multiple small hypopigmented macules on the upper chest and back for last 3 months. The macules were circular, arranged around hair follicles and had coalesced to form large sheets. The surface showed fine scaling. The most appropriate investigation to confirm the diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Potassium hydroxide preparation of the scales&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Slit smears from discrete macules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tzanck test&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Skin biopsy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Potassium hydroxide preparation of the scales&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4301921698750237/4301921698750237.m3u8&quot;}, {&quot;text&quot;: &quot;A farmer presents with swollen feet with sinuses and discharge. The likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anatomist wart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mycetoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Plantar wart&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Mycetoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58506031698750247/58506031698750247.m3u8&quot;}, {&quot;text&quot;: &quot;A 23 year old promiscuous male presents a week after an unprotected sexual encounter with a stranger with 2 painful ulcers over his penis with painful bubos. The diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chancre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;LGV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Chancroid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33715521698750260/33715521698750260.m3u8&quot;}, {&quot;text&quot;: &quot;A 59 yr old married male presents with recurrent itchy erythema on glans. The next step in diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;KOH smear&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tzanck preparation&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dark ground microscopy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Gram-stain of scrapings&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. KOH smear&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11625001698750297/11625001698750297.m3u8&quot;}, {&quot;text&quot;: &quot;A 10 year old boy presented with painful boggy swelling of scalp, multiple sinuses with purulent discharge, easily pluckable hair and enlarged lymph nodes in occipital region. Which one of the following would be most helpful for diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;KOH mount&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Biopsy and culture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bacterial culture&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Patch test&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. KOH mount&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26010191698750312/26010191698750312.m3u8&quot;}, {&quot;text&quot;: &quot;A washerwoman presents with erosions and whitish discoloration of web spaces of toes. The diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tinea pedis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pseudomonas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Candidiasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42332051698750326/42332051698750326.m3u8&quot;}, {&quot;text&quot;: &quot;About dermatophytes all are true except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Candida albicans usually causes systemic infection in immunocompetent people&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dermatophytes primarily involve stratum corneum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microsporum doesn’t involve nail&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epidermophyton doesn’t involve hair&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Candida albicans usually causes systemic infection in immunocompetent people&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45465771698750337/45465771698750337.m3u8&quot;}, {&quot;text&quot;: &quot;Discharging sinus is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Actinomycetoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Actinomycetoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73011181698750350/73011181698750350.m3u8&quot;}, {&quot;text&quot;: &quot;Linear nodules are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Sporotrichosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Cradle cap is a type of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Loss of hair&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Seborrheic dermatitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53667401698750463/53667401698750463.m3u8&quot;}, {&quot;text&quot;: &quot;Spaghetti and meat ball appearance is seen with&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis versicolor&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pityriasis rubra pilaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis lichenoides chronica&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pityriasis versicolor&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75833751698750474/75833751698750474.m3u8&quot;}, {&quot;text&quot;: &quot;A 60-year-old male presents with discoloration, thickening and tunneling of 2 fingernails and one toe nail. Which of the following will clinch the diagnosis at the earliest?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Woods lamp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gram stain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Slit skin smear&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;KOH mount&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. KOH mount&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/446211698750489/446211698750489.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following are used to diagnose fungal infections&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PAS&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Alizarin red&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Von-kossa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Masson’s trichrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. PAS&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68004421698750505/68004421698750505.m3u8&quot;}, {&quot;text&quot;: &quot;A male child presented with swelling in the scalp for 3 months. He has a dog in the home. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Folliculitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Abscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Epidermoid cyst&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Kerion&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Kerion&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(998).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(321).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26106171698652064/26106171698652064.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with the ringworm infection of the scalp. On wood’s lamp examination, dermatophytic infection was suspected. Hair perforation test was positive. diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichophyton mentagrophyte&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Microsporum gypseum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microsporum audounii&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epidermophyton floccosum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Trichophyton mentagrophyte&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(285).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26689151698652328/26689151698652328.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is used as nail lacquer for fungal infections?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fluconazole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nystatin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Terbinafine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Amorolfine&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Amorolfine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(260).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68281421698654583/68281421698654583.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the condition&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Granuloma annulare&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tinea Corporis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pyoderma gangrenosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ichthyosis vulgaris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tinea Corporis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1004).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74929371698654934/74929371698654934.m3u8&quot;}, {&quot;text&quot;: &quot;Only dimorphic fungus which is also a subcutaneous mycosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blastomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chromoblastomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Histoplasmosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Sporotrichosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient presented with hypopigmented macules over back and upper trunk. On KOH mount spaghetti and meat ball appearance was seen. What can be the causative agent?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Malassezia furfur&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tinea nigra&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichosporum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Candida&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Malassezia furfur&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/23(218).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78754571705058503/78754571705058503.m3u8&quot;}, {&quot;text&quot;: &quot;A patient who is a farmer/gardener by occupation, presented with the following lesion.diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mycetoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chromoblastomycosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pheohyphomycosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Mycetoma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1026).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/53(98).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76657681705058556/76657681705058556.m3u8&quot;}, {&quot;text&quot;: &quot;A patient comes with itching in the groin since 2 months. All can cause this except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Aspergillus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichophyton&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Microsporum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Epidermophyton&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Aspergillus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74058641704712056/74058641704712056.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with lesions as shown after a thorn prick. The likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chromoblastomycosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rhinosporidiosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycetoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;TB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Chromoblastomycosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(344).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/165821704712266/165821704712266.m3u8&quot;}, {&quot;text&quot;: &quot;A child comes with patchy hair loss, itching and scaling on the scalp as shown. The next best step is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;KOH mount&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Giemsa staining&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Biopsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tzanck smear&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. KOH mount&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19(267).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56954271704712321/56954271704712321.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with a bald patch on the scalp with easy pluckability of hair. Physician noticed black spots on the area. Treatment to be given will be-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Amphotericin B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fluconazole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Griseofulvin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ciclopirox olamine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Griseofulvin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62596001704712452/62596001704712452.m3u8&quot;}, {&quot;text&quot;: &quot;There is a history of prick with vegetative matter in a person after which he developed these linear lesions over his hand. What is the causative agent?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;M. Scrofuloderma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;M. Ulcerans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporothrix schenckii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Phialophora species&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Sporothrix schenckii&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/34(148).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4752611704712522/4752611704712522.m3u8&quot;}, {&quot;text&quot;: &quot;A Farmer with history of wart/cauliflower lesion on foot. Histology as shown is s/o?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sclerotic bodies&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Budding yeast&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Broad base non capsulated&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Splendore hoeppli phenomenon&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sclerotic bodies&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/49(99).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A 24 year old diabetic female with bilateral brown pigmentation in axilla and groin. which of the following is the correct match:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Wood lamp examination showing green fluorescence&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wood lamp examination showing yellow fluorescence&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Wood lamp examination showing blue fluorescence&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Wood lamp examination showing coral pink fluorescence&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Wood lamp examination showing coral pink fluorescence&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/51(90).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/648941704712703/648941704712703.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with lymphatic dissemination of his disease as shown in the picture. All the following can cause this, except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nocardia infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Staphylococcal infections&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporothrix infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mycobacterium marinum infection&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Staphylococcal infections&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/56(85).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58232101704712773/58232101704712773.m3u8&quot;}, {&quot;text&quot;: &quot;Match the finding of column A with best alternative in column B&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1-b, 2-a, 3-d, 4-e&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1-b, 2-d, 3-a, 4-c&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1-d. 2-a, 3-c, 4-e&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1-a, 2-c, 3-e, 4-d&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1-b, 2-a, 3-d, 4-e&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Picture1(39).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which of the following causes infection due to bare foot walking?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Madurella Mycetoma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nocardia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Aspergillus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Curvularia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Madurella Mycetoma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23911051731497274/23911051731497274.m3u8&quot;}, {&quot;text&quot;: &quot;Topical Antifungal used in treatment of Fungal infection?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Griseofulvin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tavabarole&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Caspofungin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Itraconazole&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Tavabarole&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34001471731497292/34001471731497292.m3u8&quot;}, {&quot;text&quot;: &quot;A Gardner who resides in sub-Himalayan area came with nodules on the forearm. What is the causative agent.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sporothrix schenckii&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cryptococcosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Staphylococcus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Blastomycosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Sporothrix schenckii&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(682).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54910891731497311/54910891731497311.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 38 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test10" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;General Dermatology&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;General Dermatology&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                15 Questions | 44 Total Marks | 25 min Duration | ~100.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Cells NOT involved in the immune response in the skin:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Langerhans cells.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Keratinocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dendritic cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Melanocytes&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Melanocytes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16641461698747677/16641461698747677.m3u8&quot;}, {&quot;text&quot;: &quot;All are causes of primary acantholysis except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CMV&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Darier’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hailey Hailey disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. CMV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75921961698747667/75921961698747667.m3u8&quot;}, {&quot;text&quot;: &quot;Epidermal-melanin unit is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1:20&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1:30&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1:36&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1:10&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. 1:36&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43984631698747655/43984631698747655.m3u8&quot;}, {&quot;text&quot;: &quot;A 19-year old male presents with several comedones, papules and pustules on face and trunk. The appropriate drug of choice for the patient would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Topical retinoic acid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Topical retinoic acid + Oral doxycycline&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Topical clindamycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Topical azithromycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Topical retinoic acid + Oral doxycycline&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51881551698747645/51881551698747645.m3u8&quot;}, {&quot;text&quot;: &quot;Lichenification is most commonly&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Seen in irritant dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Result of chronic rubbing and scratching&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Associated with acute exacerbations of eczemas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Histologically shows spongiosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Result of chronic rubbing and scratching&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69358181698747635/69358181698747635.m3u8&quot;}, {&quot;text&quot;: &quot;True about stratum lucidum&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sandwitched between stratum spinosum &amp;amp; stratum granulosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Contains hair bulbs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Also called as prickle cell layer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Contain degenerated cells&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Contain degenerated cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21479341698747618/21479341698747618.m3u8&quot;}, {&quot;text&quot;: &quot;All statements are true regarding skin except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Skin is stratified squamous epithelium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Melanocytes are the most prevalent epidermal cell&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratin filaments are a hall mark of epidermal cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Filaggrin assists in keratinization&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Melanocytes are the most prevalent epidermal cell&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40698991698747603/40698991698747603.m3u8&quot;}, {&quot;text&quot;: &quot;Acantholysis is due to destruction of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Filaggrin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intercellular cement&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Basement membrane&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Intercellular adhesion&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Intercellular adhesion&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17068771698747592/17068771698747592.m3u8&quot;}, {&quot;text&quot;: &quot;Desmosomes are helpful in connecting:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratinocytes and melanocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Melanocytes and merkel cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Keratinocytes and keratinocytes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Langerhans cells and keratinocytes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Keratinocytes and keratinocytes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13043411698747580/13043411698747580.m3u8&quot;}, {&quot;text&quot;: &quot;Tzanck cell is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Keratinocyte&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Fibroblast&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neutrophil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lymphocyte&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Keratinocyte&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65049241698747567/65049241698747567.m3u8&quot;}, {&quot;text&quot;: &quot;Acantholytic cell in pemphigus is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cell with hyperchromatic nuclei and perinuclear halo&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cell with hypochromatic nuclei and perinuclear halo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Multinucleated cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cell with hyperchromatic nuclei and perinuclear halo&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40395461698747551/40395461698747551.m3u8&quot;}, {&quot;text&quot;: &quot;Meissner’s corpuscles are found in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Startum lucidum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stratum basale&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Papillary dermis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Reticular dermis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Papillary dermis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63461571704712164/63461571704712164.m3u8&quot;}, {&quot;text&quot;: &quot;Maximum Desmosomes are seen in which layer ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;A&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;B&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;C&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;D&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. C&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14(360).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32423361704712252/32423361704712252.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the following lines in dermatology:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Blaschko lines&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Langer line&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatomal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Embryonal&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Langer line&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(79).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Apocrine sweat glands are present on which part of the body?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scalp&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Palm and sole&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Axilla&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Face&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Axilla&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 25 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test11" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Histopathology&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Histopathology&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 16 Total Marks | 15 min Duration | ~180.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Granulomatous infiltrate is seen in all the following, EXCEPT:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Granuloma pyogenicum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lupus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Satellite lesion of leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Granuloma pyogenicum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26628951698660236/26628951698660236.m3u8&quot;}, {&quot;text&quot;: &quot;Interface dermatitis is seen in all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema multiforme&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Graft vs Host disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Psoriasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1028961698660304/1028961698660304.m3u8&quot;}, {&quot;text&quot;: &quot;Microabscesses are not seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mycosis fungoides&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dermatitis herpetiformis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lichen planus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11834431698660316/11834431698660316.m3u8&quot;}, {&quot;text&quot;: &quot;In which of the following conditions, parakeratosis most frequently occurs&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Actinic keratosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seborrheic keratosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Basal cell carcinoma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Actinic keratosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28898041698660327/28898041698660327.m3u8&quot;}, {&quot;text&quot;: &quot;A farmer having trauma in lower limb following which a cauliflower like growth developed on that site. On HPE Copper penny bodies are seen. What is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chromoblastomycosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mycetoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sporotrichosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;pheohyphomycosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Chromoblastomycosis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(990).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(841).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/76365391698650734/76365391698650734.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test12" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Leprosy&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Leprosy&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                36 Questions | 104 Total Marks | 46 min Duration | ~76.67 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;The nerve which is suitable for nerve biopsy in neural hansens is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Radial cutaneous&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ulnar&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Median&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Greater auricular&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Radial cutaneous&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42109671698763675/42109671698763675.m3u8&quot;}, {&quot;text&quot;: &quot;Dapsone syndrome in hansen therapy is seen after&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1st week of therapy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;2 weeks&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;48 hours&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;5 weeks&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. 5 weeks&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71781001698763707/71781001698763707.m3u8&quot;}, {&quot;text&quot;: &quot;An 8 yr old boy from Bihar presents with a 6 month history of an ill-defined, hypopigmented slightly atrophic macule on the face. The most likely diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis alba&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Indeterminate leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Morphea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Calcium deficiency&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Indeterminate leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45215911698763732/45215911698763732.m3u8&quot;}, {&quot;text&quot;: &quot;Trophic ulcers are common in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;TT&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;BL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;BB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. LL&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54308071698763752/54308071698763752.m3u8&quot;}, {&quot;text&quot;: &quot;The Indian classification of Leprosy is different from Ridley Jopling in including&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neural leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;BB Hansen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;BT Hansen&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;BL Hansen&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Neural leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59159801698763765/59159801698763765.m3u8&quot;}, {&quot;text&quot;: &quot;All are true for lepromin test except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;It is used to define the immune status of patient&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;It is a diagnostic test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;It is a cell mediated response&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;It may be used to for prognosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. It is a diagnostic test&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44102561698763780/44102561698763780.m3u8&quot;}, {&quot;text&quot;: &quot;Duration of treatment of multibacillary treatment of leprosy is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;MDT for six months to be completed in six months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;MDT for 12 months to be completed in 12 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;MDT for 12 months to be completed in 18 months&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;MDT for six months to be completed in nine months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. MDT for 12 months to be completed in 18 months&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55685841698763791/55685841698763791.m3u8&quot;}, {&quot;text&quot;: &quot;Foams cells are most seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;TT Hansen’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;BT Hansen’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;BL Hansen’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;LL Hansen’s disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. LL Hansen’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67890041698763846/67890041698763846.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following drugs can not be used for both type I and Type II lepra reactions&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Corticosteroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Azathioprine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thalidomide&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chloroquine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Thalidomide&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50998921698763858/50998921698763858.m3u8&quot;}, {&quot;text&quot;: &quot;In Lepromatous leprosy all of the following are TRUE, EXCEPT:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Leonine facies.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Anaesthetic patches &amp;amp; thickened tender nerves.&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lepromin test - Negative&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Patient is infective&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Anaesthetic patches &amp; thickened tender nerves.&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35520821698763872/35520821698763872.m3u8&quot;}, {&quot;text&quot;: &quot;The commonest deformity in Leprosy is :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ape thumb&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leonine facies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Claw Hand&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Foot drop&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Claw Hand&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6182921698763884/6182921698763884.m3u8&quot;}, {&quot;text&quot;: &quot;A 45 year old male had many hypoesthetic, erythematous small plaques on trunk and extremities. Multiple thickened nerves almost symmetrically enlarged are palpable. Most probable diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lepromatous leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Borderline leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Borderline tuberculoid leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Borderline lepromatous leprosy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Borderline lepromatous leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23447671698763897/23447671698763897.m3u8&quot;}, {&quot;text&quot;: &quot;TNF-alpha is strongly associated with pathogenesis of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Reversal reaction in leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythema nodosum leprosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lepromin conversion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tuberculoid leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Erythema nodosum leprosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73068061698763910/73068061698763910.m3u8&quot;}, {&quot;text&quot;: &quot;Most potent anti leprotic drug is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Clofazimine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rifampicin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Norfloxacin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Rifampicin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7849631698763922/7849631698763922.m3u8&quot;}, {&quot;text&quot;: &quot;Anti leprotic drug used in lepra reaction is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rifampicin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Clofazimine&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Clofazimine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25324981698763934/25324981698763934.m3u8&quot;}, {&quot;text&quot;: &quot;Best method of treatment of an established ulnar nerve abscess in a case of leprosy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Incision and drainage&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;High dose of steroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thalidomide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;High dose of clofazimine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Incision and drainage&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9595701698763946/9595701698763946.m3u8&quot;}, {&quot;text&quot;: &quot;Nerves are not thickened in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tuberculoid leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lepromatous leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Indeterminate leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Borderline tuberculoid leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Indeterminate leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37935581698763956/37935581698763956.m3u8&quot;}, {&quot;text&quot;: &quot;ENL is seen in which form of leprosy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Indeterminate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;BT&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;LL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;BB&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. LL&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54249121698763967/54249121698763967.m3u8&quot;}, {&quot;text&quot;: &quot;One of the following is a side effect of clofazimine used in leprosy therapy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hyperpigmentation&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Discoloration of body secretions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Macular rash&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hyperpigmentation&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43264141698763980/43264141698763980.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is classical of borderline leprosy&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Extensive glove and stocking anesthesia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Inverted saucer lesions&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema nodosum leprosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Facial lesions&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Inverted saucer lesions&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24386901698763993/24386901698763993.m3u8&quot;}, {&quot;text&quot;: &quot;Histoid Leprosy is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Non-nodular diffuse form&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Seen in relapse of Leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Facies Leonina&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Common in Central Americans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Seen in relapse of Leprosy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67929901698764008/67929901698764008.m3u8&quot;}, {&quot;text&quot;: &quot;What is correct about leprosy control programmes&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Slit smears are required to diagnose and follow leprosy patients&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Reactions, if severe, require temporary cessation of MDT&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thalidomide is used as preferred drug for type II reaction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Clinical diagnosis alone is used as basis of instituting MDT&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Clinical diagnosis alone is used as basis of instituting MDT&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35365451698764018/35365451698764018.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is Paucibacillary leprosy?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;BI= 0&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;BB Leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;6 anesthetic lesions&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;2 thickened peripheral nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. BI= 0&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73884291698764029/73884291698764029.m3u8&quot;}, {&quot;text&quot;: &quot;A Patient presented with borderline leprosy of the face.which nerve is affected?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;CN5&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CN7&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;CN3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;CN8&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. CN7&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(994).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28880841705059037/28880841705059037.m3u8&quot;}, {&quot;text&quot;: &quot;Patient on multidrug therapy for leprosy presented with inflammation of the existing lesions, nerve involvement is also seen without systemic features. What will be the treatment approach?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stop antileprosy treatment &amp;amp; start steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stop antileprosy treatment &amp;amp; start thalidomide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Continue antileprosy treatment &amp;amp; start steroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Continue antileprosy treatment &amp;amp; start thalidomide&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Continue antileprosy treatment &amp; start steroids&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1000).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39747711698654435/39747711698654435.m3u8&quot;}, {&quot;text&quot;: &quot;The packet as shown in image is used for&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Option A&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;TB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;STD&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Leprosy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(515).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1447371704712178/1447371704712178.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with lesions as shown. The diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Borderline leprosy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Borderline lepromatous leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lepromatous leprosy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Histoid leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Borderline leprosy&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(307).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/450101704712293/450101704712293.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of multibacillary leprosy is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;2 drugs in 12 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;3 drugs in 12 months&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;2 drugs in 6 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;4 drugs in 12 months&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 3 drugs in 12 months&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5270491704712428/5270491704712428.m3u8&quot;}, {&quot;text&quot;: &quot;Which nerve biopsy is taken to diagnose neuritic leprosy?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Median nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Radial cutaneous nerve&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ulnar nerve&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sural nerve&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Radial cutaneous nerve&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61561671704712479/61561671704712479.m3u8&quot;}, {&quot;text&quot;: &quot;A man from Bihar with childhood history of prolonged fever with nodular lesions on face and neck. There was no hypoesthesia &amp;amp; nerve thickening. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;PKDL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Silver poisoning&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tuberculoid leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. PKDL&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/39(122).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Incorrect about leprosy?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Half of the new cases shows remission each year&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Children remission more than in adult&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leprosy patient have spontaneous remission&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Indeterminate leprosy shows remission more than tuberculoid leprosy&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Half of the new cases shows remission each year&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9154421704712594/9154421704712594.m3u8&quot;}, {&quot;text&quot;: &quot;A pregnant lady on leprosy treatment presented with type 2 lepra reaction. What will be the line of management.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Stop MDT &amp;amp; add steroids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thalidomide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Continue MDT &amp;amp; add steroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Azathioprine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Continue MDT &amp; add steroids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12245421704712605/12245421704712605.m3u8&quot;}, {&quot;text&quot;: &quot;What is the treatment of a male with hypopigmented patch having thickened nerve &amp;amp; satellite lesions?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Kit A 6 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kit A 12 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Kit B 6 months&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Kit B 12 months&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Kit B 12 months&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/44(115).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61382621704712619/61382621704712619.m3u8&quot;}, {&quot;text&quot;: &quot;For starting chemotherapy in leprosy which of the following should be met?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Age should be &amp;gt; 2yrs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Living with the patient for &amp;gt;6 months&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Close contact for &amp;gt; 20 hrs per week&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sharing same towels&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Living with the patient for &gt;6 months&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52821291704712688/52821291704712688.m3u8&quot;}, {&quot;text&quot;: &quot;Drug of choice for type 2 lepra reaction in pregnancy is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Steroid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thalidomide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chloroquine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Steroid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46983151704712760/46983151704712760.m3u8&quot;}, {&quot;text&quot;: &quot;Which antileprosy medicine causes pigmentation?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rifampicin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Clofazimine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dapsone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ofloxacin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Clofazimine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(340).png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31220431721393751/31220431721393751.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 46 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test13" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Mast Cell Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Mast Cell Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                5 Questions | 12 Total Marks | 15 min Duration | ~180.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A five yr old male child has multiple hyperpigmented macules over the trunk. On rubbing the lesion with the rounded end of a pen, he developed urticarial wheal, confined to the border of the lesion. The most likely diagnosis is.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Fixed drug reaction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Urticaria pigmentosa&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Urticarial vasculitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Urticaria pigmentosa&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14392631698751593/14392631698751593.m3u8&quot;}, {&quot;text&quot;: &quot;A 22 yr old woman developed small itchy wheals after physical exertion, walking in the sun and eating spicy food. The most likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chronic idiopathic urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cholinergic urticaria&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Solar urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Adrenergic urticaria&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cholinergic urticaria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64805181698751606/64805181698751606.m3u8&quot;}, {&quot;text&quot;: &quot;What is incorrect about androgenetic alopecia?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Males and females present with frontoparietal hair loss&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Finasteride is used to treat androgenetic alopecia in males&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Minoxidil is a useful topical agent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Histology shows miniaturization of hairs&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Males and females present with frontoparietal hair loss&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38332361698751624/38332361698751624.m3u8&quot;}, {&quot;text&quot;: &quot;A female student presents with urticaria following intake of sea food. She wants a non sedating drug since this is her exam time. Which is the preferred antihistamine for this patient?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chlorpheniramine maleate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Promethazine hydrochloride&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Diphenhydramine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fexofenadine&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Fexofenadine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51342361705058532/51342361705058532.m3u8&quot;}, {&quot;text&quot;: &quot;All of the following presents as annular plaque except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis Rosea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Urticaria&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Porokeratosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tinea corporis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Urticaria&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(378).png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/548311721393732/548311721393732.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 15 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test14" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Miscellaneous&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Miscellaneous&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                30 Questions | 80 Total Marks | 40 min Duration | ~80.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Carpet Tack sign is seen in:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Systemic Lupus Erythematosus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Discoid Lupus Erythematosus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rosacea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Morphea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Discoid Lupus Erythematosus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77506801698764883/77506801698764883.m3u8&quot;}, {&quot;text&quot;: &quot;A 4-year-old boy has had a fever for 5 days, cracked lips, conjunctival injection, an exanthem, and cervical lymphadenopathy. What is the most likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Rubeola&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kawasaki disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema infectiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Kawasaki disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68255351698764894/68255351698764894.m3u8&quot;}, {&quot;text&quot;: &quot;A patient had irregular hyperpigmented patches on the trunk and multiple small hyperpigmented macules in the axillae and groins since early childhood. There were no other skin lesions. Which is the most likely investigation to support the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Retinal artery angiography&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Examination of fundus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Measurement of intraocular tension&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Slit lamp examination of eye&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Slit lamp examination of eye&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9240161698764906/9240161698764906.m3u8&quot;}, {&quot;text&quot;: &quot;Which of these statement is false for Erythema marginatum :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lesions are serpiginous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Characteristically it is evanescent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rash worsens on application of heat&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rash is itchy&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Rash is itchy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19962361698764919/19962361698764919.m3u8&quot;}, {&quot;text&quot;: &quot;Desquamation of skin occurs in all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythema infectiosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kawasaki disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scarlet fever&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Toxic shock syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Erythema infectiosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63977651698764935/63977651698764935.m3u8&quot;}, {&quot;text&quot;: &quot;Pick out the wrong statement&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Carpet-tac- DLE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dimple sign- Dermatofibroma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nikolskiy sign- SSSS&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ollendorf sign- tertiary syphilis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Ollendorf sign- tertiary syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46160271698764948/46160271698764948.m3u8&quot;}, {&quot;text&quot;: &quot;Wood’s lamp lighting is use in the diagnosis of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tinea capitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Candida albicans&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Histoplasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cryptococcus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tinea capitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66088541698764960/66088541698764960.m3u8&quot;}, {&quot;text&quot;: &quot;45 years old lady came with erythematous, tender, subcutaneous nodules on both shins associated with arthralgia. There was history of sore throat. Diagnosis would be :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythema induratum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema Nodosum&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Erythema Nodosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3496941698764971/3496941698764971.m3u8&quot;}, {&quot;text&quot;: &quot;Which of these statements is false for lesions of erythema nodosum&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;They are considered as hypersensitivity reaction&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;The skin overlying the lesion is red, smooth and shiny&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;They are usually non tender&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;They can be associated with tuberculosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. They are usually non tender&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18675321698765051/18675321698765051.m3u8&quot;}, {&quot;text&quot;: &quot;25 yr old male having fever &amp;amp; malaise since 2 weeks, pain of ankle joints and tender erythematous nodules over the shin. Diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythema nodosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hansen’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Weber-Christian disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nodular vasculitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Erythema nodosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26828151698765064/26828151698765064.m3u8&quot;}, {&quot;text&quot;: &quot;Which extrarenal manifestation of inflammatory bowel disease correlates with its severity?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Uveitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Arthritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema nodosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Primary sclerosing cholangitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Erythema nodosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23811021698765089/23811021698765089.m3u8&quot;}, {&quot;text&quot;: &quot;Which is a correct combination&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythema infectiosum : TB&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythema marginatum: Parvovirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema multiforme: Sarcoidosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema chronicum: Lyme’s disease&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Erythema chronicum: Lyme’s disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75871541698765105/75871541698765105.m3u8&quot;}, {&quot;text&quot;: &quot;Congenital zinc deficiency is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scurvy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kwashiorkor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acrodermatitis enteropathica&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pellagra&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Acrodermatitis enteropathica&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20320611698765133/20320611698765133.m3u8&quot;}, {&quot;text&quot;: &quot;All are true for Tuberous sclerosis except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypomelanotic macules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Shagreen patch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Koenen’s tumors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Axillary freckles&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Axillary freckles&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73845631698765143/73845631698765143.m3u8&quot;}, {&quot;text&quot;: &quot;A 35-year old alcoholic presents with diarrhea and scaly rash on his neck, hands and feet. He will improve if he is treated with which one of the following&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nicotinic acid&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Thiamine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vitamin A&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Folic Acid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Nicotinic acid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50025401698765154/50025401698765154.m3u8&quot;}, {&quot;text&quot;: &quot;What is not true about Seborrheic keratoses&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Seborrheic keratoses are superficial benign skin tumors&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;They can be removed by curettage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Seborrheic keratoses if appear suddenly in an eruptive fashion may indicate internal malignancy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;They are precancerous lesions&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. They are precancerous lesions&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66916931698765173/66916931698765173.m3u8&quot;}, {&quot;text&quot;: &quot;PUVA is therapeutic tool in all the following, EXCEPT&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rosacea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mycosis Fungoides&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Rosacea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40698901698765188/40698901698765188.m3u8&quot;}, {&quot;text&quot;: &quot;Shagreen patch is usually found in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Face&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cervical region&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Limbs&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lumbosacral region&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Lumbosacral region&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58967801698765199/58967801698765199.m3u8&quot;}, {&quot;text&quot;: &quot;The pathognomic sign of neurofibromatosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Café-au-lait macules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Axillary freckling&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Shagreen patch&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;None of the above&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Axillary freckling&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74924091698765210/74924091698765210.m3u8&quot;}, {&quot;text&quot;: &quot;This appearance is seen in ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vitamin A deficiency&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitamin B3 deficiency&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Vitamin B12 deficiency&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Vitamin A deficiency&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(991).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(766).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30011931698650835/30011931698650835.m3u8&quot;}, {&quot;text&quot;: &quot;A patient who is a farmer works in maize field and have more maize in his food presented with diarrhoea, dementia and some lesions on neck, which vitamin deficiency can lead to the given condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Niacin&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Riboflavin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pyridoxine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tyrosine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Niacin&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/13(372).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46971501698651798/46971501698651798.m3u8&quot;}, {&quot;text&quot;: &quot;A girl child presented with rough keratotic lesions over her elbow, knee and she also had problem in dark vision/night vision. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Phrynoderma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;KP&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Darier’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Folliculitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Phrynoderma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(997).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(340).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27421251698651994/27421251698651994.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the condition shown in the image:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;DLE&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;SLE&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Rosaceae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. DLE&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1002).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/22(219).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Melanin is formed from?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tyrosine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tryptophan&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leucine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Valine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tyrosine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Neurofibromatosis type 1 is a hereditary condition associated with café-au-lait spots on the skin. Which pattern of inheritance is seen in this condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Autosomal dominant&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Autosomal recessive&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;X-linked dominant&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;X-linked recessive&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Autosomal dominant&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(305).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70255601705058422/70255601705058422.m3u8&quot;}, {&quot;text&quot;: &quot;A patient came to OPD with complaints of Diarrhoea, dermatitis and mental retardation. It was found that he was a maize eater. Which of the following could be the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Beri-beri&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pellagra&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Night blindness&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;kwashiorkor&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pellagra&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/19(266).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An alcoholic patient presents with lesions as shown. He also has diarrhea. Deficiency of which of the following is associated with it.&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tryptophan&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Serine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Proline&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lysine&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tryptophan&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/29(171).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16427101704712468/16427101704712468.m3u8&quot;}, {&quot;text&quot;: &quot;A young boy/10 year old complaints of arthritis, papules and rash as shown. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Juvenile Rheumatoid arthritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Juvenile dermatomyositis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Sclerodactyly&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;SLE&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Juvenile dermatomyositis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/48(99).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69944031704712673/69944031704712673.m3u8&quot;}, {&quot;text&quot;: &quot;The patient presented with progressive proximal muscle weakness and facial rash. What is the image given below indicates?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gottron’s papule&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Heliotrope rash&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mechanics hand&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Shawl sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Gottron’s papule&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/53(99).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28696601704712729/28696601704712729.m3u8&quot;}, {&quot;text&quot;: &quot;Match the following?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1:b, 2:a, 3:c, 4: d&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1: a, 2: b, 3:d, 4:c&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1:a, 2:c, 4, 3:b, 4:d&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1: d, 2: b, 3: c, 4: a&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. 1: a, 2: b, 3:d, 4:c&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(300).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68428991721393822/68428991721393822.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 40 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test15" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Nail Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Nail Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                6 Questions | 20 Total Marks | 16 min Duration | ~160.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Irregular pitting is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Psoriasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75909651698752978/75909651698752978.m3u8&quot;}, {&quot;text&quot;: &quot;Half and half nail is due to&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Melanin deposition&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Parakeratosis of nail&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Onycholysis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hypoalbuminemia&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Melanin deposition&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202023-06-09%20at%209_14_36%20PM.png&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35203471698753018/35203471698753018.m3u8&quot;}, {&quot;text&quot;: &quot;Twenty nail dystrophy is associated with all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Pemphigus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28735951698753037/28735951698753037.m3u8&quot;}, {&quot;text&quot;: &quot;Most common manifestation of psoriasis of nail is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Discoloration&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pitting&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Onycholysis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Subungual hyperkeratosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pitting&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58014811698753073/58014811698753073.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following nail changes are NOT correctly matched&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus and dorsal pterygium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Systemic sclerosis and ventral pterygium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis and irregular pitting&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Alopecia areata and irregular pitting&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Alopecia areata and irregular pitting&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22656291698753111/22656291698753111.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with nail pitting, subungual hyperkeratosis and following nail feature. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Alopecia areata&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(992).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73525601698651128/73525601698651128.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 16 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test16" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Parasitic Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Parasitic Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                11 Questions | 40 Total Marks | 21 min Duration | ~114.55 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A 53 year old male patient from Bihar comes with the complaints of multiple, hypopigmented, normoesthetic macules, distributed symmetrically over face, arm and upper back. He gives history of prolonged fever 1 year back which required hospitalization and injections. There are no enlarged nerves. A slit smear made from the macules shows no AFB. The next step in diagnosing this patient will be:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Crush tissue preparation stained with giemsa&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;PCR for lepra bacilli&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Skin biopsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Repeat slit smear including nasal septum and earlobes.&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Crush tissue preparation stained with giemsa&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61487671698749360/61487671698749360.m3u8&quot;}, {&quot;text&quot;: &quot;Which is not infested by Phthirus pubis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Axillary hair&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pubic hair&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scalp hair&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Eyelashes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Scalp hair&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73964571698749370/73964571698749370.m3u8&quot;}, {&quot;text&quot;: &quot;Most effective treatment of Vagabond’s disease is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Disinfection of clothing&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Permethrin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Malathion&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Cotrimoxazole&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Disinfection of clothing&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/46881261698749382/46881261698749382.m3u8&quot;}, {&quot;text&quot;: &quot;Rakesh, a 7- year old boy had itchy, excoriated papules on the forehead and the exposed parts of the arms and legs for 3 years. The disease was most severe in the rainy season and improved completely in winter. The most likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Insect bite hypersensitivity&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Insect bite hypersensitivity&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70564601698749392/70564601698749392.m3u8&quot;}, {&quot;text&quot;: &quot;PKDL is caused by:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Leishmania donovani&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Leishmania mexicana&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Leishmania aethiopica&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Leishmania brasiliensis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Leishmania donovani&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31536961698749407/31536961698749407.m3u8&quot;}, {&quot;text&quot;: &quot;Topical or intradermal steroids are indicated in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Animal Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Nodular Scabies&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Infantile Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Norwegian Scabies&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Nodular Scabies&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9384971698749424/9384971698749424.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice for pediculosis corporis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Benzene hexachloride for 3 applications&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Benzyl benzoate for three applications&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Disinfection of clothes only&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Permethrin 1% application&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Disinfection of clothes only&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1045011698749434/1045011698749434.m3u8&quot;}, {&quot;text&quot;: &quot;Maculae cerulae are characteristic of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pediculosis capitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pediculosis pubis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Larva migrans&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pediculosis pubis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42531651698749453/42531651698749453.m3u8&quot;}, {&quot;text&quot;: &quot;Nodular scabies is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Web space of fingers&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Scrotum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Axilla&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trunk&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Scrotum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/31075031698749463/31075031698749463.m3u8&quot;}, {&quot;text&quot;: &quot;An infant has papulovesicular lesions on palms, soles, face and trunk.The diagnosis would be-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Atopic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Urticaria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Scabies&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4400341698749476/4400341698749476.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the arthropod shown in image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pediculus humanus capitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Sarcoptes scabiei var hominis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Phthirus pubis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatobia hominis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Sarcoptes scabiei var hominis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1011).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(735).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24869491698655521/24869491698655521.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 21 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test17" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Pigmentation Diseases&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Pigmentation Diseases&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                15 Questions | 28 Total Marks | 25 min Duration | ~100.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A female presents with hypopigmented round lesion in the middle of forehead. It is caused by which of the following&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hydroquinone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Mono Benzyl Ether of Hydroquinone&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Para Tertiary Butyl Phenol&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;d. Para Tertiary Butyl Catechol&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Para Tertiary Butyl Phenol&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47487811698752073/47487811698752073.m3u8&quot;}, {&quot;text&quot;: &quot;Vitiligo is characterized by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Absent melanocytes&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Defective enzyme tyrosinase&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Defective migration of melanocytes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;External chemical destruction of melanocytes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Absent melanocytes&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7360041698752085/7360041698752085.m3u8&quot;}, {&quot;text&quot;: &quot;A patient comes into the clinic with a unilateral blue-brown speckled patch involving her malar face. A biopsy shows an increased number of elongated, dendritic melanocytes scattered throughout the dermis, and normal collagen pattern. Which of the following is the correct diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Nevus of Ota&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Blue nevus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypomelanosis of Ito&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Sturge Weber syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Nevus of Ota&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69967611698752097/69967611698752097.m3u8&quot;}, {&quot;text&quot;: &quot;A 29 years old female presents with blotchy hyperpigmentation on cheeks &amp;amp; nose. She developed them during pregnancy. Diagnosis is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Senile lentigenes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Freckles&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nevi&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chloasma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Chloasma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72458131698752111/72458131698752111.m3u8&quot;}, {&quot;text&quot;: &quot;In a patch of vitiligo&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Melanin synthesis is reduced&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tyrosinase is genetically absent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Melanocytes are absent&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Melanocytes are reduced&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Melanocytes are absent&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56966601698752121/56966601698752121.m3u8&quot;}, {&quot;text&quot;: &quot;A 23 year old lady develops brown macular lesions over bridge of nose and cheeks following exposure to light. The probable diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Melasma&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rosacea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Systemic lupus erythematosus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Photodermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Melasma&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3759791698752133/3759791698752133.m3u8&quot;}, {&quot;text&quot;: &quot;Skin pigmentation is caused by all except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Monobenzyl ether of hydroquinone&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dactinomycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cyclophosphamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Busulphan&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Monobenzyl ether of hydroquinone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8924971698752144/8924971698752144.m3u8&quot;}, {&quot;text&quot;: &quot;A female with BMI-30kg/m2 presented with following picture. This is associated with?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Metabolic syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Addison’s disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hypothyroidism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Parathyroid disease&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Metabolic syndrome&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(993).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(558).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28524441698651364/28524441698651364.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the disorder depicted in the image below?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Piebaldism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Albinism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Contact leukoderma&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Contact leukoderma&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1008).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(954).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60420251698655331/60420251698655331.m3u8&quot;}, {&quot;text&quot;: &quot;Velvety hyperpigmentation on flexural area of individual suffering from diabetes as shown in the Image. Identify the lesion?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Becker&#x27;s nevus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Acanthosis nigricans&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythrasma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Acanthosis nigricans&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1009).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/2(848).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7146901698655378/7146901698655378.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with the following lesion. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypomelanosis of ito&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitiligo (segmental)&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Nevus of ito&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Becker’s nevus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Vitiligo (segmental)&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1030).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/57(87).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/53938411705058604/53938411705058604.m3u8&quot;}, {&quot;text&quot;: &quot;Patient presenting with joint pain and mild fever. NSAIDs were prescribed by the doctor. later,he Developed pigmentation after 1 week on the tip of the nose. What may be the condition?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Melasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dengue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chikungunya&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Fixed drug eruption&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Chikungunya&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10_1(92)(1).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38315121704712212/38315121704712212.m3u8&quot;}, {&quot;text&quot;: &quot;A female comes with unilateral lesions as shown in the image. She also has Leucotrichia. The diagnosis is likely to be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Segmental vitiligo&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Focal vitiligo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Piebaldism&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Nevus depigmentosus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Segmental vitiligo&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(325).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2013401704712278/2013401704712278.m3u8&quot;}, {&quot;text&quot;: &quot;A 13 year old Obese girl presented with velvety plaque on the neck as shown, Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acanthosis Nigricans&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cushing&#x27;s syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Acanthosis Nigricans&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1425).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;Which type of vitiligo is stable?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Acrofacial&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Segmental&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Focal&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mixed&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Segmental&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47353021721393779/47353021721393779.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 25 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test18" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Psoriasislichen Planus&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Psoriasislichen Planus&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                26 Questions | 60 Total Marks | 36 min Duration | ~83.08 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Wickham’s striae are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen nitidus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen Planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen striatus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichenoid eruptions&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lichen Planus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9833301698652387/9833301698652387.m3u8&quot;}, {&quot;text&quot;: &quot;Not a sign of lichen planus&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pterygium&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trachyonyhcia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Thickening of nail&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tented nail&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Thickening of nail&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34956871698652477/34956871698652477.m3u8&quot;}, {&quot;text&quot;: &quot;What is not a histological feature of psoriasis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Max Joseph space&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Munro Microabscess&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Parakeratosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Suprapapillary thinning&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Max Joseph space&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77323821698652490/77323821698652490.m3u8&quot;}, {&quot;text&quot;: &quot;What is not seen in lichen planus&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Excoriation marks&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Purpulish papules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lacy white lines in buccal mucosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Koebenerization&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Excoriation marks&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67861291698652502/67861291698652502.m3u8&quot;}, {&quot;text&quot;: &quot;What is NOT a standard systemic treatment option for extensive psoriasis vulgaris?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cyclosporine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Acitretin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Prednisolone&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Prednisolone&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37198071698652517/37198071698652517.m3u8&quot;}, {&quot;text&quot;: &quot;In generalized lichen planus acute widespread. treatment of choice is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Topical salicylic acid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Ultraviolet rays&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Systemic steroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythromycin&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Systemic steroids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/62053511698652533/62053511698652533.m3u8&quot;}, {&quot;text&quot;: &quot;The only definite indication for giving systemic corticosteroids in pustular psoriasis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pustular psoriasis with pregnancy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Psoriasis in a patient with alcoholic cirrhosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Moderate arthritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Extensive lesions&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pustular psoriasis with pregnancy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78644201698652566/78644201698652566.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is not a type of lichen planus?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen scrofulosorum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planopilaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen hypertrophica&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Lichen pigmentosa&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Lichen scrofulosorum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74461551698652613/74461551698652613.m3u8&quot;}, {&quot;text&quot;: &quot;The most common association with irregular pitting of nails and onycholysis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Violaceous papules&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Well defined scaly plaques&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Cicatricial alopecia&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Polygonal papule&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Well defined scaly plaques&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/423761698652800/423761698652800.m3u8&quot;}, {&quot;text&quot;: &quot;The type of psoriasis commonly seen in children and may follow streptococcal sorethroat is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Guttate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Stable plaque&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pustular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arthropathic&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Guttate&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63759231698652814/63759231698652814.m3u8&quot;}, {&quot;text&quot;: &quot;Drugs used in psoriasis are all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Hydroxyurea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;High dose steroids&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Infliximab&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. High dose steroids&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6187541698652874/6187541698652874.m3u8&quot;}, {&quot;text&quot;: &quot;The treatment for a pregnant diabetic patient with lakes of pus on skin is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cyclosporine&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Azathioprine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Retinoids&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Cyclosporine&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26189851698653005/26189851698653005.m3u8&quot;}, {&quot;text&quot;: &quot;Regarding Lichen planus all are true except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hypopigmentation in residual disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lymphatic infiltration in epidermis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Itchy, polygonal, purple, papule&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Skin, Hair &amp;amp; oral mucosa commonly involved&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hypopigmentation in residual disease&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9874971698653034/9874971698653034.m3u8&quot;}, {&quot;text&quot;: &quot;Basal cell degeneration is characteristic of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen Planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigold&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lichen Planus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37920391698653094/37920391698653094.m3u8&quot;}, {&quot;text&quot;: &quot;A patient with silvery micaceous scales as shown, diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pityriasis Versicolor&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1014).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/33091141705058267/33091141705058267.m3u8&quot;}, {&quot;text&quot;: &quot;A Patient with white lacy mucosal lesions and following skin lesions, diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tinea&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1016).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(475).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5436391705058318/5436391705058318.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with following lesions on the trunk, diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Erythrodermic&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pustular&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Inverse&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Guttate&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Guttate&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1020).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(343).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16847561705058408/16847561705058408.m3u8&quot;}, {&quot;text&quot;: &quot;A 26 year old female presented with scaly skin. On histopathology neutrophils were present. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pemphigus Foliaceous&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;C. Psoriasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/18(287).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48329951705058437/48329951705058437.m3u8&quot;}, {&quot;text&quot;: &quot;All are seen in this condition except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Munro microabscess/kogoj pustules&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wickham striae&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Saw tooth acanthosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Civatte bodies/shiny plaques&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Munro microabscess/kogoj pustules&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1022).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(264).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73297781705058449/73297781705058449.m3u8&quot;}, {&quot;text&quot;: &quot;Patient present with lesions as shown in the image, later patient also developed arthritis. What is the treatment?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Methotrexate&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cyclophosphamide&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Mycophenolate mofetil&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Rituximab&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Methotrexate&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1024).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58991401705058516/58991401705058516.m3u8&quot;}, {&quot;text&quot;: &quot;A young lady presents with lacy lesions in oral cavity and her proximal nail fold has extended onto the nail bed. What is the likely diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Geographic tongue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Lichen planus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1028).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/55(94).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37305901705058580/37305901705058580.m3u8&quot;}, {&quot;text&quot;: &quot;A patient was treated with steroids for Psoriasis. On stopping the treatment, he develops fever, malaise, and lesion as seen in the image below. What is the most probable diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Staphylococcal infection&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Folliculitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Subcorneal pustular dermatosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Acute generalized pustular psoriasis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Acute generalized pustular psoriasis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/22(222).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21243311704712360/21243311704712360.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is a true association&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus and malignant melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Melasma and malignant melanoma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis and metabolic syndrome&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitiligo and metabolic syndrome&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Psoriasis and metabolic syndrome&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/28456371704712413/28456371704712413.m3u8&quot;}, {&quot;text&quot;: &quot;A child with asymptomatic lesion at dorsum of arm and forearm, shaft of penis. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen nitidus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Molluscum&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Lichen nitidus&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/36(140).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65001821704712549/65001821704712549.m3u8&quot;}, {&quot;text&quot;: &quot;Match the following&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1)-d, 2)-c, 3)-b, 4)-a&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1)-c, 2)-d, 3)-b, 4)-a&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1)-b, 2)-c, 3)-d, 4)-a&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1)-b, 2)-c, 3)-a, 4)-d&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1)-d, 2)-c, 3)-b, 4)-a&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/47(114).jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/47_1(22).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35180601704712660/35180601704712660.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following does not differentiate psoriasis from other arthropathies&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pitting&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Enthesitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dactylitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Diarrhoea&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Diarrhoea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2263801731497258/2263801731497258.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 36 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test19" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Std&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Std&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                34 Questions | 80 Total Marks | 44 min Duration | ~77.65 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;A patient presents to you with mucopurulent urethral discharge. He reports having an unprotected sexual exposure 10 days back. A few days later, he complaints of heel pain and swelling of the knee joint. He also reports that his eyes are watering and are red. His skin manifestation could be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Plaques on extensor surfaces&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Plantar hyperkeratosis with oozing&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Whitish discoloration and fissuring of the prepuce&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Condyloma acuminata&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Plantar hyperkeratosis with oozing&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58485941698658479/58485941698658479.m3u8&quot;}, {&quot;text&quot;: &quot;A twenty three year old college student has asymptomatic, hyperpigmented macules on both palms, moist lesions on perianal area, and oral lesions. The most appropriate diagnostic test is:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Skin biopsy&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;VDRL test&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Serum cortisol levels&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Arsenic levels in skin, hair and nails&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. VDRL test&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34251691698658500/34251691698658500.m3u8&quot;}, {&quot;text&quot;: &quot;The most common cause of recurrent genital ulceration in a sexually active male is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Apthous ulcer&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes genitalis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Herpes genitalis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32425141698658558/32425141698658558.m3u8&quot;}, {&quot;text&quot;: &quot;A promiscuous male has painful, multiple, non-indurated ulcers with undermined edges on glans penis. The likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chancre&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancre redux&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Chancroid&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/57730571698658598/57730571698658598.m3u8&quot;}, {&quot;text&quot;: &quot;Bullous &amp;amp; vesicular lesions in syphilis are seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Primary stage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Secondary stage&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tertiary&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Congenital syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49433721698658671/49433721698658671.m3u8&quot;}, {&quot;text&quot;: &quot;First blood test to become positive in syphilis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;VDRL&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;RPR&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;TPHA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Enzyme immunoassay&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Enzyme immunoassay&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25370721698658728/25370721698658728.m3u8&quot;}, {&quot;text&quot;: &quot;Genital ulcer may not be seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LGV&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Granuloma inguinale&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. LGV&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23996561698658742/23996561698658742.m3u8&quot;}, {&quot;text&quot;: &quot;Monitoring of response to treatment in syphilis is by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;TPHA&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;DGI examination&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;VDRL&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;TPI&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. VDRL&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37919531698658824/37919531698658824.m3u8&quot;}, {&quot;text&quot;: &quot;Manifestations of primary chancre in syphilis may include each of the following except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Sites usually affected are penis or vulva&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Extragenital lesions occur over lips, finger&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancre is a painless indurated ulcer, giving button like feeding&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Regional lymph nodes may become palpable as painful rubbery swelling&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Regional lymph nodes may become palpable as painful rubbery swelling&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7135271698658944/7135271698658944.m3u8&quot;}, {&quot;text&quot;: &quot;None-itchy disease is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Secondary syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Insect bites&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Tinea cruris&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Secondary syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35784671698658958/35784671698658958.m3u8&quot;}, {&quot;text&quot;: &quot;The syndromic management of urethral discharge includes treatment of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;N. gonorrheae and herpes genitalis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chlamydia trachomatis and herpes genitalis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;N. gonorrheae and Chlamydia trachomatis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Syphilis and chancroid&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. N. gonorrheae and Chlamydia trachomatis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47624481698658972/47624481698658972.m3u8&quot;}, {&quot;text&quot;: &quot;Five days after an unprotected homosexual intercourse, a 27 year old male presents with complaints of burning micturition. There is no frank pus but on milking urethra, some discharge was collected. Gram’s stain of the discharge shows multiple gram negative diplococci both within and outside the polymorphs. The diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Mycoplasma urethritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Chlamydia urethritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Traumatic urethritis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Gonococcal urethritis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Gonococcal urethritis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18063391698659062/18063391698659062.m3u8&quot;}, {&quot;text&quot;: &quot;A young male develops a painless penile ulcer 10 days after unprotected sexual exposure with a professional sex worker; likely diagnosis&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancre&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Traumatic ulcer&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Chancre&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61654531698659077/61654531698659077.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presents with mucoid discharge from urethra with dysuria since 1 day. He had an unprotected sexual exposure 14 days back. Syndromic approach would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Cefixime&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Azithromycin&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Azithromycin + Cefixime&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Co-trimoxazole&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Azithromycin + Cefixime&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29643811698659094/29643811698659094.m3u8&quot;}, {&quot;text&quot;: &quot;Treatment of choice for Anogenital warts in pregnancy:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Podophyllin application.&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Cryosurgery&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Application of Imiquimod&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Application of 5 FU (5–fluorouracil).&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Cryosurgery&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69415931698659300/69415931698659300.m3u8&quot;}, {&quot;text&quot;: &quot;A 24 yr old male presents to a STD clinic with a single painless ulcer on external genitalia. The choice of laboratory test to look for the etiological agent would be&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scrapings from ulcer for culture on chocolate agar with antibiotic supplement&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Serology for detection of specific IgM antibodies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Scrapings from the ulcer for dark field microscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Scrapings from ulcer for tissue culture&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Scrapings from the ulcer for dark field microscopy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42590961698659329/42590961698659329.m3u8&quot;}, {&quot;text&quot;: &quot;With giemsa stain, donovan bodies in tissue smears are seen in :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lymphogranuloma venereum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Donovanosis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Donovanosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50361381698659344/50361381698659344.m3u8&quot;}, {&quot;text&quot;: &quot;Strawberry cervix is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bacterial vaginosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gonorrhoea&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichomonas vaginitis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Trichomonas vaginitis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63906311698659357/63906311698659357.m3u8&quot;}, {&quot;text&quot;: &quot;Condyloma lata is present in syphilis in this stage:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Secondary&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Latent – Early&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Primary&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Latent – Late&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Secondary&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63770451698659374/63770451698659374.m3u8&quot;}, {&quot;text&quot;: &quot;Button like feel” of genital ulcer is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LGV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes genitalis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49586271698659387/49586271698659387.m3u8&quot;}, {&quot;text&quot;: &quot;A truck driver comes with complaints of painless, indurated genital ulcer after unprotected/unsafe intercourse. The motility of the causative agent can be detected by which type of microscope&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dark field microscope&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Electron microscope&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Flourescent microscope&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Dark field microscope&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(506).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68868221698651516/68868221698651516.m3u8&quot;}, {&quot;text&quot;: &quot;A migrant labourer presented with burning micturition and urethral discharge within one week of unprotected sexual intercourse. What is the causative agent?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;E.coli&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gonorrhoea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Ureaplasma&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichomonas&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Gonorrhoea&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(996).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(492).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73356471698651690/73356471698651690.m3u8&quot;}, {&quot;text&quot;: &quot;A married female infertile for 4 years want to conceive complaints of profuse non-foul smelling, non itchy white discharge for 2 days. Her last menstrual period was 13-14 days back. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Physiological&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bacterial vaginosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Trichomoniasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Physiological&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/11(401).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29656841698651720/29656841698651720.m3u8&quot;}, {&quot;text&quot;: &quot;A adult male with multiple sexual partners comes with history of painless genital ulcer. What is the next Investigation of choice?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Gram stain&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Dark field microscopy&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;HSV 2 Ab&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Giemsa stain&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Dark field microscopy&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(514).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56028481705058241/56028481705058241.m3u8&quot;}, {&quot;text&quot;: &quot;A female presented to the hospital with complaints of frothy discharge. Wet mount showed Trophozoite moving around. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bacterial vaginosis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichomoniasis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Physiological discharge&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Trichomoniasis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/8(510).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3015681705058285/3015681705058285.m3u8&quot;}, {&quot;text&quot;: &quot;A truck driver with history of genital ulcers and following skin lesion. What can be the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Secondary syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hand foot and mouth disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Keratoderma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Secondary syphilis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1017).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(497).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8423421705058333/8423421705058333.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 year old female came with chief complaints of vaginal discharge with lower abdominal pain and tenderness. Which color kit you will prescribe to her?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Grey color&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Red color&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Yellow color&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Black color&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Yellow color&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/21(237).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77341241705058476/77341241705058476.m3u8&quot;}, {&quot;text&quot;: &quot;Match the following&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1-b, 2-c, 3-a, 4-f&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1-f, 2-a, 3-b, 4-c&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1-c, 2-f, 3-a, 4-b&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1-a, 2-c, 3-b, 4-f&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1-b, 2-c, 3-a, 4-f&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20(266).jpg&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/20_1(85).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/72325191704712335/72325191704712335.m3u8&quot;}, {&quot;text&quot;: &quot;A female came with foul smelling grey white discharge and on examination, one of these will be seen on slides:-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Epithelial cells present with bacteria on margins&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bacteria engulfed by macrophages&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Neutrophils engulf bacteria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Budding yeasts&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Epithelial cells present with bacteria on margins&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24815371704712440/24815371704712440.m3u8&quot;}, {&quot;text&quot;: &quot;Itching with vaginal discharge is seen in ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Trichomoniasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gardenella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dordelein bacilli&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Candida&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Candida&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5482481704712577/5482481704712577.m3u8&quot;}, {&quot;text&quot;: &quot;Kassowitz law is related to?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Congenital syphilis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Tertiary syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Primary/Latent syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Secondary syphilis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Congenital syphilis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/45_1(23).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24872841704712634/24872841704712634.m3u8&quot;}, {&quot;text&quot;: &quot;Which STI has developed drug resistance?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Syphilis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Gonorrhea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chancroid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Donovanosis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Gonorrhea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7311531721393800/7311531721393800.m3u8&quot;}, {&quot;text&quot;: &quot;A pregnant female with foul smelling vaginal discharge. Whiff test was found positive, Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Bacterial vaginosis&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Candidiasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Trichomoniasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Physiological&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Bacterial vaginosis&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75387581731497206/75387581731497206.m3u8&quot;}, {&quot;text&quot;: &quot;Urethritis in male can be due to all except&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Neisseria&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Trichomonas&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Gardenella&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mycoplasma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Gardenella&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77175141731497227/77175141731497227.m3u8&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 44 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

<div id="test20" class="iframe-container" style="display:none;">
    <iframe srcdoc="&lt;!DOCTYPE html&gt;

&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta content=&quot;width=device-width, initial-scale=1.0&quot; nameag=&quot;viewport&quot;/&gt;
&lt;title&gt;Viral Infections&lt;/title&gt;
&lt;script src=&quot;https://cdn.tailwindcss.com&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css&quot;&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/hls.js@latest&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js&quot;&gt;&lt;/script&gt;
&lt;style&gt;
  /* Fix for table overflow in results */
  #results-content {
    overflow-x: auto;
    max-width: 100%;
  }
  
  #results-content table {
    min-width: 100%;
    white-space: nowrap;
  }
      /* Add this to your CSS */
      .overflow-x-auto table {
          min-width: 100%;
          border-collapse: collapse;
      }
      
      .overflow-x-auto th, 
      .overflow-x-auto td {
          padding: 8px 12px;
          border: 1px solid #ddd;
          white-space: nowrap;
      }
      
      .overflow-x-auto th {
          background-color: #f8f8f8;
          font-weight: bold;
      }
        /* Custom styles for enhanced aesthetics and responsiveness */
    .option-btn {
        transition: all 0.3s ease;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .option-btn:hover, .option-btn:active {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .option-btn.selected {
        background-color: #2c5282;
        color: white;
    }
    .marked {
        background-color: #f59e0b;
    }
    .progress-bar {
        transition: width 0.5s ease-in-out;
        background: #2c5281;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.8; }
        100% { opacity: 1; }
    }
    .question-nav-btn, .result-nav-btn-grid {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 8px;
        font-size: 16px;
        touch-action: manipulation;
        transition: all 0.2s ease;
    }
    .question-nav-btn:hover, .question-nav-btn:active, 
    .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
        transform: scale(1.05);
    }
    .answered {
        background-color: #2c5281;
        color: white;
    }
    .unanswered {
        background-color: #e5e7eb;
    }
    .marked-nav {
        border: 2px solid #f59e0b;
    }
    .video-container, .audio-container {
        display: none;
        position: relative;
    }
    .video-container.active, .audio-container.active {
        display: block;
        animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    .section-transition {
        transition: opacity 0.3s ease;
    }
    .section-transition.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .result-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
    }
    .result-nav-btn {
        background-color: #374151;
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 8px;
        transition: all 0.2s ease;
    }
    .result-nav-btn:hover, .result-nav-btn:active {
        background-color: #2d3748;
        transform: scale(1.05);
    }
    .result-nav-btn:disabled {
        background-color: #e5e7eb;
        cursor: not-allowed;
    }
    .error-message {
        color: #ef4444;
        font-weight: bold;
        margin-top: 1rem;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 60px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }

.bg-white.rounded-lg.shadow-md.p-4.md\:p-6 {
      margin-bottom: 50px;
      height: auto;
      display: block;
      margin: 10px auto;
      border-radius: 4px;
      object-fit: contain;
    }
    img {
        max-width: 100%;
        max-height: 400px;
        width: auto;
        height: auto;
        display: block;
        margin: 10px auto;
        border-radius: 4px;
        object-fit: contain;
    }
    
    /* For question images specifically */
    .question_images img,
    .explanation_images img {
        max-height: 350px;
        border: 1px solid #e5e7eb;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    /* Mobile-specific adjustments */
    @media (max-width: 640px) {
        .question-nav-btn, .result-nav-btn-grid {
            width: 38px;
            height: 38px;
            font-size: 14px;
        }
        .nav-panel, .results-nav-panel {
            width: 100%;
            max-width: 100%;
            overscroll-behavior: contain;
        }
        .option-btn {
            padding: 12px;
            font-size: 14px;
        }
        .header-text {
            font-size: 1.5rem;
        }
        .subheader-text {
            font-size: 0.875rem;
        }
        .button-group, .result-nav {
            flex-direction: column;
            gap: 0.5rem;
        }
        .result-nav-btn {
            width: 100%;
            text-align: center;
        }
    }
      img {
            max-height: 300px;
        }
        .question_images img,
        .explanation_images img {
            max-height: 250px;
        }
    }
    .video-placeholder {
        width: 400px;
        height: 300px;
        background-color: #e5e7eb;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 8px;
        border: 1px solid #d1d5db;
    }
    .play-icon {
        font-size: 40px;
        color: #2c5282;
    }
    .video-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 4px solid #e5e7eb;
        border-top: 4px solid #2c5282;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: translate(-50%, -50%) rotate(0deg); }
        100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    body, html {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
    #quiz, #results, #instructions {
      padding-bottom: 0 !important;
      margin-bottom: 0 !important;
    }
&lt;/style&gt;

&lt;/head&gt;
&lt;body class=&quot;bg-gray-100 font-sans transition-colors duration-300&quot;&gt;
&lt;!-- Header Section --&gt;
&lt;header class=&quot;bg-[#2c5281] text-white p-4 pt-14 shadow-lg&quot;&gt;
&lt;div class=&quot;container mx-auto&quot;&gt;
&lt;h1 class=&quot;text-2xl md:text-3xl font-bold header-text&quot;&gt;Viral Infections&lt;/h1&gt;
&lt;p class=&quot;mt-2 text-sm md:text-base subheader-text&quot;&gt;
                30 Questions | 44 Total Marks | 40 min Duration | ~80.0 sec/question
            &lt;/p&gt;
&lt;/div&gt;
&lt;/header&gt;
&lt;!-- Instructions Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 section-transition&quot; id=&quot;instructions&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Instructions&lt;/h2&gt;
&lt;h4 class=&quot;text-gray-800 text-lg font-semibold mt-6 mb-4&quot;&gt;Test Features:&lt;/h4&gt;
&lt;ul class=&quot;space-y-3&quot;&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Multiple choice questions with single correct answers
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Timer-based testing for realistic exam conditions
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mark questions for review functionality
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Comprehensive results and performance analysis
  &lt;/li&gt;
  &lt;li class=&quot;flex items-center gap-3&quot;&gt;
    &lt;i class=&quot;fa-solid fa-circle-check text-green-500&quot;&gt;&lt;/i&gt;
    Mobile-optimized interface for learning on-the-go
  &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;start-test&quot;&gt;Start Test&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;error-message hidden&quot; id=&quot;error-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;


&lt;!-- Quiz Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;quiz&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;!-- Progress Bar --&gt;
&lt;div class=&quot;w-full bg-gray-200 rounded-full h-3 mb-4&quot;&gt;
&lt;div class=&quot;progress-bar h-3 rounded-full&quot; id=&quot;progress-bar&quot; style=&quot;width: 0%&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Question Header --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center mb-4&quot;&gt;
&lt;h2 class=&quot;text-lg font-semibold&quot; id=&quot;question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h2&gt;
&lt;p class=&quot;text-lg font-semibold mt-2 md:mt-0&quot; id=&quot;timer&quot;&gt;Time Remaining: &lt;span&gt;00:00&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;!-- Question Content --&gt;
&lt;div class=&quot;mb-6&quot; id=&quot;question-content&quot;&gt;
&lt;p class=&quot;text-gray-800 mb-4&quot; id=&quot;question-text&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;flex flex-wrap gap-4 mb-4&quot; id=&quot;question-images&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;space-y-3&quot; id=&quot;options&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;!-- Navigation Buttons --&gt;
&lt;div class=&quot;flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4&quot;&gt;
&lt;div class=&quot;flex gap-2 w-full md:w-auto&quot;&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;previous-btn&quot;&gt;Previous&lt;/button&gt;
  &lt;button class=&quot;bg-[#2c5281] text-white px-4 py-3 w-full md:w-32 h-14 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-btn&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;flex items-center gap-2&quot;&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;mark-review&quot;&gt;
    Review
    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; class=&quot;h-5 w-5&quot; viewBox=&quot;0 0 20 20&quot; fill=&quot;currentColor&quot;&gt;
      &lt;path d=&quot;M10 2a1 1 0 00-1 1v14l3.293-3.293a1 1 0 011.414 0L17 17V3a1 1 0 00-1-1H10z&quot; /&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;button class=&quot;bg-transparent text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-100 transition flex items-center gap-1&quot; id=&quot;nav-toggle&quot;&gt;
    Question 🧭
  &lt;/button&gt;
  &lt;button class=&quot;bg-green-500 text-white px-6 py-3 w-44 h-14 rounded-lg hover:bg-green-600 transition w-full md:w-auto&quot; id=&quot;submit-test&quot;&gt;Submit Test&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Results Section --&gt;
&lt;section class=&quot;container mx-auto px-4 md:px-6 pt-4 md:pt-6 pb-1 hidden section-transition&quot; id=&quot;results&quot;&gt;
&lt;div class=&quot;bg-white rounded-lg shadow-md p-4 md:p-6&quot;&gt;
&lt;h2 class=&quot;text-2xl font-semibold mb-4&quot;&gt;Anaesthesia Machine - Results&lt;/h2&gt;
&lt;div class=&quot;grid grid-cols-1 md:grid-cols-2 gap-4 mb-6&quot;&gt;
&lt;p&gt;&lt;strong&gt;Correct:&lt;/strong&gt; &lt;span id=&quot;correct-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wrong:&lt;/strong&gt; &lt;span id=&quot;wrong-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unanswered:&lt;/strong&gt; &lt;span id=&quot;unanswered-count&quot; class=&quot;text-[#000000]-500&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Marked for Review:&lt;/strong&gt; &lt;span id=&quot;marked-count&quot; class=&quot;text-[#000000]&quot;&gt;0&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;text-lg font-semibold mb-4&quot; id=&quot;result-question-number&quot;&gt;Question &lt;span&gt;1&lt;/span&gt; of 4&lt;/h3&gt;
&lt;div class=&quot;space-y-6&quot; id=&quot;results-content&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;result-nav&quot;&gt;
&lt;button aria-label=&quot;Previous question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; disabled=&quot;&quot; id=&quot;prev-result&quot;&gt;Previous&lt;/button&gt;
&lt;button aria-label=&quot;Toggle results navigation panel&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;results-nav-toggle&quot;&gt;Result 🧭&lt;/button&gt;
&lt;button aria-label=&quot;Next question result&quot; class=&quot;result-nav-btn bg-[#2c5281] text-white px-6 py-2 rounded-lg hover:bg-[#2c5281] transition&quot; id=&quot;next-result&quot;&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;mt-6 flex space-x-4 button-group md:flex-row flex-col&quot;&gt;
&lt;button class=&quot;bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition&quot; id=&quot;take-again&quot;&gt;Take Again&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;

&lt;!-- Exit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;exit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Leave Test?&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;Your progress will be lost if you leave this page. Are you sure you want to exit?&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;continue-test&quot;&gt;No, Continue&lt;/button&gt;
      &lt;button class=&quot;bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition&quot; id=&quot;exit-test&quot;&gt;Yes, Exit&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Submit Confirmation Modal --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 hidden&quot; id=&quot;submit-modal&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white rounded-lg p-6 max-w-sm w-full&quot;&gt;
    &lt;h2 class=&quot;text-xl font-semibold mb-4&quot;&gt;Confirm Submission&lt;/h2&gt;
    &lt;p class=&quot;text-gray-700 mb-2&quot;&gt;You have attempted &lt;span id=&quot;attempted-count&quot;&gt;0&lt;/span&gt; of 4 questions.&lt;/p&gt;
    &lt;p class=&quot;text-gray-700 mb-4&quot;&gt;&lt;span id=&quot;unattempted-count&quot;&gt;0&lt;/span&gt; questions are unattempted.&lt;/p&gt;
    &lt;div class=&quot;flex justify-end space-x-4&quot;&gt;
      &lt;button class=&quot;bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition&quot; id=&quot;cancel-submit&quot;&gt;Cancel&lt;/button&gt;
      &lt;button class=&quot;text-white px-4 py-2 rounded-lg hover:bg-[#1a365d] transition&quot; style=&quot;background-color: #2c5281;&quot; id=&quot;confirm-submit&quot;&gt;Submit Test&lt;/button&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Quiz Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 nav-panel hidden overflow-y-auto&quot; id=&quot;nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Questions Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- Results Navigation Panel --&gt;
&lt;div class=&quot;fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-50 results-nav-panel hidden overflow-y-auto&quot; id=&quot;results-nav-panel&quot; style=&quot;align-items: flex-start; padding-top: 33vh;&quot;&gt;
  &lt;div class=&quot;bg-white shadow-lg p-4 rounded-lg w-full max-w-2xl max-h-[80vh] overflow-y-auto&quot;&gt;
    &lt;h2 class=&quot;text-lg font-semibold mb-4&quot;&gt;Results Navigation&lt;/h2&gt;
    &lt;div class=&quot;mb-4&quot;&gt;
      &lt;select class=&quot;w-full p-2 border rounded-lg text-gray-700&quot; id=&quot;results-nav-filter&quot;&gt;
        &lt;option value=&quot;all&quot;&gt;All Questions&lt;/option&gt;
        &lt;option value=&quot;answered&quot;&gt;Answered&lt;/option&gt;
        &lt;option value=&quot;unanswered&quot;&gt;Unanswered&lt;/option&gt;
        &lt;option value=&quot;marked&quot;&gt;Marked for Review&lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;grid grid-cols-5 gap-2 md:gap-3&quot; id=&quot;results-nav-grid&quot;&gt;&lt;/div&gt;
    &lt;button class=&quot;mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full&quot; id=&quot;close-results-nav&quot;&gt;Close&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;!-- JavaScript Logic --&gt;

&lt;script&gt;
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog(&quot;Attempting to parse questions_json&quot;);
            questions = [{&quot;text&quot;: &quot;Pseudo-Koebner’s phenomenon is seen in&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Verruca&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Verruca&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56801481698748841/56801481698748841.m3u8&quot;}, {&quot;text&quot;: &quot;Which of the following is a Papilloma virus infection?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Anatomist wart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Condyloma acuminata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Condyloma lata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic wart&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Condyloma acuminata&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/1692241698748854/1692241698748854.m3u8&quot;}, {&quot;text&quot;: &quot;Ballooning of keratinocytes is seen with&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Human papilloma virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes simplex virus&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Eczema&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Herpes simplex virus&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52495911698748874/52495911698748874.m3u8&quot;}, {&quot;text&quot;: &quot;Involvement of tip of nose in case of Herpes Zoster is called as :&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Ramsay Hunt Syndrome&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Kaposis Varicelliform Eruption&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Hutchinson’s Sign&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Darier’s Sign&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Hutchinson’s Sign&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52325571698748887/52325571698748887.m3u8&quot;}, {&quot;text&quot;: &quot;Slapped cheek appearance is characteristic of:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Roseala infantum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Erythema Infectiosum&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Erythema Marginatum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Erythema Multiforme&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Erythema Infectiosum&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22763941698748903/22763941698748903.m3u8&quot;}, {&quot;text&quot;: &quot;Which viral association is found in Pityriasis rosea-&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;HHV 7&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;CMV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Varicella Zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;EBV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. HHV 7&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67534291698748919/67534291698748919.m3u8&quot;}, {&quot;text&quot;: &quot;Myrmecia warts are&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Plane wart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Plantar wart&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Verrucous wart&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Palmar wart&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Plantar wart&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17458281698748935/17458281698748935.m3u8&quot;}, {&quot;text&quot;: &quot;Ballooning is characteristic of&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Pemphigoid&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Insect bite&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpes zoster&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/41580341698748949/41580341698748949.m3u8&quot;}, {&quot;text&quot;: &quot;Herpes resistant to acyclovir is treated by&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Foscarnet&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lamivudine&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Valacyclovir&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Ganciclovir&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Foscarnet&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36138251698748962/36138251698748962.m3u8&quot;}, {&quot;text&quot;: &quot;HPV vaccine is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Monovalent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bivalent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Quadrivalent&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Bivalent and quadrivalent&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Bivalent and quadrivalent&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29358101698748974/29358101698748974.m3u8&quot;}, {&quot;text&quot;: &quot;A 24 year old woman presents with erythematous annular lesions with collarette scales predominantly arranged over trunk. Diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Pityriasis rosea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pityriasis rubra pilaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Tinea versicolor&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Pityriasis rosea&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8208061698748986/8208061698748986.m3u8&quot;}, {&quot;text&quot;: &quot;A 23 year female, primi gravida, whose nephew is staying in the same house, contracted varicella. Patient had no history of past exposure. She visited medical care centre where the varicella antibody test done and found negative?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;She is susceptible to zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;She is susceptible to chicken pox&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;She is immune to zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;She is immune to chickenpox&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. She is susceptible to chicken pox&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/17(302).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56278271698652141/56278271698652141.m3u8&quot;}, {&quot;text&quot;: &quot;A 25 year old male presents with grouped vesicles over lips as shown in image. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Impetigo contagiosa&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pemphigus vulgaris&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Varicella zoster&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes labialis&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Herpes labialis&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1005).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/23(214).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63758061698655144/63758061698655144.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented to the OPD with complaints of papular lesions over the extremities. On examination the lesions were soft and non-tender. Image of the lesion is provided below. What is the probable diagnosis of this case?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Condylomata lata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Condylomata acuminata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Common warts&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Common warts&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1007).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/25(209).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17443591698655282/17443591698655282.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with multiple painful blisters on an erythematous base along dermatome on trunk as shown in the image. Diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Herpes Zoster&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chicken pox&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Herpes Zoster&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1010).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(771).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/9216481698655435/9216481698655435.m3u8&quot;}, {&quot;text&quot;: &quot;Tzanck smear is used to diagnose all except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;HSV-1&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HSV-2&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;HHV-3&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;HIV&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. HIV&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1012).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/5(679).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27776051698655574/27776051698655574.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with multiple painful blisters along a dermatome on the trunk as shown in the image. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes zoster/Shingles&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;HSV&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Molluscum contagiosum&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Chicken pox&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpes zoster/Shingles&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1019).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/12(411).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42845781705058346/42845781705058346.m3u8&quot;}, {&quot;text&quot;: &quot;Koebner’s phenomenon is seen in all except?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Vitiligo&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Herpes simplex&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. Herpes simplex&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/14(359).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17316491705058372/17316491705058372.m3u8&quot;}, {&quot;text&quot;: &quot;Identify the condition shown in the image ?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Condyloma acuminata&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Bowen disease&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Condyloma lata&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Hemorrhoids&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Condyloma acuminata&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1029).JPG&quot;], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/56(83).jpg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54027781705058591/54027781705058591.m3u8&quot;}, {&quot;text&quot;: &quot;A child presents with dome shaped, pearly lesions on forehead. Mother also having similar lesions. The likely diagnosis is&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Scabies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pox&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Herpes&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;HPV&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;B. Pox&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(773).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (B)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13149401704712094/13149401704712094.m3u8&quot;}, {&quot;text&quot;: &quot;A child presents with the following palmar skin lesions. He also has lip lesions. Which of the following organism is the causative agent:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;HSV type 1&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Variant of picornavirus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Varicella Zoster virus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Mycoplasma&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. HSV type 1&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/9(476).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15442791704712200/15442791704712200.m3u8&quot;}, {&quot;text&quot;: &quot;A patient comes with painful vesicles on genitals. The histopathology finding will be:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Tzanck cells&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Pund cells&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Henderson Peterson bodies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Koilocytes&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Tzanck cells&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/WhatsApp%20Image%202023-07-27%20at%201_20_44%20AM.jpeg&quot;], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/11311351704712347/11311351704712347.m3u8&quot;}, {&quot;text&quot;: &quot;All the following infections present with maculopapular rash except:&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Dengue (during febrile phase)&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Rubella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Shingles&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Measles&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;C. Shingles&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (C)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3019981704712387/3019981704712387.m3u8&quot;}, {&quot;text&quot;: &quot;A patient came with vesicular lesions over single dermatome over the chest, he also complaints of pain. diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Herpes zoster&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Varicella&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;PKDL&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Herpes zoster&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Picture3(21).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;An old man presented with polymorphic lesions in Dermatomal distribution. He complaints of spider crawling sensation at night on the affected area&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;ACD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;ICD&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Chicken pox&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;HZ&quot;, &quot;correct&quot;: true}], &quot;correct_answer&quot;: &quot;D. HZ&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/46(95).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (D)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44893471704712648/44893471704712648.m3u8&quot;}, {&quot;text&quot;: &quot;A patient presented with multiple dome shapped lesions. The classical histopathology finding&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Handerson Peterson bodies&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;LD bodies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Safety pin bodies&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Copper penny bodies&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Handerson Peterson bodies&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/54(90).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78913151704712746/78913151704712746.m3u8&quot;}, {&quot;text&quot;: &quot;Vesicular rash as shown in image. Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Hand foot and mouth disease&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Roseola&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Dengue&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Zika&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Hand foot and mouth disease&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/58(105).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47822071704712802/47822071704712802.m3u8&quot;}, {&quot;text&quot;: &quot;A Young HIV patient with lesions over genitals with h/o contact with CSW. What is the microscopic finding shown in the given below image?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Intracytoplasmic inclusion body&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Intranuclear inclusion body&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Bacteria with bipolar staining&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Multinucleate giant cells&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Intracytoplasmic inclusion body&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/60(88).jpg&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A patient with following itchy scaly skin lesion. what is the diagnosis?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Christmas tree appearance of Pityriasis rosea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Lichen planus with whickam’s straie&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Psoriasis with woronoff’s ring&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Seborrheic dermatitis&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Christmas tree appearance of Pityriasis rosea&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(29).png&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}, {&quot;text&quot;: &quot;A young male presented with itchy rash on the trunk as shown in the image, Diagnosis is?&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;Christmas tree appearance- Pityriasis Rosea&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;Wickham&#x27;s striae- Lichen planus&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;Woronoff&#x27;s ring- Psoriasis&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;Dermatomal distribution- Shingles&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. Christmas tree appearance- Pityriasis Rosea&quot;, &quot;question_images&quot;: [&quot;https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(1424).JPG&quot;], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;p&gt;&lt;strong&gt;Correct Answer (A)&lt;/strong&gt;&lt;/p&gt;\n&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;, &quot;bot&quot;: &quot;@futuredoctor&quot;, &quot;video&quot;: &quot;&quot;}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error(&quot;Questions data is empty or invalid&quot;);
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error(&quot;Failed to parse questions_json:&quot;, e);
            document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error loading quiz data. Please check the console for details or contact support.&quot;;
            document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            document.getElementById(&#x27;start-test&#x27;).disabled = true;
            // Fallback to sample questions for testing
            questions = [
                {
                    text: &quot;What is 2 + 2?&quot;,
                    options: [
                        { label: &quot;A&quot;, text: &quot;3&quot;, correct: false },
                        { label: &quot;B&quot;, text: &quot;4&quot;, correct: true },
                        { label: &quot;C&quot;, text: &quot;5&quot;, correct: false },
                        { label: &quot;D&quot;, text: &quot;6&quot;, correct: false }
                    ],
                    correct_answer: &quot;B. 4&quot;,
                    question_images: [],
                    explanation_images: [],
                    explanation: &quot;&lt;p&gt;2 + 2 = 4&lt;/p&gt;&lt;p&gt;@futuredoctor&lt;/p&gt;&quot;,
                    bot: &quot;@futuredoctor&quot;,
                    audio: &quot;&quot;,
                    video: &quot;&quot;
                }
            ];
            debugLog(&quot;Loaded fallback questions&quot;);
        }

        // Quiz state
        let currentQuestion = 0;
        let answers = new Array(questions.length).fill(null);
        let markedForReview = new Array(questions.length).fill(false);
        let timeRemaining = 40 * 60; // Duration in seconds
        let timerInterval = null;
        const quizId = `{title.replace(/\s+/g, &#x27;_&#x27;).toLowerCase()}`; // Unique ID for local storage

        // Load saved progress
        function loadProgress() {
            try {
                debugLog(&quot;Loading progress from localStorage&quot;);
                const saved = localStorage.getItem(`quiz_${quizId}`);
                if (saved) {
                    const { savedAnswers, savedMarked, savedTime } = JSON.parse(saved);
                    answers = savedAnswers || answers;
                    markedForReview = savedMarked || markedForReview;
                    timeRemaining = savedTime !== undefined ? savedTime : timeRemaining;
                    debugLog(&quot;Progress loaded successfully&quot;);
                } else {
                    debugLog(&quot;No saved progress found&quot;);
                }
            } catch (e) {
                console.error(&quot;Error loading progress:&quot;, e);
                debugLog(&quot;Failed to load progress: &quot; + e.message);
            }
        }

        // Save progress
        function saveProgress() {
            try {
                debugLog(&quot;Saving progress to localStorage&quot;);
                localStorage.setItem(`quiz_${quizId}`, JSON.stringify({
                    savedAnswers: answers,
                    savedMarked: markedForReview,
                    savedTime: timeRemaining
                }));
                debugLog(&quot;Progress saved successfully&quot;);
            } catch (e) {
                console.error(&quot;Error saving progress:&quot;, e);
                debugLog(&quot;Failed to save progress: &quot; + e.message);
            }
        }

        // Initialize quiz
        function initQuiz() {
            try {
                debugLog(&quot;Initializing quiz&quot;);
                loadProgress();
                const startButton = document.getElementById(&#x27;start-test&#x27;);
                if (!startButton) {
                    throw new Error(&quot;Start test button not found&quot;);
                }
                startButton.addEventListener(&#x27;click&#x27;, startQuiz);
                debugLog(&quot;Start test button listener attached&quot;);
                document.getElementById(&#x27;previous-btn&#x27;).addEventListener(&#x27;click&#x27;, showPreviousQuestion);
                document.getElementById(&#x27;next-btn&#x27;).addEventListener(&#x27;click&#x27;, showNextQuestion);
                document.getElementById(&#x27;mark-review&#x27;).addEventListener(&#x27;click&#x27;, toggleMarkForReview);
                document.getElementById(&#x27;nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;submit-test&#x27;).addEventListener(&#x27;click&#x27;, showSubmitModal);
                document.getElementById(&#x27;continue-test&#x27;).addEventListener(&#x27;click&#x27;, closeExitModal);
                document.getElementById(&#x27;exit-test&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Exiting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;cancel-submit&#x27;).addEventListener(&#x27;click&#x27;, closeSubmitModal);
                document.getElementById(&#x27;confirm-submit&#x27;).addEventListener(&#x27;click&#x27;, submitTest);
                document.getElementById(&#x27;take-again&#x27;).addEventListener(&#x27;click&#x27;, () =&gt; {
                    debugLog(&quot;Restarting test&quot;);
                    localStorage.removeItem(`quiz_${quizId}`);
                    window.location.reload();
                });
                document.getElementById(&#x27;close-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleNavPanel);
                document.getElementById(&#x27;nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateNavPanel);
                document.getElementById(&#x27;prev-result&#x27;).addEventListener(&#x27;click&#x27;, showPreviousResult);
                document.getElementById(&#x27;next-result&#x27;).addEventListener(&#x27;click&#x27;, showNextResult);
                document.getElementById(&#x27;results-nav-toggle&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;close-results-nav&#x27;).addEventListener(&#x27;click&#x27;, toggleResultsNavPanel);
                document.getElementById(&#x27;results-nav-filter&#x27;).addEventListener(&#x27;change&#x27;, updateResultsNavPanel);
                debugLog(&quot;Quiz initialized successfully&quot;);
            } catch (e) {
                console.error(&quot;Failed to initialize quiz:&quot;, e);
                debugLog(&quot;Failed to initialize quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;start-test&#x27;).disabled = true;
            }
        }

        // Start quiz
        function startQuiz() {
            try {
                debugLog(&quot;Starting quiz&quot;);
                document.getElementById(&#x27;instructions&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.remove(&#x27;hidden&#x27;);
                showQuestion(currentQuestion);
                startTimer();
                updateNavPanel();
                debugLog(&quot;Quiz started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting quiz:&quot;, e);
                debugLog(&quot;Failed to start quiz: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error starting quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;instructions&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        }

        // Show question
        function showQuestion(index) {
            try {
                debugLog(`Showing question ${index + 1}`);
                currentQuestion = index;
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                document.getElementById(&#x27;question-number&#x27;).innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById(&#x27;question-text&#x27;).innerHTML = q.text || &quot;No question text available&quot;;
                const imagesDiv = document.getElementById(&#x27;question-images&#x27;);
                imagesDiv.innerHTML = q.question_images &amp;&amp; q.question_images.length &gt; 0
                    ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg&quot;&gt;`).join(&#x27;&#x27;)
                    : &#x27;&#x27;;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                optionsDiv.innerHTML = q.options &amp;&amp; q.options.length &gt; 0
                    ? q.options.map(opt =&gt; `
                        &lt;button class=&quot;option-btn w-full text-left p-3 border rounded-lg ${answers[index] === opt.label ? &#x27;selected&#x27; : &#x27;&#x27;}&quot; 
                                onclick=&quot;selectOption(${index}, &#x27;${opt.label}&#x27;)&quot; 
                                aria-label=&quot;Option ${opt.label}: ${opt.text}&quot;&gt;
                            ${opt.label}. ${opt.text}
                        &lt;/button&gt;
                    `).join(&#x27;&#x27;)
                    : &#x27;&lt;p class=&quot;text-red-500&quot;&gt;No options available&lt;/p&gt;&#x27;;
                document.getElementById(&#x27;previous-btn&#x27;).disabled = index === 0;
                document.getElementById(&#x27;next-btn&#x27;).disabled = index === questions.length - 1;
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[index]);
                updateProgressBar();
                saveProgress();
                window.scrollTo({ top: 0, behavior: &#x27;smooth&#x27; });
                debugLog(`Question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying question:&quot;, e);
                debugLog(&quot;Failed to display question: &quot; + e.message);
            }
        }


        // Select option
        function selectOption(index, label) {
            try {
                debugLog(`Selecting option ${label} for question ${index + 1}`);
                answers[index] = label;
                const optionsDiv = document.getElementById(&#x27;options&#x27;);
                const optionButtons = optionsDiv.querySelectorAll(&#x27;.option-btn&#x27;);
                optionButtons.forEach(btn =&gt; {
                    const btnLabel = btn.textContent.trim().split(&#x27;.&#x27;)[0];
                    btn.classList.toggle(&#x27;selected&#x27;, btnLabel === label);
                });
                updateNavPanel();
                saveProgress();
                debugLog(`Option ${label} selected for question ${index + 1}`);
            } catch (e) {
                console.error(&quot;Error selecting option:&quot;, e);
                debugLog(&quot;Failed to select option: &quot; + e.message);
            }
        }

        // Toggle mark for review
        function toggleMarkForReview() {
            try {
                debugLog(`Toggling mark for review on question ${currentQuestion + 1}`);
                markedForReview[currentQuestion] = !markedForReview[currentQuestion];
                document.getElementById(&#x27;mark-review&#x27;).classList.toggle(&#x27;marked&#x27;, markedForReview[currentQuestion]);
                updateNavPanel();
                saveProgress();
                debugLog(`Mark for review toggled for question ${currentQuestion + 1}`);
            } catch (e) {
                console.error(&quot;Error marking for review:&quot;, e);
                debugLog(&quot;Failed to mark for review: &quot; + e.message);
            }
        }

        // Navigate to previous question
        function showPreviousQuestion() {
            try {
                debugLog(`Navigating to previous question from ${currentQuestion + 1}`);
                if (currentQuestion &gt; 0) {
                    currentQuestion--;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous question:&quot;, e);
                debugLog(&quot;Failed to navigate to previous question: &quot; + e.message);
            }
        }

        // Navigate to next question
        function showNextQuestion() {
            try {
                debugLog(`Navigating to next question from ${currentQuestion + 1}`);
                if (currentQuestion &lt; questions.length - 1) {
                    currentQuestion++;
                    showQuestion(currentQuestion);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next question:&quot;, e);
                debugLog(&quot;Failed to navigate to next question: &quot; + e.message);
            }
        }

        // Handle question navigation click
        function handleQuestionNavClick(index) {
            try {
                debugLog(`Navigating to question ${index + 1} via nav panel`);
                showQuestion(index);
                toggleNavPanel();
            } catch (e) {
                console.error(&quot;Error handling navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate via nav panel: &quot; + e.message);
            }
        }

        // Start timer
        function startTimer() {
            try {
                debugLog(&quot;Starting timer&quot;);
                timerInterval = setInterval(() =&gt; {
                    if (timeRemaining &lt;= 0) {
                        debugLog(&quot;Timer expired, submitting test&quot;);
                        clearInterval(timerInterval);
                        submitTest();
                    } else {
                        timeRemaining--;
                        const minutes = Math.floor(timeRemaining / 60);
                        const seconds = timeRemaining % 60;
                        document.getElementById(&#x27;timer&#x27;).innerHTML = `Time Remaining: &lt;span&gt;${minutes.toString().padStart(2, &#x27;0&#x27;)}:${seconds.toString().padStart(2, &#x27;0&#x27;)}&lt;/span&gt;`;
                        saveProgress();
                    }
                }, 1000);
                debugLog(&quot;Timer started successfully&quot;);
            } catch (e) {
                console.error(&quot;Error starting timer:&quot;, e);
                debugLog(&quot;Failed to start timer: &quot; + e.message);
            }
        }

        // Update progress bar
        function updateProgressBar() {
            try {
                debugLog(&quot;Updating progress bar&quot;);
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById(&#x27;progress-bar&#x27;).style.width = `${progress}%`;
                debugLog(&quot;Progress bar updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating progress bar:&quot;, e);
                debugLog(&quot;Failed to update progress bar: &quot; + e.message);
            }
        }

        // Update quiz navigation panel
        function updateNavPanel() {
            try {
                debugLog(&quot;Updating quiz navigation panel&quot;);
                const filter = document.getElementById(&#x27;nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;question-nav-btn ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleQuestionNavClick(${i})&quot;
                                aria-label=&quot;Go to Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Quiz navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to update quiz navigation panel: &quot; + e.message);
            }
        }

        // Update results navigation panel
        function updateResultsNavPanel() {
            try {
                debugLog(&quot;Updating results navigation panel&quot;);
                const filter = document.getElementById(&#x27;results-nav-filter&#x27;).value;
                const navGrid = document.getElementById(&#x27;results-nav-grid&#x27;);
                navGrid.innerHTML = questions.map((_, i) =&gt; {
                    if (filter === &#x27;answered&#x27; &amp;&amp; !answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;unanswered&#x27; &amp;&amp; answers[i]) return &#x27;&#x27;;
                    if (filter === &#x27;marked&#x27; &amp;&amp; !markedForReview[i]) return &#x27;&#x27;;
                    return `
                        &lt;button class=&quot;result-nav-btn-grid ${answers[i] ? &#x27;answered&#x27; : &#x27;unanswered&#x27;} ${markedForReview[i] ? &#x27;marked-nav&#x27; : &#x27;&#x27;}&quot;
                                onclick=&quot;handleResultNavClick(${i})&quot;
                                aria-label=&quot;Go to Result for Question ${i + 1}&quot;&gt;
                            ${i + 1}
                        &lt;/button&gt;
                    `;
                }).join(&#x27;&#x27;);
                debugLog(&quot;Results navigation panel updated&quot;);
            } catch (e) {
                console.error(&quot;Error updating results navigation panel:&quot;, e);
                debugLog(&quot;Failed to update results navigation panel: &quot; + e.message);
            }
        }

        // Toggle quiz navigation panel
        function toggleNavPanel() {
            try {
                debugLog(&quot;Toggling quiz navigation panel&quot;);
                const navPanel = document.getElementById(&#x27;nav-panel&#x27;);
                navPanel.classList.toggle(&#x27;hidden&#x27;);
                debugLog(&quot;Quiz navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling quiz navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle quiz navigation panel: &quot; + e.message);
            }
        }

        // Toggle results navigation panel
        function toggleResultsNavPanel() {
            try {
                debugLog(&quot;Toggling results navigation panel&quot;);
                const resultsNavPanel = document.getElementById(&#x27;results-nav-panel&#x27;);
                resultsNavPanel.classList.toggle(&#x27;hidden&#x27;);
                if (!resultsNavPanel.classList.contains(&#x27;hidden&#x27;)) {
                    updateResultsNavPanel();
                }
                debugLog(&quot;Results navigation panel toggled&quot;);
            } catch (e) {
                console.error(&quot;Error toggling results navigation panel:&quot;, e);
                debugLog(&quot;Failed to toggle results navigation panel: &quot; + e.message);
            }
        }

        // Handle result navigation click
        function handleResultNavClick(index) {
            try {
                debugLog(`Navigating to result for question ${index + 1} via nav panel`);
                showResults(index);
                toggleResultsNavPanel();
            } catch (e) {
                console.error(&quot;Error handling result navigation click:&quot;, e);
                debugLog(&quot;Failed to navigate to result: &quot; + e.message);
            }
        }

        // Show submit modal
        function showSubmitModal() {
            try {
                debugLog(&quot;Showing submit modal&quot;);
                const attempted = answers.filter(a =&gt; a !== null).length;
                document.getElementById(&#x27;attempted-count&#x27;).textContent = attempted;
                document.getElementById(&#x27;unattempted-count&#x27;).textContent = questions.length - attempted;
                document.getElementById(&#x27;submit-modal&#x27;).classList.remove(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal displayed&quot;);
            } catch (e) {
                console.error(&quot;Error showing submit modal:&quot;, e);
                debugLog(&quot;Failed to show submit modal: &quot; + e.message);
            }
        }

        // Close submit modal
        function closeSubmitModal() {
            try {
                debugLog(&quot;Closing submit modal&quot;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Submit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing submit modal:&quot;, e);
                debugLog(&quot;Failed to close submit modal: &quot; + e.message);
            }
        }

        // Close exit modal
        function closeExitModal() {
            try {
                debugLog(&quot;Closing exit modal&quot;);
                document.getElementById(&#x27;exit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                debugLog(&quot;Exit modal closed&quot;);
            } catch (e) {
                console.error(&quot;Error closing exit modal:&quot;, e);
                debugLog(&quot;Failed to close exit modal: &quot; + e.message);
            }
        }

        // Submit test
        function submitTest() {
            try {
                debugLog(&quot;Submitting test&quot;);
                clearInterval(timerInterval);
                document.getElementById(&#x27;quiz&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;submit-modal&#x27;).classList.add(&#x27;hidden&#x27;);
                document.getElementById(&#x27;results&#x27;).classList.remove(&#x27;hidden&#x27;);
                showResults(0); // Start with first question
                // Trigger confetti animation
                confetti({
                    particleCount: 100,
                    spread: 70,
                    origin: { y: 0.6 }
                });
                localStorage.removeItem(`quiz_${quizId}`);
                debugLog(&quot;Test submitted successfully&quot;);
            } catch (e) {
                console.error(&quot;Error submitting test:&quot;, e);
                debugLog(&quot;Failed to submit test: &quot; + e.message);
            }
        }

        function showResults(index) {
            try {
                debugLog(`Showing result for question ${index + 1}`);
                currentResultQuestion = index;
                let correct = 0, wrong = 0, unanswered = 0, marked = 0;
                answers.forEach((answer, i) =&gt; {
                    const isCorrect = answer &amp;&amp; questions[i].options.find(opt =&gt; opt.label === answer)?.correct;
                    if (answer === null) unanswered++;
                    else if (isCorrect) correct++;
                    else wrong++;
                    if (markedForReview[i]) marked++;
                });
                const q = questions[index];
                if (!q) {
                    throw new Error(`Question ${index} is undefined`);
                }
                const userAnswer = answers[index];
                const isCorrect = userAnswer &amp;&amp; q.options.find(opt =&gt; opt.label === userAnswer)?.correct;
                const resultsContent = document.getElementById('results-content');
                
                // Create scrollable container for explanation content
                resultsContent.innerHTML = `
                    &lt;div class=&quot;border-4 ${isCorrect ? 'border-green-600 bg-green-100' : userAnswer ? 'border-red-600 bg-red-100' : 'border-gray-400 bg-gray-50'} p-4 rounded-lg overflow-hidden&quot;&gt;
                        &lt;p class=&quot;font-semibold&quot;&gt;Question ${index + 1}: ${q.text || 'No question text'}&lt;/p&gt;
                        ${q.question_images &amp;&amp; q.question_images.length &gt; 0 ? q.question_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Question Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        &lt;p&gt;&lt;strong&gt;Your Answer:&lt;/strong&gt; ${userAnswer ? `${userAnswer}. ${q.options.find(opt =&gt; opt.label === userAnswer)?.text || 'Invalid option'}` : 'Unanswered'}&lt;/p&gt;
                        &lt;p&gt;&lt;strong&gt;Correct Answer:&lt;/strong&gt; ${q.correct_answer || 'Unknown'}&lt;/p&gt;
                        
                        &lt;!-- Scrollable container for explanation --&gt;
                        &lt;div class=&quot;mt-2 overflow-x-auto&quot;&gt;
                            ${q.explanation || 'No explanation available'}
                        &lt;/div&gt;
                        
                        ${q.explanation_images &amp;&amp; q.explanation_images.length &gt; 0 ? q.explanation_images.map(url =&gt; `&lt;img src=&quot;${url}&quot; alt=&quot;Explanation Image&quot; class=&quot;max-w-full h-auto rounded-lg my-2&quot;&gt;`).join('') : ''}
                        ${q.video ? `
                            &lt;button class=&quot;play-video bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadVideo(this, '${q.video}', 'video-${index}')&quot;
                                    aria-label=&quot;Play explanation video for Question ${index + 1}&quot;&gt;
                                Play Video Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;video-${index}&quot; class=&quot;video-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : '&lt;p class=&quot;text-gray-500 mt-2&quot;&gt;No video available&lt;/p&gt;'}
                        ${q.audio ? `
                            &lt;button class=&quot;play-audio bg-[#2c5281] text-white px-4 py-2 rounded-lg mt-2&quot; 
                                    onclick=&quot;loadAudio(this, '${q.audio}', 'audio-${index}')&quot;
                                    aria-label=&quot;Play audio explanation for Question ${index + 1}&quot;&gt;
                                Play Audio Explanation
                            &lt;/button&gt;
                            &lt;div id=&quot;audio-${index}&quot; class=&quot;audio-container mt-2&quot;&gt;&lt;/div&gt;
                        ` : ''}
                    &lt;/div&gt;
                `;
                
                document.getElementById('correct-count').textContent = correct;
                document.getElementById('wrong-count').textContent = wrong;
                document.getElementById('unanswered-count').textContent = unanswered;
                document.getElementById('marked-count').textContent = marked;
                document.getElementById('result-question-number').innerHTML = `Question &lt;span&gt;${index + 1}&lt;/span&gt; of ${questions.length}`;
                document.getElementById('prev-result').disabled = index === 0;
                document.getElementById('next-result').disabled = index === questions.length - 1;
                updateResultsNavPanel();
                window.scrollTo({ top: 0, behavior: 'smooth' });
                debugLog(`Result for question ${index + 1} displayed successfully`);
            } catch (e) {
                console.error(&quot;Error displaying result:&quot;, e);
                debugLog(&quot;Failed to display result: &quot; + e.message);
            }
        }


        // Navigate to previous result
        function showPreviousResult() {
            try {
                debugLog(`Navigating to previous result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &gt; 0) {
                    showResults(currentResultQuestion - 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to previous result:&quot;, e);
                debugLog(&quot;Failed to navigate to previous result: &quot; + e.message);
            }
        }

        // Navigate to next result
        function showNextResult() {
            try {
                debugLog(`Navigating to next result from question ${currentResultQuestion + 1}`);
                if (currentResultQuestion &lt; questions.length - 1) {
                    showResults(currentResultQuestion + 1);
                }
            } catch (e) {
                console.error(&quot;Error navigating to next result:&quot;, e);
                debugLog(&quot;Failed to navigate to next result: &quot; + e.message);
            }
        }

        // Lazy-load video
        function loadVideo(button, videoUrl, containerId) {
            try {
                debugLog(`Loading video for ${containerId}: ${videoUrl}`);
                if (!videoUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No video available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No video URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;div class=&quot;video-loading&quot;&gt;&lt;/div&gt;
                    &lt;video controls class=&quot;w-full max-w-[600px] rounded-lg&quot; preload=&quot;metadata&quot; aria-label=&quot;Video explanation&quot;&gt;
                        &lt;source src=&quot;${videoUrl}&quot; type=&quot;${videoUrl.endsWith(&#x27;.m3u8&#x27;) ? &#x27;application/x-mpegURL&#x27; : &#x27;video/mp4&#x27;}&quot;&gt;
                        Your browser does not support the video tag.
                    &lt;/video&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Initialize HLS.js for .m3u8 videos
                const video = container.querySelector(&#x27;video&#x27;);
                if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(videoUrl);
                    hls.attachMedia(video);
                    hls.on(Hls.Events.ERROR, (event, data) =&gt; {
                        console.error(&quot;HLS.js error:&quot;, data);
                        container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                        debugLog(&quot;HLS.js error: &quot; + JSON.stringify(data));
                    });
                } else if (videoUrl.endsWith(&#x27;.m3u8&#x27;) &amp;&amp; video.canPlayType(&#x27;application/vnd.apple.mpegurl&#x27;)) {
                    video.src = videoUrl;
                }
                // Handle video load errors
                video.onerror = () =&gt; {
                    console.error(&quot;Video load error for URL:&quot;, videoUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Video load error for URL: &quot; + videoUrl);
                };
                // Remove loading spinner when video is ready
                video.onloadedmetadata = () =&gt; {
                    container.querySelector(&#x27;.video-loading&#x27;).remove();
                    debugLog(&quot;Video loaded successfully&quot;);
                };
            } catch (e) {
                console.error(&quot;Error loading video:&quot;, e);
                debugLog(&quot;Failed to load video: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading video. &lt;a href=&quot;${videoUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open video in new tab&quot;&gt;Open video&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Lazy-load audio
        function loadAudio(button, audioUrl, containerId) {
            try {
                debugLog(`Loading audio for ${containerId}: ${audioUrl}`);
                if (!audioUrl) {
                    const container = document.getElementById(containerId);
                    container.innerHTML = `&lt;p class=&quot;text-gray-500&quot;&gt;No audio available&lt;/p&gt;`;
                    button.remove();
                    debugLog(&quot;No audio URL provided&quot;);
                    return;
                }
                const container = document.getElementById(containerId);
                container.innerHTML = `
                    &lt;audio controls class=&quot;w-full max-w-[600px]&quot; preload=&quot;metadata&quot; aria-label=&quot;Audio explanation&quot;&gt;
                        &lt;source src=&quot;${audioUrl}&quot; type=&quot;audio/mpeg&quot;&gt;
                        Your browser does not support the audio tag.
                    &lt;/audio&gt;
                `;
                container.classList.add(&#x27;active&#x27;);
                button.remove();
                // Handle audio load errors
                const audio = container.querySelector(&#x27;audio&#x27;);
                audio.onerror = () =&gt; {
                    console.error(&quot;Audio load error for URL:&quot;, audioUrl);
                    container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
                    debugLog(&quot;Audio load error for URL: &quot; + audioUrl);
                };
                debugLog(&quot;Audio loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading audio:&quot;, e);
                debugLog(&quot;Failed to load audio: &quot; + e.message);
                const container = document.getElementById(containerId);
                container.innerHTML = `&lt;p class=&quot;text-red-500&quot;&gt;Error loading audio. &lt;a href=&quot;${audioUrl}&quot; target=&quot;_blank&quot; aria-label=&quot;Open audio in new tab&quot;&gt;Open audio&lt;/a&gt;&lt;/p&gt;`;
            }
        }

        // Toggle dark mode
        function toggleTheme() {
            try {
                debugLog(&quot;Toggling theme&quot;);
                document.documentElement.classList.toggle(&#x27;dark&#x27;);
                localStorage.setItem(&#x27;theme&#x27;, document.documentElement.classList.contains(&#x27;dark&#x27;) ? &#x27;dark&#x27; : &#x27;light&#x27;);
                debugLog(&quot;Theme toggled successfully&quot;);
            } catch (e) {
                console.error(&quot;Error toggling theme:&quot;, e);
                debugLog(&quot;Failed to toggle theme: &quot; + e.message);
            }
        }

        // Load theme preference
        function loadTheme() {
            try {
                debugLog(&quot;Loading theme preference&quot;);
                const theme = localStorage.getItem(&#x27;theme&#x27;);
                if (theme === &#x27;dark&#x27;) {
                    document.documentElement.classList.add(&#x27;dark&#x27;);
                }
                debugLog(&quot;Theme loaded successfully&quot;);
            } catch (e) {
                console.error(&quot;Error loading theme:&quot;, e);
                debugLog(&quot;Failed to load theme: &quot; + e.message);
            }
        }

        // Initialize on DOM content loaded
        window.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; {
            try {
                debugLog(&quot;DOM content loaded, initializing quiz&quot;);
                loadTheme();
                initQuiz();
            } catch (e) {
                console.error(&quot;Error during DOMContentLoaded:&quot;, e);
                debugLog(&quot;Failed to initialize on DOMContentLoaded: &quot; + e.message);
                document.getElementById(&#x27;error-message&#x27;).innerHTML = &quot;Error initializing quiz. Please check the console for details or contact support.&quot;;
                document.getElementById(&#x27;error-message&#x27;).classList.remove(&#x27;hidden&#x27;);
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" frameborder="0" width="100%" height="2000px"></iframe>
</div>

</body>
</html>
